{"version":3,"sources":["theme.js","pages/Login/loginSlice.js","axios.js","utils.js","store/chatSlice.js","store/UISlice.js","components/Filter/filterSlice.js","pages/AdditionalInfo/additionalSlice.js","store/generalSlice.js","components/TagInput/TagInput.jsx","hooks/useTags.hook.js","components/Input/Input.jsx","containers/TabPanel/TabPanel.jsx","components/Notifier/snackSlice.js","hooks/useNotifications.js","components/Avatar/AvatarContainer.jsx","components/DialogMessage/DialogMessage.jsx","pages/Register/registerSlice.js","style.jsx","components/UpdatePassword/UpdatePassword.jsx","components/UpdatePersonalInfo/UpdatePersonalInfo.jsx","containers/UpdateInfo/UpdateInfo.jsx","components/Gallery/Gallery.jsx","store/usersSlice.js","hooks/useBan.hook.js","components/ProfileListItem/ProfileListItem.jsx","components/ClickableUsersList/ClickableUsersList.jsx","components/Banned/Banned.jsx","pages/Profile/Profile.jsx","components/Form/Form.jsx","pages/Login/Login.jsx","pages/Register/Register.jsx","components/UserCard/UserCard.jsx","components/Tags/Tags.jsx","components/ProfileHeader/ProfileHeader.jsx","components/Bio/Bio.jsx","models/ws.js","hooks/useWS.hook.js","hooks/useChat.hook.js","containers/UserProfile/UserProfile.jsx","components/Filter/Filter.jsx","components/Sort/Sort.jsx","components/FIlterSortWrapper/FilterSortWrapper.jsx","pages/Strangers/Strangers.jsx","components/Header/Header.jsx","containers/Chat/ChatList/ChatList.jsx","containers/Chat/ChatRoom/Message/Message.jsx","containers/Chat/ChatRoom/SendForm/SendForm.jsx","containers/Chat/ChatRoom/ChatRoom.jsx","containers/Chat/Chat.jsx","containers/Main/Main.jsx","pages/AdditionalInfo/Steps/Step0.jsx","pages/AdditionalInfo/Steps/Step1.jsx","pages/AdditionalInfo/Steps/Step2.jsx","pages/AdditionalInfo/Steps/Step3.jsx","pages/AdditionalInfo/AdditionalInfo.jsx","components/Forgot/Forgot.jsx","components/Notifier/SnackMessage/SnackMessage.jsx","components/Notifier/Notifier.jsx","App.jsx","store/reducer.js","store/store.js","index.jsx","Images/default-avatar.png"],"names":["backgroundColor","primaryColor","light","main","dark","contrastText","contrastTextLighter","secondaryColor","theme","createMuiTheme","palette","primary","secondary","info","overrides","MuiTextField","root","width","MuiContainer","display","justifyContent","MuiBadge","anchorOriginTopRightCircle","top","right","transform","border","shape","borderRadius","props","MuiButton","variant","color","size","MuiAlert","elevation","loginSlice","createSlice","name","initialState","email","password","emailValid","passwordValid","reducers","changeEmail","state","action","payload","changePassword","changeEmailValid","changePasswordValid","actions","CancelToken","axios","api","create","baseURL","withCredentials","headers","media","responseType","validateStatus","mediaUpload","id","file","a","isAvatar","formData","FormData","append","post","res","xssSanitize","value","toString","replace","getLocationByIp","fetch","then","response","text","match","ip","json","status","data","lat","lon","console","log","source","loadImages","user","images","length","promises","map","img","cancelToken","token","Promise","allSettled","resolvedPromises","fetchedImages","filter","URL","createObjectURL","config","url","split","image","updatedUser","avatar","find","Axios","isCancel","addAge","age","Date","getFullYear","birthDate","prepareUsers","users","require","chat","chats","chatSlice","setChats","messages","addChat","push","removeChat","setChat","ch","updateMessage","selectedChat","chatId","chatIdx","findIndex","msgIdx","msg","slice","setDeleteMessage","messageIndex","upadateChatMessages","setChatById","resetState","initialUIState","showBackButton","header","selectedTab","companion","isInfoMissing","parent","UISlice","hideBackButton","setSelectedTab","label","setHeader","resetUIState","setCompanion","setIsInfoMissing","setParent","inititalFilterState","username","minAge","maxAge","filterSlice","changeUsername","changeSearchAgeRange","resetFilter","initialAdditionalState","surname","bio","gender","phone","country","city","maxDist","lookFor","tags","usernameValid","nameValid","surnameValid","bioValid","countryValid","cityValid","updateSuccess","additionalSlice","setAdditionalState","Object","keys","forEach","key","resetAdditionalState","changeName","changeSurname","changeBio","changeBirthDate","date","getTime","isNaN","changeGender","changePhone","changeCountry","changeCity","changeMaxDist","changeLookFor","changeMinAge","changeMaxAge","changeTags","changeUsernameValid","changeNameValid","changeSurnameValid","changeBioValid","changePhoneValid","phoneValid","changeCountryValid","changeCityValid","onUpdateSuccess","onUpdateFail","updateInfo","showNotif","dispatch","startLoading","body","location","position","put","tagsResponse","saveNewState","stopLoading","message","initialGeneralState","isAuth","isLoading","likedBy","matches","generalSlice","authSuccess","authFail","resetGeneralState","el","revokeObjectURL","setNewState","checkAuth","resolve","isAgeRangeMissing","indexOf","checkInfo","auth","logout","delete","Error","useStyles","makeStyles","Container","TagInput","classes","useState","setTags","fetchTags","offset","limit","params","useEffect","addTags","newTags","tagsSet","Set","removeTags","oldTags","filtered","tag","useTags","allTags","setAllTags","Grid","className","Autocomplete","multiple","freeSolo","options","getOptionLabel","option","defaultValue","onChange","e","reason","filterSelectedOptions","renderInput","TextField","placeholder","ButtonListItem","Input","SmallSelector","minWidth","padding","getDate","timestamp","year","month","getMonth","day","type","values","onValidate","rules","ignoreUntouched","touched","setTouched","error","setError","errorText","setErrorText","helperText","rule","minLength","maxLength","regex","validate","onFocus","select","MenuItem","InputLabelProps","shrink","Box","Typography","gutterBottom","Slider","valueLabelDisplay","aria-labelledby","container","justify","alignItems","item","xs","target","TabPanel","children","index","other","style","textAlign","role","hidden","snackSlice","notifications","addSnack","dismissSnack","notificaton","dismissAll","dismissed","removeSnack","useNotifications","useDispatch","Math","random","Avatar","height","AvatarContainer","useSelector","general","displayedAvatar","setDisplayedAvatar","changeAvatarHandler","files","objectUrl","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","Fab","aria-label","component","src","defaultAvatar","Transition","forwardRef","ref","Slide","direction","DialogMessage","buttonText","yesText","noText","open","setOpen","handleClose","Button","onClick","Dialog","TransitionComponent","keepMounted","onClose","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","deleteAccount","registerSlice","confirm","confirmValid","registerSuccess","changeConfirmPassword","changeConfirmValid","onRegisterSuccess","onRegisterFail","register","history","SingleForm","margin","breakpoints","down","up","maxWidth","textTransform","UpdatePassword","useLocation","notif","formValid","queryParams","queryString","parse","search","checkValidity","k","updatePasswordRequest","preventDefault","inputs","required","isValid","RegExp","buttons","disabled","FullWidth","UpdatePersonalInfo","useHistory","others","UpdateInfo","additional","setFormValid","dialog","path","exact","Card","Media","paddingTop","marginTop","Info","background","Gallery","setAvatar","imageId","spacing","sm","CardMedia","initialUsersState","strangers","loadedIds","usersSlice","successLoading","addUsers","updateUsers","userInState","sortStrangers","compareFunction","sort","setUsers","setStrangers","failLoading","resetError","resetUsersState","getUserIds","getStrangers","get","loadUsers","getState","notYetLoaded","has","userPromises","all","loadedUsers","preparedUsers","add","banUser","unbanUser","useBan","banned","setBanned","loadBanned","banAndUpdate","useCallback","userId","filteredStrangers","updatedBanned","unbanAndUpdate","marginRight","Text","fontFamily","fontSize","ProfileListItem","Menu","ListItem","autoFocusItem","defaultText","MenuList","onKeyDown","event","pathname","handleItemClick","endIcon","icon","stopPropagation","handleActionClick","Banned","bannedList","setBannedList","bannedUsers","useMemo","unbanAction","ReplayRounded","indicator","bottom","Profile","minHeight","paddingBlockEnd","TabContext","createContext","connect","currentTab","setCurrentTab","tabs","Tab","disableRipple","wrap","Provider","Tabs","next","Form","List","Buttons","useTheme","useContext","transitionDuration","enter","transitions","duration","enteringScreen","exit","leavingScreen","Zoom","in","timeout","transitionDelay","unmountOnExit","Login","login","onLoginHandler","CircularProgress","Register","onRegisterHandler","UserCard","overflow","cursor","opacity","left","InfoHeader","Tags","lineHeight","content","Stepper","StepperButton","textShadow","Like","transition","zIndex","Ban","memo","displayedImage","setDisplayedImage","handleLike","watchedId","LeftButtonDisabled","RightButtonDisabled","lg","MobileStepper","steps","activeStep","nextButton","prev","ChevronRightRounded","backButton","ChevronLeftRounded","FavoriteOutlined","handleBan","RemoveCircleOutlineRounded","defaultImage","CardContent","Item","Header","fontWeight","Chip","ProfileHeader","fullWidth","Bio","WSmessage","messageType","this","CONSTANTS","NEW_CHAT","NEW_MESSAGE","EDIT_MESSAGE","DELETE_MESSAGE","SENT_MESSAGE","DELIVERED_MESSAGE","READ_MESSAGE","Chat","userIds","Message","sender","recipient","uuid","socket","queue","newConnection","cookie","allCookies","document","decodeURIComponent","undefined","trim","getCookie","WebSocket","checkStatusAndReconnect","readyState","OPEN","send","JSON","stringify","useChat","myId","UI","getChatInfo","chatInfo","createChat","loadRecipients","pathMatch","handleChatMessage","chatID","chatData","exists","getChatsInfo","selectChat","selectedCompanion","newMessage","wsMessage","editMessage","deleteMessage","readMessage","Name","Location","FabIcon","UserProfile","md","Divider","ChatRounded","Inputs","Filter","Wrapper","Active","Sort","isAsc","setIsAsc","sortingParam","setSortingParam","sortByUsernameAsc","userA","userB","localeCompare","sortByUsernameDesc","sortByAgeAsc","sortByAgeDesc","sortByRatingAsc","rating","sortByRatingDesc","compFn","ButtonGroup","FormControlLabel","control","Checkbox","checked","Paper","ButtonLabel","boxShadow","FilterSortWrapper","setContent","show","setShow","handleShow","handleButtonPress","button","triggerShow","self","ExpandMoreRounded","ExpandLessRounded","Strangers","paddingBottom","CardContainer","allUsers","cards","setCards","routes","setRoutes","stranger","uncashed","preparedStrangers","u","loadStrangers","filteredUsers","toLowerCase","includes","render","ElevationScroll","trigger","useScrollTrigger","disableHysteresis","threshold","React","cloneElement","Appbar","Popper","PopperPaper","Category","notification","loc","anchorRef","useRef","current","contains","prevOpen","focus","AppBar","backLocation","handleBack","anchorEl","placement","disablePortal","TransitionProps","Fade","ClickAwayListener","onClickAway","Username","ChatList","handleChatSelect","chatList","newChatItem","recepient","newMessages","ListItemAvatar","alt","ListItemText","primaryTypographyProps","marginLeft","Icon","d","minutes","getMinutes","getHours","DoneAllRounded","DoneRounded","flexGrow","paddingLeft","Send","flexDirection","SendForm","setMessage","onSubmit","InputBase","maxHeight","overflowY","marginBottom","cnt","ChatRoom","mappedMessages","setMappedMessages","readAllMessages","View","Max","Search","Settings","ExitToApp","withRouter","lookedBy","setNotification","onopen","shift","onmessage","onclose","wasClean","code","onerror","useWS","handleChange","tab","lookedBySet","renderedTabs","Link","to","centered","Step0","Step1","Step2","Step3","view","AdditionalInfo","setActiveStep","alternativeLabel","Step","StepLabel","Forgot","setEmail","setEmailValid","card","default","grey","success","warning","common","white","actionRoot","close","SnackMessage","closeSnackbar","useSnackbar","selected","snack","classnames","CardActions","IconButton","displayed","Notifier","enqueueSnackbar","onExited","App","from","Main","ThemeProvider","maxSnack","CssBaseline","combineReducers","generalReducer","loginReducer","registerReducer","uiReducer","filterReducer","additionalReducer","usersReducer","chatReducer","snackReducer","store","configureStore","reducer","rootReducer","middleware","thunk","ReactDOM","getElementById","module","exports"],"mappings":"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","file":"static/js/main.193411be.chunk.js","sourcesContent":["import { unstable_createMuiStrictModeTheme as createMuiTheme } from \"@material-ui/core/styles\";\n\nexport const backgroundColor = {\n  background: \"#fafafa\",\n  foreground: \"#fdfdfd\",\n};\nexport const primaryColor = {\n  light: \"#A8DADC\",\n  main: \"#457B9D\",\n  dark: \"#1D3557\",\n  contrastText: \"#000\",\n  contrastTextLighter: \"#777\",\n};\nexport const secondaryColor = {\n  light: \"#E94957\",\n  main: \"#E63946\",\n  dark: \"#C81927\",\n  contrastText: \"#fff\",\n};\nexport const borderRadius = \"30px\";\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: primaryColor,\n    secondary: secondaryColor,\n    info: {\n      main: \"#04728B\",\n    },\n  },\n  overrides: {\n    MuiTextField: {\n      root: {\n        width: \"100%\",\n      },\n    },\n    MuiContainer: {\n      root: {\n        display: \"flex\",\n        justifyContent: \"center\",\n      },\n    },\n    MuiBadge: {\n      anchorOriginTopRightCircle: {\n        top: \"23%\",\n        right: \"33%\",\n        transform: \"scale(1.5) translate(50%, -50%)\",\n        border: `1px solid ${backgroundColor.foreground}`,\n      },\n    },\n  },\n  shape: {\n    borderRadius: borderRadius,\n  },\n  props: {\n    MuiButton: {\n      variant: \"outlined\",\n      color: \"primary\",\n      size: \"large\",\n    },\n    MuiTextField: {\n      variant: \"outlined\",\n    },\n    MuiAlert: {\n      elevation: 6,\n      variant: \"filled\",\n    },\n  },\n});\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialLoginState = {\n  email: \"\",\n  password: \"\",\n  emailValid: false,\n  passwordValid: false,\n};\n\nconst loginSlice = createSlice({\n  name: \"login\",\n  initialState: initialLoginState,\n  reducers: {\n    changeEmail(state, action) {\n      state.email = action.payload;\n    },\n    changePassword(state, action) {\n      state.password = action.payload;\n    },\n    changeEmailValid(state, { payload }) {\n      state.emailValid = payload;\n    },\n    changePasswordValid(state, { payload }) {\n      state.passwordValid = payload;\n    },\n  },\n});\n\nexport const {\n  changeEmail,\n  changePassword,\n  changeEmailValid,\n  changePasswordValid,\n} = loginSlice.actions;\n\nexport default loginSlice.reducer;\n","import axios from \"axios\";\nexport const CancelToken = axios.CancelToken;\n\nconst api = axios.create({\n  baseURL: `/api/main/`,\n  withCredentials: true,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nconst media = axios.create({\n  baseURL: \"/api/media/\",\n  withCredentials: true,\n  headers: { \"Content-Type\": \"application/json\" },\n  responseType: \"blob\",\n  validateStatus: false,\n});\n\n// media.interceptors.response.use(\n//   function (response) {\n//     // Any status code that lie within the range of 2xx cause this function to trigger\n//     // Do something with response data\n//     // console.log(response);\n//     return response;\n//   },\n//   function (error) {\n//     // console.log(error);\n//     // Any status codes that falls outside the range of 2xx cause this function to trigger\n//     // Do something with response error\n//     return Promise.reject(null);\n//   }\n// );\n\nconst mediaUpload = async (id, file, isAvatar = false) => {\n  let formData = new FormData();\n  formData.append(\"id\", id);\n  formData.append(\"isAvatar\", isAvatar);\n  formData.append(\"userImage\", file);\n  const res = await axios.post(\"/api/media/upload/\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  });\n  return res;\n};\nexport { api, media, mediaUpload };\n","import { CancelToken, media } from \"./axios\";\nimport Axios from \"axios\";\n\nexport const xssSanitize = (value) => {\n  var lt = /</g,\n    gt = />/g,\n    ap = /'/g,\n    ic = /\"/g;\n  return value\n    ? value\n        .toString()\n        .replace(lt, \"&lt;\")\n        .replace(gt, \"&gt;\")\n        .replace(ap, \"&#39;\")\n        .replace(ic, \"&#34;\")\n    : \"\";\n};\n\nexport const getLocationByIp = async () => {\n  try {\n    return await fetch(\"https://www.cloudflare.com/cdn-cgi/trace\")\n      .then((response) => response.text())\n      .then((res) => {\n        const regex = /(?<=(ip=))([\\d.]+)/g;\n        const ip = res.match(regex)[0];\n        return ip;\n      })\n      .then((ip) => fetch(`http://ip-api.com/json/${ip}`))\n      .then((res) => res.json())\n      .then((json) => ({\n        status: true,\n        data: { lat: json.lat, lon: json.lon },\n      }));\n  } catch (e) {\n    console.log(e);\n    return { status: false, data: e };\n  }\n};\nconst source = CancelToken.source();\n\nexport const capitalize = (str) => {\n  return str[0].toUpperCase() + str.slice(1);\n};\n\nexport const loadImages = async (user) => {\n  const images = user.images;\n  if (!images || images.length === 0) return { ...user, images: [] };\n\n  // console.log(\"fetching images for user: \", user);\n  // console.log(\"images: \", images);\n  try {\n    const promises = images.map((img) =>\n      media(`img/${img}`, { cancelToken: source.token })\n    );\n    const resolvedPromises = await Promise.allSettled(promises);\n    // console.log(\"image promises\", resolvedPromises);\n    const fetchedImages = resolvedPromises\n      .filter((img) => img.status === \"fulfilled\")\n      .map((img) => {\n        // console.log(img);\n        const file = URL.createObjectURL(img.value.data);\n        const image = { id: img.value.config.url.split(\"/\")[1], image: file };\n        // console.log(\"image\", image);\n        return image;\n      });\n    // console.log(\"fetchedImages\", fetchedImages);\n    const updatedUser = { ...user, images: fetchedImages };\n    updatedUser.avatar = updatedUser.images.find(\n      (img) => img.id === user.avatar\n    );\n    return updatedUser;\n  } catch (e) {\n    if (Axios.isCancel(e)) {\n      console.log(\"Request cancelled\");\n    }\n    return user;\n  }\n};\n\nexport const addAge = (user) => {\n  const age = new Date().getFullYear() - new Date(user.birthDate).getFullYear();\n  return { ...user, age };\n};\n\nexport const prepareUsers = (users) => {\n  return users.map((user) => addAge(user)).map((user) => loadImages(user));\n};\n\nexport const throttle = (f) => {\n  let store = {\n    isCooldown: false,\n    args: null,\n    savedthis: null,\n  };\n  function wrapper() {\n    if (store.isCooldown) {\n      store.savedthis = this;\n      store.args = arguments;\n      return;\n    }\n\n    f.apply(this, arguments);\n    store.isCooldown = true;\n    setTimeout(() => {\n      store.isCooldown = false;\n      if (store.args) f.apply(store.savedthis, store.args);\n      store.args = store.savedthis = null;\n    }, 30);\n  }\n\n  return wrapper;\n};\n\nexport const getCookie = (name) => {\n  const allCookies = document.cookie;\n  console.log(allCookies);\n  let matches = allCookies.match(\n    new RegExp(\n      \"(?:^|; )\" + name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, \"\\\\$1\") + \"=([^;]*)\"\n    )\n  );\n  let cookie = matches ? decodeURIComponent(matches[1]) : undefined;\n  if (cookie === undefined) {\n    cookie = allCookies.split(\";\").find((el) => el.match(/session_id.+/));\n    if (cookie) cookie = cookie.split(\"=\")[1].trim();\n  }\n  return cookie;\n};\n","import { current } from \"@reduxjs/toolkit/node_modules/immer\";\n\nconst { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst initialState = {\n  chat: null,\n  chats: [],\n};\n\nconst chatSlice = createSlice({\n  name: \"chat\",\n  initialState,\n  reducers: {\n    setChats(state, { payload }) {\n      console.log(payload);\n      if (payload && payload.length) {\n        console.log(\"payload is not null\");\n        state.chats = payload.map((chat) => ({\n          ...chat,\n          messages: chat.messages || [],\n        }));\n      }\n    },\n    addChat(state, { payload }) {\n      console.log(payload);\n      if (!state.chats.find((chat) => chat.id === payload.id)) {\n        console.log(\"chat not found, adding\", payload);\n        state.chats.push({ ...payload, messages: payload.messages || [] });\n      }\n    },\n    removeChat(state, { payload }) {\n      state.chats = state.chats?.filter((chat) => chat.id !== payload.id);\n    },\n    setChat(state, { payload }) {\n      const chat = payload\n        ? state.chats.find((ch) => ch.id === payload.id)\n        : null;\n      state.chat = chat?.id || null;\n    },\n    updateMessage(state, { payload }) {\n      const selectedChat =\n        state.chat || state.chats.find((ch) => ch.id === payload.chatId)?.id;\n      if (!selectedChat) {\n        console.log(\"[updateMessage] chat not found. payload:\", payload);\n        return;\n      }\n\n      const chatIdx = state.chats.findIndex((chat) => chat.id === selectedChat);\n      const msgIdx = state.chats[chatIdx].messages.findIndex(\n        (msg) => msg.id === payload.id\n      );\n\n      console.log(`chatIdx: ${chatIdx}, msgIdx: ${msgIdx}`);\n      if (msgIdx === -1) {\n        state.chats[chatIdx].messages.push({ ...payload });\n      } else {\n        state.chats[chatIdx].messages = [\n          ...state.chats[chatIdx].messages.slice(0, msgIdx),\n          { ...payload },\n          ...state.chats[chatIdx].messages.slice(msgIdx + 1),\n        ];\n      }\n    },\n    setDeleteMessage(state, { payload }) {\n      const selectedChat =\n        state.chat || state.chats.find((ch) => ch.id === payload.chatId)?.id;\n      const chatIdx = state.chats.findIndex((chat) => chat.id === selectedChat);\n      const messageIndex = state.chats[chatIdx].messages.findIndex(\n        (msg) => msg.id === payload.id\n      );\n      if (messageIndex !== -1) {\n        state.chat.messages = [\n          ...state.chat.messages.slice(0, messageIndex),\n          ...state.chat.messages.slice(messageIndex + 1),\n        ];\n      }\n    },\n    upadateChatMessages(state, { payload }) {\n      if (!state.chat) return;\n      const chatIdx = state.chats.findIndex((chat) => chat.id === state.chat);\n      state.chats[chatIdx].messages = payload;\n    },\n    setChatById(state, { payload }) {\n      state.chat = payload;\n    },\n    resetState() {\n      return initialState;\n    },\n  },\n});\n\nexport const {\n  setChat,\n  setChats,\n  setChatById,\n  removeChat,\n  addChat,\n  resetState,\n  updateMessage,\n  setDeleteMessage,\n  upadateChatMessages,\n} = chatSlice.actions;\n\nexport default chatSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { api } from \"../axios\";\nimport { setChat } from \"./chatSlice\";\n\nconst initialUIState = {\n  showBackButton: false,\n  header: null,\n  selectedTab: null,\n  companion: null,\n  isInfoMissing: false,\n  parent: \"/\",\n};\n\nconst UISlice = createSlice({\n  name: \"UI\",\n  initialState: initialUIState,\n  reducers: {\n    showBackButton(state) {\n      state.showBackButton = true;\n    },\n    hideBackButton(state) {\n      state.showBackButton = false;\n    },\n    setSelectedTab(state, { payload }) {\n      state.selectedTab = payload.selectedTab;\n      state.header = payload.selectedTab.label;\n      state.companion = null;\n    },\n    setHeader(state, { payload }) {\n      state.header = payload.header;\n    },\n    resetUIState: () => initialUIState,\n    setCompanion(state, { payload }) {\n      state.companion = payload.companion;\n    },\n    setIsInfoMissing(state, { payload }) {\n      state.isInfoMissing = payload;\n    },\n    setParent(state, { payload }) {\n      state.parent = payload.parent;\n    },\n  },\n});\n\nexport const {\n  showBackButton,\n  hideBackButton,\n  setSelectedTab,\n  setHeader,\n  resetUIState,\n  setCompanion,\n  setIsInfoMissing,\n  setParent,\n} = UISlice.actions;\n\nexport const handleBack = (history, parent) => (dispatch, useState) => {\n  const backLocation = useState().UI.parent;\n  dispatch(hideBackButton());\n  dispatch(setHeader({ header: parent }));\n  dispatch(setCompanion({ companion: null }));\n  dispatch(setChat(null));\n  backLocation === \"strangers\"\n    ? history.push(\"/\")\n    : history.push(`/${backLocation}`);\n};\n\nexport const sendVisit = (watchedId) => (dispatch) => {\n  try {\n    api.post(`/look`, { id: watchedId });\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const sendLike = (watchedId) => (dispatch) => {\n  try {\n    api.post(`/like`, { id: watchedId });\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport default UISlice.reducer;\n","const { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst inititalFilterState = {\n  username: \"\",\n  age: { minAge: 0, maxAge: 100 },\n};\n\nconst filterSlice = createSlice({\n  name: \"filter\",\n  initialState: inititalFilterState,\n  reducers: {\n    changeUsername(state, { payload }) {\n      state.username = payload;\n    },\n    changeSearchAgeRange(state, { payload }) {\n      state.age = { ...state.age, ...payload };\n    },\n    resetFilter(state) {\n      state = { ...inititalFilterState };\n    },\n  },\n});\n\nexport const { changeUsername, changeSearchAgeRange, resetFilter } = filterSlice.actions;\n\nexport default filterSlice.reducer;\n","import { api } from \"../../axios\";\nimport { saveNewState } from \"../../store/generalSlice\";\nimport { startLoading, stopLoading } from \"../../store/generalSlice\";\nimport { getLocationByIp, xssSanitize } from \"../../utils\";\n\nconst { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst initialAdditionalState = {\n  id: \"\",\n  email: \"\",\n  name: \"\",\n  surname: \"\",\n  username: \"\",\n  bio: \"\",\n  birthDate: 0,\n  gender: \"\",\n  phone: \"\",\n  country: \"\",\n  city: \"\",\n  maxDist: 0,\n  lookFor: \"\",\n  minAge: 0,\n  maxAge: 100,\n  tags: null,\n\n  emailValid: false,\n  usernameValid: false,\n  nameValid: false,\n  surnameValid: false,\n  bioValid: false,\n  countryValid: false,\n  cityValid: false,\n\n  updateSuccess: false,\n};\n\nconst additionalSlice = createSlice({\n  name: \"additional\",\n  initialState: initialAdditionalState,\n  reducers: {\n    setAdditionalState(state, { payload }) {\n      Object.keys(initialAdditionalState).forEach((key) => {\n        state[key] = payload[key] || initialAdditionalState[key];\n      });\n    },\n    resetAdditionalState: () => initialAdditionalState,\n    changeEmail(state, { payload }) {\n      state.email = payload;\n    },\n    changeUsername(state, { payload }) {\n      state.username = payload;\n    },\n    changeName(state, { payload }) {\n      state.name = payload;\n    },\n    changeSurname(state, { payload }) {\n      state.surname = payload;\n    },\n    changeBio(state, { payload }) {\n      state.bio = payload;\n    },\n    changeBirthDate(state, { payload }) {\n      let date = new Date(payload).getTime();\n      if (!isNaN(date)) state.birthDate = date;\n    },\n    changeGender(state, { payload }) {\n      state.gender = payload;\n    },\n    changePhone(state, { payload }) {\n      state.phone = payload;\n    },\n    changeCountry(state, { payload }) {\n      state.country = payload;\n    },\n    changeCity(state, { payload }) {\n      state.city = payload;\n    },\n    changeMaxDist(state, { payload }) {\n      state.maxDist = +payload;\n    },\n    changeLookFor(state, { payload }) {\n      state.lookFor = payload;\n    },\n    changeSearchAgeRange(state, { payload }) {\n      state.minAge = payload[0];\n      state.maxAge = payload[1];\n    },\n    changeMinAge(state, { payload }) {\n      state.minAge = payload;\n    },\n    changeMaxAge(state, { payload }) {\n      state.maxAge = payload;\n    },\n    changeTags(state, { payload: { value } }) {\n      state.tags = value;\n    },\n\n    changeEmailValid(state, { payload }) {\n      state.emailValid = payload;\n    },\n    changeUsernameValid(state, { payload }) {\n      state.usernameValid = payload;\n    },\n    changeNameValid(state, { payload }) {\n      state.nameValid = payload;\n    },\n    changeSurnameValid(state, { payload }) {\n      state.surnameValid = payload;\n    },\n    changeBioValid(state, { payload }) {\n      state.bioValid = payload;\n    },\n    changePhoneValid(state, { payload }) {\n      state.phoneValid = payload;\n    },\n    changeCountryValid(state, { payload }) {\n      state.countryValid = payload;\n    },\n    changeCityValid(state, { payload }) {\n      state.cityValid = payload;\n    },\n    onUpdateSuccess(state) {\n      state.updateSuccess = true;\n    },\n    onUpdateFail(state) {\n      state.updateSuccess = false;\n    },\n  },\n});\n\nexport const {\n  setAdditionalState,\n  resetAdditionalState,\n\n  changeEmail,\n  changeUsername,\n  changeName,\n  changeSurname,\n  changeBio,\n  changeBirthDate,\n  changeGender,\n  changePhone,\n  changeCountry,\n  changeCity,\n  changeMaxDist,\n  changeLookFor,\n  changeSearchAgeRange,\n  changeTags,\n\n  changeEmailValid,\n  changeUsernameValid,\n  changeNameValid,\n  changeSurnameValid,\n  changeBioValid,\n  changePhoneValid,\n  changeCountryValid,\n  changeCityValid,\n  onUpdateSuccess,\n  onUpdateFail,\n} = additionalSlice.actions;\n\nexport const updateInfo = (\n  {\n    id,\n    username,\n    name,\n    surname,\n    bio,\n    birthDate,\n    phone,\n    gender,\n    country,\n    city,\n    maxDist,\n    lookFor,\n    minAge,\n    maxAge,\n    tags,\n  },\n  showNotif\n) => async (dispatch) => {\n  dispatch(startLoading());\n\n  const body = {\n    id,\n    username,\n    name: xssSanitize(name),\n    surname: xssSanitize(surname),\n    bio: xssSanitize(bio),\n    phone,\n    birthDate,\n    gender,\n    country: xssSanitize(country),\n    city: xssSanitize(city),\n    maxDist,\n    lookFor,\n    minAge,\n    maxAge,\n  };\n  try {\n    const location = await getLocationByIp();\n    if (location.status) body.position = location.data;\n  } catch (e) {\n    console.log(\"Getting location failed\");\n  }\n  console.log(\"[AdditionalInfoSlice] update user info\");\n  console.log(body);\n  let message;\n  try {\n    const response = await api.put(\"account\", body);\n    if (tags && tags.length) {\n      const tagsResponse = await api.put(\"tag\", { tags: [...tags] });\n      console.log(\"TAGS\", tagsResponse);\n      if (tagsResponse.data.status) {\n        dispatch(saveNewState({ tags }));\n      }\n    }\n\n    console.log(response.data.data);\n    if (response.data.status) {\n      dispatch(saveNewState(body));\n      dispatch(onUpdateSuccess());\n      showNotif(\"Successfully saved!\", \"success\");\n      dispatch(stopLoading());\n      return;\n    } else {\n      message = response.data;\n    }\n  } catch (e) {\n    message = e;\n  }\n  dispatch(onUpdateFail());\n  console.log(message);\n  showNotif(\"Server error\", \"error\");\n  dispatch(stopLoading());\n};\n\nexport default additionalSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { api } from \"../axios\";\nimport { prepareUsers, xssSanitize } from \"../utils\";\nimport { resetUIState, setIsInfoMissing } from \"./UISlice\";\nimport { resetFilter } from \"../components/Filter/filterSlice\";\nimport { setAdditionalState } from \"../pages/AdditionalInfo/additionalSlice\";\n\nconst initialGeneralState = {\n  isAuth: false,\n  isLoading: false,\n  id: \"\",\n  email: \"\",\n  phone: \"\",\n  name: \"\",\n  surname: \"\",\n  username: \"\",\n  bio: \"\",\n  birthDate: 0,\n  gender: \"\",\n  country: \"\",\n  city: \"\",\n  maxDist: 0,\n  lookFor: \"\",\n  minAge: 0,\n  maxAge: 0,\n  images: [],\n  avatar: null,\n  likedBy: [],\n  matches: [],\n  position: { lat: 0, lon: 0 },\n};\n\nconst generalSlice = createSlice({\n  name: \"general\",\n  initialState: initialGeneralState,\n  reducers: {\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    stopLoading(state) {\n      state.isLoading = false;\n    },\n    authSuccess(state) {\n      state.isAuth = true;\n      state.isLoading = false;\n    },\n    authFail(state) {\n      state.isAuth = false;\n      state.isLoading = false;\n    },\n    resetGeneralState: (state) => {\n      state.images &&\n        state.images.forEach((el) => URL.revokeObjectURL(el.image));\n      return initialGeneralState;\n    },\n    setNewState(state, { payload }) {\n      Object.keys(payload).forEach((key) => {\n        if (key === \"position\") {\n          state.position.lat = payload.position.lat;\n          state.position.lon = payload.position.lon;\n        } else if (key === \"images\" && payload.images) {\n          state.images =\n            state.images && state.images.length > 0\n              ? [...state.images, ...payload[key]]\n              : [...payload[key]];\n        }\n        state[key] = payload[key];\n      });\n    },\n  },\n});\n\nexport const {\n  startLoading,\n  stopLoading,\n  authSuccess,\n  authFail,\n  resetGeneralState,\n  setNewState,\n} = generalSlice.actions;\n\nconst checkAuth = async (data, dispatch) => {\n  // console.log(data);\n  console.log(data.data);\n  dispatch(saveNewState(data.data));\n  dispatch(authSuccess());\n  dispatch(setAdditionalState(data.data));\n  const user = await Promise.resolve(prepareUsers([data.data])[0]);\n  console.log(user);\n  if (user) {\n    dispatch(saveNewState(user));\n    dispatch(setAdditionalState(user));\n  }\n};\n\nconst checkInfo = (info) => {\n  let isInfoMissing = false;\n  let isAgeRangeMissing = false;\n  Object.keys(info).forEach((key) => {\n    // skip these keys\n    if (\n      [\n        \"tags\",\n        \"position\",\n        \"lookedBy\",\n        \"likedBy\",\n        \"matches\",\n        \"avatar\",\n        \"images\",\n        \"bio\",\n      ].indexOf(key) !== -1\n    )\n      return;\n    // check if ageRange is default\n    if (key === \"minAge\" || key === \"maxAge\") {\n      isAgeRangeMissing =\n        info[\"maxAge\"] === initialGeneralState[\"maxAge\"] &&\n        info[\"minAge\"] === initialGeneralState[\"minAge\"];\n    } else {\n      isInfoMissing = isInfoMissing || info[key] === initialGeneralState[key];\n    }\n  });\n  // console.log(isInfoMissing, isAgeRangeMissing);\n  return isInfoMissing || isAgeRangeMissing;\n};\n\nexport const getSelfInfo = () => async (dispatch) => {\n  try {\n    const res = await api(\"account\");\n    dispatch(startLoading());\n    if (res.data.status) {\n      checkAuth(res.data, dispatch);\n    } else {\n      dispatch(authFail());\n    }\n  } catch (e) {\n    dispatch(authFail());\n  }\n};\n\nexport const saveNewState = (payload) => (dispatch) => {\n  let isInfoMissing = checkInfo(payload);\n  dispatch(setIsInfoMissing(isInfoMissing));\n  dispatch(setNewState(payload));\n};\n\nexport const auth = (email, password, showNotif) => async (dispatch) => {\n  dispatch(startLoading());\n  try {\n    const body = {\n      email: xssSanitize(email),\n      password: xssSanitize(password),\n    };\n    const res = await api.post(\"/signin\", body);\n    if (res.data.status) {\n      checkAuth(res.data, dispatch);\n    } else {\n      dispatch(authFail());\n      dispatch(resetGeneralState());\n      showNotif(res.data.data, \"error\");\n    }\n  } catch (err) {\n    console.log(err);\n    dispatch(authFail());\n    showNotif(\"Server error\", \"error\");\n  }\n};\n\nexport const logout = (showNotif) => async (dispatch) => {\n  dispatch(startLoading());\n  try {\n    const res = await api.delete(\"/signout\");\n    if (res.data.status) {\n      showNotif(\"Successful logout\", \"success\");\n      dispatch(resetGeneralState());\n      dispatch(resetUIState());\n      dispatch(resetFilter());\n    } else {\n      throw new Error(res.data.data);\n    }\n  } catch (e) {\n    dispatch(stopLoading());\n    showNotif(\"Server error\", \"error\");\n  }\n};\n\nexport const deleteAccount = (showNotif) => async (dispatch) => {\n  try {\n    const res = await api.delete(\"account\");\n    console.log(res.data);\n    if (res.data.status) {\n      showNotif(\"Account successfully deleted\", \"success\");\n      dispatch(resetGeneralState());\n      dispatch(resetUIState());\n      dispatch(resetFilter());\n    } else {\n      throw new Error(res.data.data);\n    }\n  } catch (e) {\n    dispatch(stopLoading());\n    showNotif(e, \"error\");\n  }\n};\n\nexport default generalSlice.reducer;\n","import { Grid, makeStyles, TextField } from \"@material-ui/core\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTags } from \"../../hooks/useTags.hook\";\n\nconst useStyles = makeStyles({\n  Container: {\n    width: \"100%\",\n  },\n});\n\nconst TagInput = (props) => {\n  const classes = useStyles();\n  const { tags } = useTags();\n  const [allTags, setAllTags] = useState([]);\n\n  useEffect(() => {\n    setAllTags(tags);\n  }, [tags]);\n\n  return (\n    <Grid className={classes.Container}>\n      {allTags && (\n        <Autocomplete\n          multiple\n          freeSolo\n          id=\"tags-outlined\"\n          options={allTags}\n          getOptionLabel={(option) => option}\n          defaultValue={props.tags}\n          onChange={(e, value, reason) => props.onChange({ value })}\n          filterSelectedOptions\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              variant=\"outlined\"\n              label=\"Tags\"\n              placeholder=\"Enter tag and press enter\"\n            />\n          )}\n        />\n      )}\n    </Grid>\n  );\n};\n\nexport default TagInput;\n","import { useEffect, useState } from \"react\";\nimport { api } from \"../axios\";\n\nexport const useTags = () => {\n  const [tags, setTags] = useState([]);\n\n  const fetchTags = async (offset = 0, limit = 10) => {\n    const res = await api(\"tag\", { params: { offset, limit } });\n    // console.log(res.data);\n    if (res.data.status && res.data.data) {\n      setTags(res.data.data);\n    }\n  };\n\n  useEffect(() => {\n    fetchTags();\n  }, []);\n\n  const addTags = (newTags) => {\n    const tagsSet = new Set([...tags, ...newTags]);\n    setTags([...tagsSet]);\n  };\n\n  const removeTags = (oldTags) => {\n    const filtered = tags.filter((tag) => !oldTags.find((el) => el === tag));\n    setTags(filtered);\n  };\n\n  return { tags, fetchTags, addTags, removeTags };\n};\n","import React, { useEffect, useState } from \"react\";\nimport {\n  MenuItem,\n  TextField,\n  Box,\n  Slider,\n  Typography,\n  makeStyles,\n  Grid,\n} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport TagInput from \"../TagInput/TagInput\";\n\nconst useStyles = makeStyles({\n  ButtonListItem: {\n    justifyContent: \"center\",\n  },\n  Input: {\n    width: \"100%\",\n  },\n  SmallSelector: {\n    minWidth: \"100px\",\n    padding: \"10px\",\n  },\n});\n\nconst getDate = (timestamp) => {\n  const date = new Date(timestamp);\n  let year = date.getFullYear();\n  if (year < 10) year = \"000\" + year;\n  else if (year < 100) year = \"00\" + year;\n  else if (year < 1000) year = \"0\" + year;\n  else if (year > 3000) year = 3000;\n  let month = date.getMonth() + 1;\n  month = month < 10 ? \"0\" + month : \"\" + month;\n  let day = date.getDate();\n  day = day < 10 ? \"0\" + day : \"\" + day;\n  const formattedDate = `${year}-${month}-${day}`;\n  return formattedDate;\n};\n\n/**\n * checks *value* based on *rule* if input was *touched*\n * @param {string} value checked value\n * @param {regex} rule rule to match value\n * @param {boolean} touched flag to check if input was already focused\n */\nconst validate = (value, rule, touched) => {\n  return touched\n    ? value.length >= rule.minLength &&\n        value.length <= rule.maxLength &&\n        value.match(rule.regex)\n    : true;\n};\n\nconst Input = (props) => {\n  const classes = useStyles();\n  const {\n    type,\n    label,\n    name,\n    values,\n    value,\n    onValidate,\n    onChange,\n    rules,\n    ignoreUntouched, //defaults to false if not passed explictly\n  } = {\n    ...props,\n  };\n  const [touched, setTouched] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorText, setErrorText] = useState(\"\");\n\n  const { helperText, rule } = rules\n    ? { ...rules }\n    : { ...{ helperText: \"\", rule: null } };\n\n  useEffect(() => {\n    let error;\n    // check *touched* only if *ignoreUntouched* is false\n    error = rule ? !validate(value, rule, ignoreUntouched || touched) : false;\n    // update error message\n    error ? setErrorText(helperText) : setErrorText(\"\");\n    // update inputValid state in Redux\n    onValidate && onValidate((ignoreUntouched || touched) && !error);\n    setError(error);\n  }, [value, rule, touched, helperText, onValidate]);\n\n  switch (type) {\n    case \"text\":\n    case \"number\":\n    case \"email\":\n    case \"password\":\n      return (\n        <TextField\n          id={name}\n          error={error}\n          helperText={errorText}\n          type={type}\n          label={label}\n          value={value}\n          className={classes.Input}\n          onFocus={() => setTouched(true)}\n          onChange={(e) => onChange(e)}\n        />\n      );\n    case \"select\":\n      return (\n        <TextField\n          id={name}\n          key={name}\n          label={label}\n          value={value}\n          className={classes.Input}\n          onChange={(e) => onChange(e)}\n          select\n        >\n          {values.map((e) => (\n            <MenuItem key={e} value={e}>\n              {e}\n            </MenuItem>\n          ))}\n        </TextField>\n      );\n    case \"date\":\n      return (\n        <TextField\n          id={name}\n          type=\"date\"\n          label=\"Birth Date\"\n          className={classes.Input}\n          InputLabelProps={{ shrink: true }}\n          value={getDate(value)}\n          onChange={(e) => onChange(e)}\n        />\n      );\n    case \"slider\":\n      return (\n        <Box className={classes.Input}>\n          <Typography id=\"range-slider\" gutterBottom>\n            {label}\n          </Typography>\n          <Slider\n            value={value}\n            onChange={(e, value) => onChange(value)}\n            valueLabelDisplay=\"auto\"\n            aria-labelledby=\"range-slider\"\n          />\n        </Box>\n      );\n    case \"doubleSelector\":\n      return (\n        <Box key={name} className={classes.Input}>\n          <Grid container justify=\"space-evenly\" alignItems=\"center\">\n            <Grid item xs={3}>\n              <TextField\n                id={\"min\" + name}\n                type=\"number\"\n                value={value.minAge}\n                label=\"Minimum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ minAge: +e.target.value })}\n              />\n            </Grid>\n            <Grid item xs={3}>\n              <TextField\n                id={\"max\" + name}\n                type=\"number\"\n                value={value.maxAge}\n                label=\"Maximum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ maxAge: +e.target.value })}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n      );\n    case \"autocomplete\":\n      return (\n        <TagInput className={classes.Input} tags={values} onChange={onChange} />\n      );\n    default:\n      return null;\n  }\n};\n\nInput.propTypes = {\n  type: PropTypes.oneOf([\n    \"text\",\n    \"number\",\n    \"password\",\n    \"email\",\n    \"select\",\n    \"date\",\n    \"slider\",\n    \"doubleSelector\",\n    \"autocomplete\",\n  ]).isRequired,\n  label: PropTypes.string,\n  name: PropTypes.string,\n  values: PropTypes.array,\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.array,\n    PropTypes.exact({\n      minAge: PropTypes.number,\n      maxAge: PropTypes.number,\n    }),\n  ]),\n  onValidate: PropTypes.func,\n  onChange: PropTypes.func.isRequired,\n  rules: PropTypes.exact({\n    rule: PropTypes.exact({\n      minLength: PropTypes.number,\n      maxLength: PropTypes.number,\n      regex: PropTypes.any,\n    }),\n    helperText: PropTypes.string,\n  }),\n};\n\nexport default Input;\n","import React from \"react\";\nimport { Box } from \"@material-ui/core\";\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Box\n      style={{ width: \"70%\", textAlign: \"center\" }}\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      borderRadius={0}\n      {...other}\n    >\n      {children}\n    </Box>\n  );\n}\n\nexport default TabPanel;\n","const { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst initialState = {\n  notifications: [],\n};\n\nconst snackSlice = createSlice({\n  name: \"snack\",\n  initialState,\n  reducers: {\n    addSnack(state, { payload }) {\n      state.notifications.push(payload);\n    },\n    dismissSnack(state, { payload }) {\n      state.notifications = state.notifications.map((notificaton) =>\n        payload.dismissAll || notificaton.key === payload.key\n          ? { ...notificaton, dismissed: true }\n          : notificaton\n      );\n    },\n    removeSnack(state, { payload }) {\n      console.log(payload);\n      state.notifications = state.notifications.filter(\n        (el) => el.key !== payload.key\n      );\n    },\n  },\n});\n\nexport const { addSnack, dismissSnack, removeSnack } = {\n  ...snackSlice.actions,\n};\n\nexport default snackSlice.reducer;\n","import { useDispatch } from \"react-redux\";\nimport { addSnack } from \"../components/Notifier/snackSlice\";\n\nexport const useNotifications = () => {\n  const dispatch = useDispatch();\n\n  const showNotif = (message, variant, options = {}) => {\n    dispatch(\n      addSnack({\n        key: new Date().getTime() * Math.random(),\n        text: message.text || message,\n        header: message.header,\n        variant: variant || \"default\",\n        options,\n      })\n    );\n  };\n  return showNotif;\n};\n","import React, { useState } from \"react\";\nimport PublishIcon from \"@material-ui/icons/Publish\";\nimport { mediaUpload } from \"../../axios\";\nimport { Avatar, Badge, Fab, makeStyles } from \"@material-ui/core\";\nimport { useSelector } from \"react-redux\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\nimport { saveNewState } from \"../../store/generalSlice\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\n\nconst useStyles = makeStyles({\n  Avatar: {\n    width: \"300px\",\n    height: \"300px\",\n  },\n});\n\nconst AvatarContainer = () => {\n  const classes = useStyles();\n  const { id, images, avatar } = useSelector((state) => state.general);\n  const showNotif = useNotifications();\n  const [displayedAvatar, setDisplayedAvatar] = useState(null);\n\n  const changeAvatarHandler = async (e) => {\n    if (!e.target.files || e.target.files.length === 0) {\n      return;\n    }\n    const image = e.target.files[0];\n    if (image.size > 1000000) {\n      showNotif(\"The file is larger than 1MB\", \"error\");\n    }\n    const res = await mediaUpload(id, image);\n    const objectUrl = URL.createObjectURL(image);\n    const avatar = { id: res.data.data.id, image: objectUrl };\n    setDisplayedAvatar(avatar);\n\n    if (res.data.status && res.data.data) {\n      saveNewState({ images: [...images, avatar] });\n      showNotif(\"The file was uploaded\", \"success\");\n    } else {\n      console.error(res.data);\n      showNotif(\"Server error\", \"error\");\n    }\n  };\n\n  return (\n    <Badge\n      overlap=\"circle\"\n      anchorOrigin={{\n        vertical: \"bottom\",\n        horizontal: \"right\",\n      }}\n      badgeContent={\n        <Fab\n          color=\"primary\"\n          aria-label=\"upload image\"\n          component=\"label\"\n          onChange={(e) => changeAvatarHandler(e)}\n        >\n          <PublishIcon />\n          <input type=\"file\" style={{ display: \"none\" }} />\n        </Fab>\n      }\n    >\n      <Avatar\n        className={classes.Avatar}\n        src={displayedAvatar?.image || avatar?.image || defaultAvatar}\n      />\n    </Badge>\n  );\n};\n\nexport default AvatarContainer;\n","import React, { useState, forwardRef } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Slide from \"@material-ui/core/Slide\";\nimport { useDispatch } from \"react-redux\";\nimport { deleteAccount } from \"../../store/generalSlice\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\n\nconst Transition = forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function DialogMessage({\n  buttonText,\n  yesText,\n  noText,\n  header,\n  text,\n}) {\n  const [open, setOpen] = useState(false);\n  const dispatch = useDispatch();\n  const showNotif = useNotifications();\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteAccount(showNotif));\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\n        {buttonText}\n      </Button>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-slide-title\"\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle id=\"alert-dialog-slide-title\">{header}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            {text}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            {noText}\n          </Button>\n          <Button onClick={handleDelete} color=\"primary\">\n            {yesText}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { api } from \"../../axios\";\nimport { startLoading, stopLoading } from \"../../store/generalSlice\";\nimport { xssSanitize } from \"../../utils\";\n\nconst initialRegisterState = {\n  email: \"\",\n  username: \"\",\n  password: \"\",\n  confirm: \"\",\n  emailValid: false,\n  usernameValid: false,\n  passwordValid: false,\n  confirmValid: false,\n  phoneValid: false,\n  registerSuccess: false,\n};\n\nconst registerSlice = createSlice({\n  name: \"register\",\n  initialState: initialRegisterState,\n  reducers: {\n    changeEmail(state, { payload }) {\n      state.email = payload;\n    },\n    changeUsername(state, { payload }) {\n      state.username = payload;\n    },\n    changePassword(state, { payload }) {\n      state.password = payload;\n    },\n    changeConfirmPassword(state, { payload }) {\n      state.confirm = payload;\n    },\n\n    changeEmailValid(state, { payload }) {\n      state.emailValid = payload;\n    },\n    changeUsernameValid(state, { payload }) {\n      state.usernameValid = payload;\n    },\n    changePasswordValid(state, { payload }) {\n      state.passwordValid = payload;\n    },\n    changeConfirmValid(state, { payload }) {\n      state.confirmValid = payload;\n    },\n\n    onRegisterSuccess(state) {\n      state.registerSuccess = true;\n    },\n    onRegisterFail(state) {\n      state.registerSuccess = false;\n    },\n  },\n});\n\nexport const {\n  changeEmail,\n  changeUsername,\n  changePassword,\n  changeConfirmPassword,\n\n  changeEmailValid,\n  changeUsernameValid,\n  changePasswordValid,\n  changeConfirmValid,\n  changePhoneValid,\n  onRegisterSuccess,\n  onRegisterFail,\n} = registerSlice.actions;\n\nexport const register = (\n  username,\n  email,\n  password,\n  showNotif,\n  history\n) => async (dispatch) => {\n  dispatch(startLoading());\n  const body = {\n    username: xssSanitize(username),\n    email: xssSanitize(email),\n    password: xssSanitize(password),\n  };\n  // console.log(body);\n  try {\n    const response = await api.post(\"signup\", body);\n    // console.log(response.data);\n    if (response.data.status === true) {\n      dispatch(onRegisterSuccess());\n      showNotif(\"Account successfully created, now login\", \"success\");\n      history.push(\"/login\");\n    } else {\n      showNotif(response.data.data, \"error\");\n    }\n  } catch (e) {\n    showNotif(\"server error\", \"error\");\n  }\n  dispatch(stopLoading());\n};\n\nexport default registerSlice.reducer;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  SingleForm: {\n    width: \"70vw\",\n    height: \"100vh\",\n    margin: \"0 auto\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100vw\",\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      maxWidth: \"600px !important\",\n    },\n  },\n  label: {\n    textTransform: \"none\",\n  },\n}));\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport { api } from \"../../axios\";\nimport queryString from \"query-string\";\nimport {\n  changePassword,\n  changePasswordValid,\n  changeConfirmPassword,\n  changeConfirmValid,\n} from \"../../pages/Register/registerSlice\";\nimport Form from \"../Form/Form\";\nimport { Grid } from \"@material-ui/core\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\n\nconst UpdatePassword = (props) => {\n  const classes = useStyles();\n  const { password, passwordValid, confirm, confirmValid } = useSelector(\n    (state) => state.register\n  );\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const notif = useNotifications();\n  const formValid = passwordValid && confirmValid;\n  const queryParams = queryString.parse(location.search);\n  console.log(props);\n\n  const checkValidity = async (k) => {\n    try {\n      const res = await api(\"/reset\", { params: { k } });\n      if (!res.data.status)\n        notif(`${res.data.data}. Try request link once again`, \"warning\");\n    } catch (e) {\n      notif(\"Server error\", \"error\");\n    }\n  };\n\n  const updatePasswordRequest = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await api.put(\"/reset\", { password });\n      if (res.data.status) notif(\"New password successfully saved\", \"success\");\n      else notif(res.data.data, \"success\");\n    } catch (e) {\n      notif(\"Server error\", \"error\");\n    }\n  };\n\n  useEffect(() => {\n    checkValidity(queryParams.k);\n  }, []);\n\n  const inputs = [\n    {\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\",\n      value: password,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changePasswordValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changePassword(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use at least one lower- and uppercase letter, number and symbol. Min length 4\",\n        rule: {\n          minLength: 4,\n          maxLength: 20,\n          regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/,\n        },\n      },\n    },\n    {\n      name: \"confirm\",\n      type: \"password\",\n      label: \"Confirm\",\n      value: confirm,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeConfirmValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeConfirmPassword(e.target.value));\n      },\n      rules: {\n        helperText: \"Confirm and password does not match\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: new RegExp(`^${password}$`),\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      component: \"button\",\n      type: \"submit\",\n      text: \"update personal info\",\n      size: \"large\",\n      disabled: !formValid,\n      onClick: updatePasswordRequest,\n    },\n  ];\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      className={classes.SingleForm}\n    >\n      <Form inputs={inputs} buttons={buttons} />\n    </Grid>\n  );\n};\n\nexport default UpdatePassword;\n","import React from \"react\";\nimport { Button, Grid, makeStyles } from \"@material-ui/core\";\nimport { setHeader, showBackButton, setParent } from \"../../store/UISlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { api } from \"../../axios\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\n\nconst useStyles = makeStyles({\n  FullWidth: {\n    width: \"100%\",\n  },\n  Button: {\n    width: \"80%\",\n    margin: \"0.5rem 0\",\n  },\n});\n\nconst UpdatePersonalInfo = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const email = useSelector((state) => state.general.email);\n  const notif = useNotifications();\n\n  const changeEmailRequest = () => {};\n  const changePasswordRequest = () => {\n    dispatch(setParent({ parent: \"profile\" }));\n    dispatch(setHeader({ header: \"Update password\" }));\n    dispatch(showBackButton());\n    const res = api.post(\"/reset\", { email });\n    notif(\"Check your email\", \"info\");\n    // history.push(\"/profile/password-update\");\n  };\n  const changeUsernameRequest = () => {};\n\n  const buttons = [\n    {\n      component: \"button\",\n      text: \"update email\",\n      size: \"large\",\n      onClick: changeEmailRequest,\n    },\n    {\n      component: \"button\",\n      text: \"update username\",\n      size: \"large\",\n      onClick: changeUsernameRequest,\n    },\n    {\n      component: \"button\",\n      text: \"request change password link\",\n      size: \"large\",\n      onClick: changePasswordRequest,\n    },\n  ];\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.FullWidth}\n    >\n      {buttons.map(({ component, variant, type, text, onClick, ...others }) => (\n        <Button\n          key={text}\n          className={classes.Button}\n          variant={variant}\n          type={type}\n          onClick={onClick}\n          {...others}\n        >\n          {text}\n        </Button>\n      ))}\n    </Grid>\n  );\n};\n\nexport default UpdatePersonalInfo;\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../components/Form/Form\";\nimport {\n  changeEmail,\n  changeUsername,\n  changeName,\n  changeSurname,\n  changeBirthDate,\n  changeGender,\n  changeBio,\n  changePhone,\n  changeCountry,\n  changeCity,\n  changeMaxDist,\n  changeLookFor,\n  changeSearchAgeRange,\n  changeTags,\n  changeEmailValid,\n  changeUsernameValid,\n  changeNameValid,\n  changeSurnameValid,\n  changeBioValid,\n  changePhoneValid,\n  changeCountryValid,\n  changeCityValid,\n  updateInfo,\n} from \"../../pages/AdditionalInfo/additionalSlice\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport DialogMessage from \"../../components/DialogMessage/DialogMessage\";\nimport { Switch, Route, useHistory } from \"react-router-dom\";\nimport { setHeader, showBackButton, setParent } from \"../../store/UISlice\";\nimport UpdatePassword from \"../../components/UpdatePassword/UpdatePassword\";\nimport UpdatePersonalInfo from \"../../components/UpdatePersonalInfo/UpdatePersonalInfo\";\n\nconst UpdateInfo = () => {\n  const {\n    id,\n    email,\n    username,\n    name,\n    surname,\n    birthDate,\n    bio,\n    phone,\n    gender,\n    country,\n    city,\n    maxDist,\n    lookFor,\n    minAge,\n    maxAge,\n    usernameValid,\n    nameValid,\n    surnameValid,\n    emailValid,\n    phoneValid,\n    countryValid,\n    cityValid,\n    tags,\n  } = useSelector((state) => state.additional);\n  const dispatch = useDispatch();\n  const showNotif = useNotifications();\n  const history = useHistory();\n\n  const [formValid, setFormValid] = useState(true);\n\n  useEffect(() => {\n    const formValid =\n      usernameValid &&\n      nameValid &&\n      surnameValid &&\n      emailValid &&\n      phoneValid &&\n      countryValid &&\n      cityValid;\n    setFormValid(formValid);\n  }, [\n    usernameValid,\n    nameValid,\n    surnameValid,\n    emailValid,\n    phoneValid,\n    countryValid,\n    cityValid,\n  ]);\n\n  const saveUserInfo = async (e) => {\n    e.preventDefault();\n    const body = {\n      id,\n      email,\n      username,\n      name,\n      surname,\n      bio,\n      birthDate,\n      phone,\n      gender,\n      country,\n      city,\n      maxDist,\n      lookFor,\n      minAge,\n      maxAge,\n      tags,\n    };\n    dispatch(updateInfo(body, showNotif));\n  };\n\n  const updatePersonalInfo = () => {\n    dispatch(setParent({ parent: \"profile\" }));\n    dispatch(setHeader({ header: \"Update personal info\" }));\n    dispatch(showBackButton());\n    history.push(\"/profile/personal\");\n  };\n\n  const inputs = [\n    {\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n      value: username,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeUsername(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeUsernameValid(isValid));\n      },\n      rules: {\n        helperText:\n          \"Use letters, numbers or symbols ., %, _, -, +. Min length 3\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: /^[\\w%-+.]+$/,\n        },\n      },\n    },\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeEmail(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeEmailValid(isValid));\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n    {\n      name: \"name\",\n      type: \"text\",\n      label: \"First name\",\n      value: name,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeName(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeNameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"surname\",\n      type: \"text\",\n      label: \"Last name\",\n      value: surname,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeSurname(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeSurnameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"phone\",\n      type: \"text\",\n      label: \"Phone\",\n      value: phone,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changePhone(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changePhoneValid(isValid));\n      },\n      rules: {\n        helperText: \"invalid phone\",\n        rule: {\n          minLength: 0,\n          maxLength: 12,\n          regex: /^$|^\\+?\\d+$/,\n        },\n      },\n    },\n    {\n      name: \"birthDate\",\n      type: \"date\",\n      label: \"Birth date\",\n      value: birthDate,\n      onChange: (e) => {\n        dispatch(changeBirthDate(e.target.value));\n      },\n    },\n    {\n      name: \"gender\",\n      type: \"select\",\n      label: \"I'm\",\n      values: [\"male\", \"female\"],\n      value: gender,\n      onChange: (e) => {\n        dispatch(changeGender(e.target.value));\n      },\n    },\n    {\n      name: \"lookFor\",\n      type: \"select\",\n      label: \"I look for\",\n      values: [\"male\", \"female\", \"both\"],\n      value: lookFor,\n      onChange: (e) => {\n        dispatch(changeLookFor(e.target.value));\n      },\n    },\n    {\n      name: \"country\",\n      type: \"text\",\n      label: \"Country\",\n      value: country,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeCountry(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCountryValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"city\",\n      type: \"text\",\n      label: \"City\",\n      value: city,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeCity(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCityValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"maxDist\",\n      type: \"slider\",\n      label: \"Search distance\",\n      value: maxDist,\n      onChange: (value) => {\n        dispatch(changeMaxDist(value));\n      },\n    },\n    {\n      name: \"ageRange\",\n      type: \"slider\",\n      label: \"Age search range\",\n      value: [minAge, maxAge],\n      onChange: (value) => {\n        dispatch(changeSearchAgeRange(value));\n      },\n    },\n    // {\n    //   name: \"password\",\n    //   type: \"password\",\n    //   label: \"Password\",\n    //   value: password,\n    //   ignoreUntouched: true,\n    //   onChange: (e) => {\n    //     setPassword(e.target.value);\n    //   },\n    //   onValidate: (isValid) => {\n    //     setPasswordValid(isValid);\n    //   },\n    //   rules: {\n    //     helperText:\n    //       \"Use at least one lower- and uppercase letter, number and symbol. Min length 4\",\n    //     rule: {\n    //       minLength: 0,\n    //       maxLength: 20,\n    //       regex: /^$|^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/,\n    //     },\n    //   },\n    // },\n    {\n      name: \"bio\",\n      type: \"text\",\n      label: \"Bio\",\n      value: bio,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeBio(e.target.value));\n      },\n      onValidate: (isValid) => {\n        changeBioValid(isValid);\n      },\n      rules: {\n        helperText: \"Write some info about yourself\",\n        rule: {\n          minLength: 2,\n          maxLength: 256,\n          regex: /^.+$/,\n        },\n      },\n    },\n    {\n      type: \"autocomplete\",\n      values: [],\n      onChange: (values) => dispatch(changeTags(values)),\n    },\n  ];\n\n  const buttons = [\n    {\n      component: \"fab\",\n      type: \"submit\",\n      text: \"Save\",\n      size: \"large\",\n      disabled: !formValid,\n      onClick: saveUserInfo,\n    },\n    {\n      component: \"button\",\n      text: \"update personal info\",\n      size: \"large\",\n      onClick: updatePersonalInfo,\n    },\n  ];\n\n  const dialog = {\n    text:\n      \"This action is irreversable. All your images, chats and likes will be vanished.\",\n    header: \"Are you sure?\",\n    yesText: \"Agree\",\n    noText: \"Disagree\",\n    buttonText: \"Delete account\",\n  };\n\n  return (\n    <>\n      <Switch>\n        <Route path=\"/profile\" exact>\n          <Form inputs={inputs} buttons={buttons} />\n          <DialogMessage {...dialog} />\n        </Route>\n        <Route path=\"/profile/personal\" component={UpdatePersonalInfo} />\n        <Route path=\"/profile/password-update\" component={UpdatePassword} />\n      </Switch>\n    </>\n  );\n};\n\nexport default UpdateInfo;\n","import {\n  Card,\n  CardMedia,\n  Grid,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { media } from \"../../axios\";\nimport { saveNewState } from \"../../store/generalSlice\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\n\nconst useStyles = makeStyles({\n  Card: {\n    position: \"relative\",\n    \"&:hover\": {\n      \"& $Media\": {\n        transform: \"scale(1.2)\",\n      },\n      \"& $Info\": {\n        transform: \"translateY(-1.5rem)\",\n      },\n    },\n  },\n  Media: {\n    paddingTop: \"100%\",\n  },\n  Grid: {\n    marginTop: \"10px\",\n  },\n  Info: {\n    position: \"absolute\",\n    transform: \"translateY(2rem)\",\n    width: \"100%\",\n    textAlign: \"center\",\n    color: \"#fafafa\",\n    background: \"linear-gradient(#00000000, #000000aa)\",\n  },\n});\n\nconst Gallery = (props) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  let images = useSelector((state) => state.general.images);\n  if (props.images) images = props.images;\n  console.log(images);\n\n  const setAvatar = async (image) => {\n    // let avatar changing only when Gallery is rendered with images from general redux slice\n    if (props.images) return;\n    console.log(image);\n    const res = await media.put(\"avatar\", { imageId: image.id });\n    dispatch(saveNewState({ avatar: image }));\n    console.log(res);\n  };\n\n  return (\n    <Grid className={classes.Grid} container justify=\"center\" spacing={1}>\n      {images.length > 0 &&\n        images.map((el) => (\n          <Grid item xs={8} sm={4} key={el.id || el}>\n            <Card className={classes.Card}>\n              <CardMedia\n                onClick={() => setAvatar(el)}\n                className={classes.Media}\n                image={el.image || defaultAvatar}\n              />\n              {/* {!props.images && (\n                <Typography className={classes.Info}>Set avatar</Typography>\n              )} */}\n            </Card>\n          </Grid>\n        ))}\n    </Grid>\n  );\n};\n\nexport default Gallery;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { CancelToken, api } from \"../axios\";\nimport { addAge, loadImages, prepareUsers } from \"../utils\";\nimport { resetGeneralState } from \"./generalSlice\";\nimport { resetUIState } from \"./UISlice\";\n\nconst initialUsersState = {\n  isLoading: false,\n  error: null,\n  users: [],\n  strangers: [],\n};\n\nconst loadedIds = new Set();\n\nconst usersSlice = createSlice({\n  name: \"users\",\n  initialState: initialUsersState,\n  reducers: {\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    successLoading(state) {\n      state.isLoading = false;\n    },\n    /**\n     * Adds all users, filters already added users by id\n     * @param {State} state\n     * @param {action} {payload} - users to add\n     */\n    addUsers(state, { payload }) {\n      const users = [...payload];\n      if (!users.length) return;\n      users.forEach((user) => {\n        if (\n          Object.keys(user).length !== 0 &&\n          !state.users.find((el) => el.id === user.id)\n        ) {\n          state.users.push(user);\n        }\n      });\n    },\n    /**\n     * Run through all passed users and updates their info or addes new\n     * @param {State} state\n     * @param {action} {payload} - users to update\n     */\n    updateUsers(state, { payload }) {\n      const users = [...payload];\n      if (!users.length) return;\n      users.forEach((user) => {\n        const userInState = state.users.find((el) => user.id === el.id);\n        if (userInState) {\n          Object.keys(userInState).forEach(\n            (key) => (userInState[key] = user[key])\n          );\n        } else {\n          state.users.push(user);\n        }\n      });\n    },\n    sortStrangers(state, { payload }) {\n      const { compareFunction } = { ...payload };\n      state.strangers.sort(compareFunction);\n    },\n    setUsers(state, { payload }) {\n      state.users = payload;\n    },\n    setStrangers(state, { payload }) {\n      state.strangers = [...payload];\n    },\n    failLoading(state, { payload }) {\n      state.isLoading = false;\n      state.error = payload;\n    },\n    resetError(state) {\n      state.error = null;\n    },\n    resetUsersState: () => initialUsersState,\n  },\n});\n\nconst source = CancelToken.source();\n\nconst getUserIds = (users) => users.map((user) => user.id);\n\nconst getStrangers = async (showNotif) => {\n  try {\n    const res = await api.get(\"strangers\", { cancelToken: source.token });\n    if (res.data.status) {\n      // console.log(\"[userSlice] starngers\", res.data.data);\n      return res.data.data;\n    } else {\n      showNotif(res.data.data, \"error\");\n      if (res.data.data === \"incorrect session id\") {\n        return null;\n      }\n    }\n  } catch (e) {\n    showNotif(\"Server error\", \"error\");\n    console.log(e);\n  }\n  return [];\n};\n\n/**\n * Returns array of users not yet stored in redux\n * @param {Array<user>} users all users for loading\n */\nconst getUncashedUsers = (users) => {\n  if (loadedIds.length === 0) return users;\n  const uncashed = users.filter((user) => !loadedIds.has(user.id));\n  // console.log(uncashed);\n  return uncashed;\n};\n\n/**\n * Loads all strangers and saves to store\n * @param {function} showNotif cunsom hook to show notification\n */\nexport const loadStrangers = (showNotif) => async (dispatch, getState) => {\n  dispatch(startLoading());\n  let strangers = await getStrangers(showNotif);\n  if (!strangers) {\n    dispatch(resetGeneralState());\n    dispatch(resetUsersState());\n    dispatch(resetUIState());\n    return;\n  }\n  strangers = strangers.map((stranger) => addAge(stranger));\n  // console.log(strangers);\n  dispatch(setStrangers(strangers));\n  dispatch(addUsers(strangers));\n  // console.log(strangers);\n\n  // load unly those, who was not loaded before\n  const uncashed = getUncashedUsers(strangers);\n  let preparedUsers = await Promise.all(prepareUsers(uncashed));\n  // console.log(preparedUsers);\n  dispatch(updateUsers(preparedUsers));\n\n  // map fetched strangers to those we've already prepared\n  const allUsers = getState().users.users;\n  // console.log(allUsers);\n  const preparedStrangers = strangers\n    .map((user) => allUsers.find((u) => u.id === user.id))\n    .filter((el) => el !== null);\n  // console.log(preparedStrangers);\n  loadedIds.add(getUserIds(preparedStrangers));\n  // console.log(loadedIds);\n  dispatch(setStrangers(preparedStrangers));\n\n  dispatch(successLoading());\n};\n\n/**\n * Recieves Set of strings, loads only uncashed ones\n * @param {Set<string>} users\n */\nexport const loadUsers = (users) => async (dispatch, getState) => {\n  if (!users) return;\n  const notYetLoaded = [...users].filter((id) => !loadedIds.has(id));\n  // console.log(notYetLoaded);\n\n  try {\n    const promises = notYetLoaded.map((el) => api(`/data/${el}`));\n    let resolvedPromises = await Promise.allSettled(promises);\n    // console.log(resolvedPromises);\n    const userPromises = resolvedPromises\n      .filter((el) => el.status === \"fulfilled\")\n      .filter((el) => el.value.data.status)\n      .map(async (el) => await loadImages(el.value.data.data));\n    const loadedUsers = await Promise.all(userPromises);\n    // console.log(loadedUsers);\n    const preparedUsers = loadedUsers.map((user) => user && addAge(user));\n    // console.log(\"loadedUsers\", loadedUsers);\n    loadedIds.add(getUserIds(preparedUsers));\n    // console.log(loadedIds);\n    dispatch(addUsers(preparedUsers));\n  } catch (e) {\n    console.log(e);\n    throw new Error(\"Fetching users failed\");\n  }\n};\n\nexport const {\n  startLoading,\n  successLoading,\n  addUsers,\n  setUsers,\n  updateUsers,\n  sortStrangers,\n  setStrangers,\n  failLoading,\n  resetError,\n  resetUsersState,\n} = usersSlice.actions;\n\nexport default usersSlice.reducer;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { api } from \"../axios\";\nimport { loadUsers, setStrangers } from \"../store/usersSlice\";\n\nexport const banUser = async (id) => {\n  try {\n    const res = await api.post(\"ban\", { id });\n    return res.data.status;\n  } catch (e) {}\n};\n\nexport const unbanUser = async (id) => {\n  try {\n    const res = await api.delete(`ban/${id}`);\n    return res.data.status;\n  } catch (e) {}\n};\n\nexport const useBan = () => {\n  const [banned, setBanned] = useState([]);\n  const dispatch = useDispatch();\n  const strangers = useSelector((state) => state.users.strangers);\n\n  const loadBanned = () => async () => {\n    try {\n      const res = await api(\"ban\");\n      if (res.data.status) {\n        const data = res.data.data || [];\n        dispatch(loadUsers(data));\n        setBanned(data);\n      }\n    } catch (e) {}\n  };\n\n  useEffect(() => {\n    loadBanned();\n  }, []);\n\n  const banAndUpdate = useCallback(\n    () => async (userId) => {\n      await banUser(userId);\n      const filteredStrangers = strangers.filter((user) => user.id !== userId);\n      dispatch(setStrangers(filteredStrangers));\n      const updatedBanned = [...banned, userId];\n      setBanned(updatedBanned);\n    },\n    [strangers, banned, dispatch]\n  );\n\n  const unbanAndUpdate = useCallback(\n    () => async (userId) => {\n      const res = await unbanUser(userId);\n      if (banned.length && res) {\n        const updatedBanned = banned.filter((id) => id !== userId);\n        setBanned(updatedBanned);\n      }\n    },\n    [banned]\n  );\n\n  return { banned, loadBanned, banAndUpdate, unbanAndUpdate };\n};\n","import { makeStyles, Typography, Grid, Avatar } from \"@material-ui/core\";\nimport React from \"react\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\n\nconst useStyles = makeStyles({\n  Avatar: {\n    marginRight: \"1rem\",\n  },\n  Text: {\n    fontFamily: \"Righteous\",\n    fontSize: \"1.5rem\",\n  },\n});\n\nconst ProfileListItem = ({ user }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container alignItems=\"center\">\n      <Avatar\n        className={classes.Avatar}\n        src={user?.avatar?.image || user?.images[0]?.image || defaultAvatar}\n      />\n      <Typography className={classes.Text}>{user.username}</Typography>\n    </Grid>\n  );\n};\n\nexport default ProfileListItem;\n","import {\n  Button,\n  makeStyles,\n  MenuItem,\n  MenuList,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { forwardRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { setCompanion, setParent } from \"../../store/UISlice\";\nimport { borderRadius } from \"../../theme\";\nimport ProfileListItem from \"../ProfileListItem/ProfileListItem\";\n\nconst useStyles = makeStyles({\n  Button: {\n    padding: \"7px 30px\",\n  },\n  Menu: {\n    width: \"100%\",\n  },\n  ListItem: {\n    borderRadius: borderRadius,\n  },\n});\n\nconst ClickableUsersList = (\n  { users, autoFocusItem, defaultText, setOpen, action },\n  ref\n) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n\n  function handleListKeyDown(event) {\n    if (event.key === \"Tab\") {\n      event.preventDefault();\n      if (setOpen) setOpen(false);\n    }\n  }\n\n  const handleItemClick = (id) => {\n    if (!users.length) return;\n    const user = users.find((el) => el.id === id);\n    const parent = location.pathname.split(\"/\")[1];\n    dispatch(setParent({ parent }));\n    dispatch(setCompanion({ companion: user }));\n    history.push(`/strangers/${id}`);\n    if (setOpen) setOpen(false);\n  };\n\n  const handleActionClick = (e, id) => {\n    e.stopPropagation();\n    action.onClick(id);\n  };\n\n  return (\n    <MenuList\n      className={classes.Menu}\n      ref={ref}\n      autoFocusItem={autoFocusItem}\n      id=\"users-list\"\n      onKeyDown={handleListKeyDown}\n    >\n      {users.length > 0 ? (\n        users.map((el) => (\n          <MenuItem\n            className={classes.ListItem}\n            onClick={() => handleItemClick(el.id)}\n            key={el.id}\n          >\n            <ProfileListItem user={el} />\n            {action && (\n              <Button\n                className={classes.Button}\n                color={action.color}\n                endIcon={action.icon}\n                onClick={(e) => handleActionClick(e, el.id)}\n              >\n                unban user\n              </Button>\n            )}\n          </MenuItem>\n        ))\n      ) : (\n        <Typography>{defaultText}</Typography>\n      )}\n    </MenuList>\n  );\n};\n\nexport default forwardRef(ClickableUsersList);\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nimport { Grid } from \"@material-ui/core\";\nimport { ReplayRounded } from \"@material-ui/icons\";\n\nimport { useBan } from \"../../hooks/useBan.hook\";\nimport ClickableUsersList from \"../ClickableUsersList/ClickableUsersList\";\n\nconst Banned = () => {\n  const { banned, unbanAndUpdate } = useBan();\n  const users = useSelector((state) => state.users.users);\n  const [bannedList, setBannedList] = useState(null);\n  const bannedUsers = useMemo(\n    () => banned.map((id) => users.find((user) => user.id === id)),\n    [banned, users]\n  );\n\n  useEffect(() => {\n    // console.log(banned);\n    // console.log(users);\n    if (!banned || !users.length) return;\n\n    // console.log(bannedUsers);\n    const unbanAction = {\n      icon: <ReplayRounded />,\n      color: \"secondary\",\n      onClick: unbanAndUpdate,\n    };\n    const list = (\n      <ClickableUsersList\n        users={bannedUsers}\n        defaultText={\"No users banned. Yet...\"}\n        action={unbanAction}\n      />\n    );\n    setBannedList(list);\n  }, [users, banned, bannedUsers, unbanAndUpdate]);\n\n  return <Grid container>{bannedList}</Grid>;\n};\n\nexport default Banned;\n","import { Tabs, Tab, Grid, makeStyles } from \"@material-ui/core\";\nimport React, { createContext, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport TabPanel from \"../../containers/TabPanel/TabPanel\";\nimport AvatarContainer from \"../../components/Avatar/AvatarContainer\";\nimport { backgroundColor, borderRadius, primaryColor } from \"../../theme\";\nimport UpdateInfo from \"../../containers/UpdateInfo/UpdateInfo\";\nimport Gallery from \"../../components/Gallery/Gallery\";\nimport Banned from \"../../components/Banned/Banned\";\n\nconst useStyles = makeStyles({\n  indicator: {\n    backgroundColor: \"#ffffff00\",\n    border: `1px solid ${primaryColor.dark}`,\n    bottom: 0,\n    height: \"100%\",\n    borderRadius: borderRadius,\n  },\n  TabPanel: {\n    backgroundColor: backgroundColor.foreground,\n    borderRadius: borderRadius,\n    padding: \"5px\",\n  },\n  Profile: {\n    minHeight: \"100vh\",\n    padding: \"30px\",\n    paddingBlockEnd: \"60px\",\n  },\n});\n\nconst buttons = [\n  {\n    id: 0,\n    text: \"Info\",\n    component: <UpdateInfo />,\n  },\n  {\n    id: 1,\n    text: \"Gallery\",\n    component: <Gallery />,\n  },\n  {\n    id: 2,\n    text: \"Banned\",\n    component: <Banned />,\n  },\n];\nexport const TabContext = createContext(buttons[0].id);\n\nconst Profile = () => {\n  const classes = useStyles();\n  const [currentTab, setCurrentTab] = useState(0);\n\n  const selectTabHandler = (e, next) => {\n    setCurrentTab(next);\n  };\n\n  const tabs = buttons.map((el, index) => (\n    <Tab disableRipple label={el.text} key={index} />\n  ));\n\n  const getPanel = (index) => (\n    <TabPanel\n      value={currentTab}\n      index={buttons[currentTab].id}\n      key={buttons[currentTab].id}\n    >\n      {buttons[currentTab].component}\n    </TabPanel>\n  );\n\n  return (\n    <Grid\n      container\n      wrap=\"nowrap\"\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      className={classes.Profile}\n    >\n      <TabContext.Provider value={currentTab}>\n        <AvatarContainer />\n        <Tabs\n          classes={{ root: classes.TabPanel, indicator: classes.indicator }}\n          value={currentTab}\n          onChange={selectTabHandler}\n        >\n          {tabs}\n        </Tabs>\n        {getPanel()}\n      </TabContext.Provider>\n    </Grid>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  id: state.general.id,\n  images: state.general.images,\n});\n\nexport default connect(mapStateToProps)(Profile);\n","import React, { useContext } from \"react\";\nimport {\n  Button,\n  Fab,\n  List,\n  ListItem,\n  makeStyles,\n  useTheme,\n  Zoom,\n} from \"@material-ui/core\";\nimport Input from \"../Input/Input\";\nimport { TabContext } from \"../../pages/Profile/Profile\";\n\nconst useStyles = makeStyles({\n  Form: {\n    width: \"100%\",\n  },\n  Button: {\n    margin: \"8px\",\n  },\n  List: {\n    width: \"100%\",\n  },\n  Buttons: {\n    width: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  Fab: {\n    position: \"fixed\",\n    right: \"10vw\",\n    bottom: \"4rem\",\n  },\n});\n\nconst Form = ({ inputs, buttons }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const currentTab = useContext(TabContext);\n\n  const transitionDuration = {\n    enter: theme.transitions.duration.enteringScreen,\n    exit: theme.transitions.duration.leavingScreen,\n  };\n\n  return (\n    <form className={classes.Form}>\n      <List className={classes.List}>\n        {inputs.map((el) => (\n          <ListItem key={el.name || el.type}>\n            <Input {...el} />\n          </ListItem>\n        ))}\n        {buttons && (\n          <ListItem className={classes.Buttons}>\n            {buttons.map(\n              ({ component, variant, type, text, onClick, ...others }) =>\n                component === \"fab\" ? (\n                  <Zoom\n                    key={text}\n                    in={currentTab === 0}\n                    timeout={transitionDuration}\n                    style={{\n                      transitionDelay: `${\n                        currentTab === 0 ? transitionDuration.exit : 0\n                      }ms`,\n                    }}\n                    unmountOnExit\n                  >\n                    <Fab\n                      color=\"primary\"\n                      key={text}\n                      className={classes.Fab}\n                      variant={variant}\n                      type={type}\n                      onClick={onClick}\n                      {...others}\n                    >\n                      {text}\n                    </Fab>\n                  </Zoom>\n                ) : (\n                  <Button\n                    key={text}\n                    className={classes.Button}\n                    variant={variant}\n                    type={type}\n                    onClick={onClick}\n                    {...others}\n                  >\n                    {text}\n                  </Button>\n                )\n            )}\n          </ListItem>\n        )}\n      </List>\n    </form>\n  );\n};\n\nexport default Form;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { CircularProgress, Grid, Button } from \"@material-ui/core\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport {\n  changeEmail,\n  changeEmailValid,\n  changePassword,\n  changePasswordValid,\n} from \"./loginSlice\";\nimport { auth } from \"../../store/generalSlice\";\nimport Form from \"../../components/Form/Form\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\n\nconst Login = () => {\n  const showNotif = useNotifications();\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { email, password, emailValid, passwordValid } = useSelector(\n    (state) => state.login\n  );\n  const { isLoading } = useSelector((state) => state.general);\n  const [formValid, setFormValid] = useState(true);\n\n  useEffect(() => {\n    const formValid = emailValid && passwordValid;\n    setFormValid(formValid);\n  }, [emailValid, passwordValid]);\n\n  const onRegisterHandler = () => {\n    history.push(\"register\");\n  };\n\n  const onLoginHandler = async (e) => {\n    e.preventDefault();\n    dispatch(auth(email, password, showNotif));\n  };\n\n  const inputs = [\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      onValidate: (isValid) => {\n        dispatch(changeEmailValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeEmail(e.target.value));\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n    {\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\",\n      value: password,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changePasswordValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changePassword(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use at least one lower- and uppercase letter, number and symbol. Min length 4\",\n        rule: {\n          minLength: 4,\n          maxLength: 20,\n          regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/,\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      variant: \"contained\",\n      type: \"submit\",\n      text: \"Sign in\",\n      disabled: !formValid,\n      onClick: (e) => {\n        onLoginHandler(e);\n      },\n    },\n    {\n      text: \"Not yet with us?\",\n      onClick: onRegisterHandler,\n    },\n  ];\n\n  const handleForgot = () => {\n    history.push(\"/forgot\");\n  };\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      direction=\"column\"\n      className={classes.SingleForm}\n    >\n      {isLoading ? (\n        <CircularProgress />\n      ) : (\n        <>\n          <Form inputs={inputs} buttons={buttons} />\n          <Button\n            variant=\"text\"\n            color=\"primary\"\n            classes={{ label: classes.label }}\n            onClick={handleForgot}\n          >\n            Forgot password?\n          </Button>\n        </>\n      )}\n    </Grid>\n  );\n};\n\nexport default Login;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Grid, CircularProgress } from \"@material-ui/core\";\nimport {\n  changeEmail,\n  changeUsername,\n  changePassword,\n  changeConfirmPassword,\n  changeEmailValid,\n  changeUsernameValid,\n  changePasswordValid,\n  changeConfirmValid,\n  register,\n} from \"./registerSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../components/Form/Form\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\n\nconst Register = () => {\n  const showNotif = useNotifications();\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const history = useHistory();\n  const {\n    email,\n    username,\n    password,\n    confirm,\n\n    emailValid,\n    usernameValid,\n    passwordValid,\n    confirmValid,\n  } = useSelector((state) => state.register);\n  const [formValid, setFormValid] = useState(false);\n  const { isLoading } = useSelector((state) => state.general);\n\n  const onLoginHandler = () => {\n    history.push(\"/login\");\n  };\n\n  useEffect(() => {\n    const formValid =\n      emailValid && usernameValid && passwordValid && confirmValid;\n    setFormValid(formValid);\n  }, [emailValid, usernameValid, passwordValid, confirmValid]);\n\n  const onRegisterHandler = async (e) => {\n    e.preventDefault();\n    dispatch(register(username, email, password, showNotif, history));\n  };\n\n  const inputs = [\n    {\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n      value: username,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeUsernameValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeUsername(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use letters, numbers or symbols ., %, _, -, +. Min length 3\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: /^[\\w%-+.]+$/,\n        },\n      },\n    },\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeEmailValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeEmail(e.target.value));\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n    {\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\",\n      value: password,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changePasswordValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changePassword(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use at least one lower- and uppercase letter, number and symbol. Min length 4\",\n        rule: {\n          minLength: 4,\n          maxLength: 20,\n          regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/,\n        },\n      },\n    },\n    {\n      name: \"confirm\",\n      type: \"password\",\n      label: \"Confirm\",\n      value: confirm,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeConfirmValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeConfirmPassword(e.target.value));\n      },\n      rules: {\n        helperText: \"Confirm and password does not match\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: new RegExp(`^${password}$`),\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      variant: \"contained\",\n      type: \"submit\",\n      text: \"Sign up\",\n      disabled: !formValid,\n      onClick: (e) => {\n        onRegisterHandler(e);\n      },\n    },\n    {\n      text: \"Already a member?\",\n      onClick: onLoginHandler,\n    },\n  ];\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      direction=\"column\"\n      className={classes.SingleForm}\n    >\n      {isLoading ? (\n        <CircularProgress />\n      ) : (\n        <Form inputs={inputs} buttons={buttons} />\n      )}\n    </Grid>\n  );\n};\n\nexport default Register;\n","import React, { useState, memo } from \"react\";\nimport {\n  Card,\n  CardMedia,\n  Grid,\n  makeStyles,\n  MobileStepper,\n  Button,\n  Container,\n  CardContent,\n  Typography,\n  Fab,\n} from \"@material-ui/core\";\nimport {\n  FavoriteOutlined,\n  RemoveCircleOutlineRounded,\n  ChevronLeftRounded,\n  ChevronRightRounded,\n} from \"@material-ui/icons\";\nimport defaultImage from \"../../Images/default-avatar.png\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport {\n  sendVisit,\n  sendLike,\n  setCompanion,\n  setParent,\n} from \"../../store/UISlice\";\nimport { useBan } from \"../../hooks/useBan.hook\";\n\nconst useStyles = makeStyles({\n  UserCard: {\n    position: \"relative\",\n    overflow: \"hidden\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      \"& $Info\": {\n        transform: \"translateY(-80px)\",\n      },\n      \"& $Like\": {\n        opacity: 1,\n      },\n      \"& $Ban\": {\n        opacity: 1,\n      },\n    },\n  },\n  Info: {\n    width: \"105%\",\n    padding: \"10px 30px 20px\",\n    position: \"absolute\",\n    color: \"white\",\n    left: \"-10px\",\n    background: \"linear-gradient(#00000000, #000000aa)\",\n  },\n  InfoHeader: {\n    justifyContent: \"space-between\",\n    padding: 0,\n    \"& p\": {\n      fontSize: \"1.5rem\",\n    },\n  },\n  Tags: {\n    lineHeight: \"0.5rem\",\n    \"& span\": {\n      fontSize: \"1rem\",\n    },\n    \"& span:nth-child(n+2)::before\": {\n      content: '\"|\"',\n      margin: \"0 10px\",\n    },\n  },\n  Stepper: {\n    backgroundColor: \"#ffffff00\",\n    position: \"absolute\",\n    width: \"100%\",\n  },\n  StepperButton: {\n    backgroundColor: \"#ffffff00\",\n    textShadow: \"0,0,10,#00000055\",\n  },\n  CardMedia: {\n    height: 0,\n    paddingTop: \"100%\",\n  },\n  Like: {\n    position: \"absolute\",\n    bottom: \"10px\",\n    right: \"10px\",\n    transition: \"0.3s\",\n    opacity: 0,\n    zIndex: 3,\n  },\n  Ban: {\n    position: \"absolute\",\n    bottom: \"10px\",\n    right: \"70px\",\n    transition: \"0.3s\",\n    opacity: 0,\n    zIndex: 4,\n  },\n});\n\nconst UserCard = (props) => {\n  const classes = useStyles();\n  const [displayedImage, setDisplayedImage] = useState(0);\n  const { id, username, images, age } = { ...props.user };\n  const tags = props.user.tags || [\"No tags\"];\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { banAndUpdate } = useBan();\n\n  const showUserProfile = (e) => {\n    const parent = \"strangers\";\n    dispatch(setCompanion({ companion: props.user }));\n    dispatch(sendVisit(id));\n    dispatch(setParent({ parent }));\n    history.push(\"/strangers/\" + id);\n  };\n\n  const handleLike = (e) => {\n    e.stopPropagation();\n    dispatch(sendLike(id));\n  };\n\n  const handleBan = (e) => {\n    e.stopPropagation();\n    banAndUpdate(id);\n  };\n\n  const handleNextImage = (e) => {\n    e.stopPropagation();\n    setDisplayedImage((prev) => prev + 1);\n  };\n\n  const handlePrevImage = (e) => {\n    e.stopPropagation();\n    setDisplayedImage((prev) => prev - 1);\n  };\n\n  const LeftButtonDisabled =\n    images?.length === 0 || displayedImage === images?.length - 1 || true;\n  const RightButtonDisabled =\n    displayedImage === 0 || images?.length === 0 || true;\n\n  return (\n    <Grid item xs={12} sm={6} lg={4}>\n      <Card className={classes.UserCard} onClick={showUserProfile}>\n        <div>\n          {images && images.length > 1 && (\n            <MobileStepper\n              variant=\"dots\"\n              steps={0}\n              position=\"static\"\n              activeStep={displayedImage}\n              className={classes.Stepper}\n              nextButton={\n                LeftButtonDisabled ? null : (\n                  <Button\n                    className={classes.StepperButton}\n                    size=\"small\"\n                    onClick={handleNextImage}\n                  >\n                    <ChevronRightRounded />\n                  </Button>\n                )\n              }\n              backButton={\n                RightButtonDisabled ? null : (\n                  <Button\n                    className={classes.StepperButton}\n                    size=\"small\"\n                    onClick={handlePrevImage}\n                  >\n                    <ChevronLeftRounded />\n                  </Button>\n                )\n              }\n            />\n          )}\n\n          <Fab\n            color=\"secondary\"\n            className={classes.Like}\n            size=\"small\"\n            onClick={(e) => handleLike(e)}\n          >\n            <FavoriteOutlined />\n          </Fab>\n\n          <Fab\n            color=\"secondary\"\n            className={classes.Ban}\n            size=\"small\"\n            onClick={(e) => handleBan(e)}\n          >\n            <RemoveCircleOutlineRounded />\n          </Fab>\n\n          <CardMedia\n            className={classes.CardMedia}\n            image={\n              (images && images.length && images[displayedImage].image) ||\n              defaultImage\n            }\n          />\n\n          <CardContent className={classes.Info}>\n            <Container className={classes.InfoHeader}>\n              <Typography>\n                {username}, {age}\n              </Typography>\n            </Container>\n            <div className={classes.Tags}>\n              {tags.map((el) => (\n                <span key={el}>{el}</span>\n              ))}\n            </div>\n          </CardContent>\n        </div>\n      </Card>\n    </Grid>\n  );\n};\n\nexport default memo(UserCard);\n","import { Chip, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  Item: {\n    margin: \"0 5px\",\n  },\n  Header: {\n    fontSize: \"1.3rem\",\n    fontWeight: 500,\n    display: \"block\",\n  },\n  Container: {\n    width: \"100%\",\n    padding: \"0.5rem 0\",\n  },\n});\n\nconst Tags = ({ tags }) => {\n  const classes = useStyles();\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        className={classes.Container}\n        container\n        direction=\"column\"\n        alignItems=\"flex-start\"\n        item\n      >\n        <Typography className={classes.Header}>Interests:</Typography>\n        <Grid>\n          {tags ? (\n            tags.map((el) => (\n              <Chip\n                className={classes.Item}\n                variant=\"outlined\"\n                key={el}\n                label={el}\n              />\n            ))\n          ) : (\n            <Typography>No tags yet</Typography>\n          )}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Tags;\n","import { Card, CardMedia, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport defaultImage from \"../../Images/default-avatar.png\";\n\nconst useStyles = makeStyles({\n  Card: {\n    width: \"90%\",\n  },\n  Media: {\n    paddingTop: \"30%\",\n  },\n});\n\nconst ProfileHeader = ({ img }) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.Card}>\n      <CardMedia className={classes.Media} image={img || defaultImage} />\n    </Card>\n  );\n};\n\nexport default ProfileHeader;\n","import React from \"react\";\nimport { Chip, Grid, makeStyles, Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  Item: {\n    padding: \"10px 15px\",\n    width: \"100%\",\n  },\n  Header: {\n    fontSize: \"1.3rem\",\n    fontWeight: 500,\n    display: \"block\",\n  },\n  Container: {\n    width: \"100%\",\n    padding: \"0.5rem 0\",\n  },\n  fullWidth: {\n    width: \"100%\",\n  },\n});\n\nconst Bio = ({ bio }) => {\n  const classes = useStyles();\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        className={classes.Container}\n        container\n        direction=\"column\"\n        alignItems=\"flex-start\"\n        item\n      >\n        <Typography className={classes.Header}>Bio:</Typography>\n        <Grid className={classes.fullWidth}>\n          <Chip className={classes.Item} label={bio} variant=\"outlined\" />\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Bio;\n","import { v4 as uuid } from \"uuid/dist\";\n\nexport class WSmessage {\n  constructor({ messageType, payload }) {\n    this.messageType = messageType;\n    this.payload = payload || null;\n  }\n}\n\nexport const CONSTANTS = {\n  WS: {\n    NEW_CHAT: 100,\n    NEW_MESSAGE: 1,\n    EDIT_MESSAGE: 2,\n    DELETE_MESSAGE: 3,\n  },\n  MESSAGE: {\n    SENT_MESSAGE: 1,\n    DELIVERED_MESSAGE: 2,\n    READ_MESSAGE: 3,\n  },\n};\n\nexport class Chat {\n  constructor({ id, userIds, messages }) {\n    this.id = id || \"\";\n    this.userIds = userIds;\n    this.messages = messages || [];\n  }\n}\n\nexport class Message {\n  constructor({ id, sender, recipient, date, state, text, chatId }) {\n    this.id = id || uuid();\n    this.chatId = chatId || \"\";\n    this.sender = sender;\n    this.recipient = recipient;\n    this.date = date || new Date().getTime();\n    this.state = state || CONSTANTS.MESSAGE.SENT_MESSAGE;\n    this.text = text || \"no text\";\n  }\n}\n","import { getCookie } from \"../utils\";\nimport { useChat } from \"./useChat.hook\";\n\n// const host = \"192.168.43.151\";\nconst host = \"aim-love.ga\";\n// const host = \"localhost\";\n// const port = 8080;\nlet socket = null;\nconst queue = [];\n\nconst newConnection = () => {\n  const cookie = getCookie(\"session_id\");\n  // return new WebSocket(`ws://${host}:${port}/ws?key=${cookie}`);\n  return new WebSocket(`wss://${host}/ws?key=${cookie}`);\n};\n\nexport const checkStatusAndReconnect = () => {\n  if (!socket || socket.readyState !== socket.OPEN) {\n    socket = newConnection();\n  }\n};\n\nexport const useWS = () => {\n  const { handleChatMessage, getChatsInfo } = useChat();\n\n  socket = socket ? socket : newConnection();\n\n  socket.onopen = function (e) {\n    console.log(\"[open]  \");\n    getChatsInfo();\n    while (queue.length > 0) {\n      const message = queue.shift();\n      send(message);\n    }\n  };\n\n  socket.onmessage = function (event) {\n    const res = JSON.parse(event.data);\n    console.log(`[message]    :`, res);\n    if (res.messageType < 200) handleChatMessage(res);\n  };\n\n  socket.onclose = function (event) {\n    if (event.wasClean) {\n      console.log(\n        `[close]   , =${event.code} =${event.reason}`\n      );\n      socket = null;\n    } else {\n      // server killed the connection or user is offline (event.code 1006)\n      console.log(\"[close]  \");\n      console.log(event);\n      checkStatusAndReconnect();\n    }\n  };\n\n  socket.onerror = function (error) {\n    console.log(`[error] ${error.message}`);\n    checkStatusAndReconnect();\n  };\n\n  return socket;\n};\n\nexport const send = (message) => {\n  console.log(JSON.stringify(message));\n  if (!socket) socket = newConnection();\n  console.log(socket);\n\n  if (socket.readyState !== socket.OPEN) {\n    checkStatusAndReconnect();\n    // queue all messages\n    queue.push(message);\n    return;\n  }\n  socket.send(JSON.stringify(message));\n};\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { Chat, Message, WSmessage, CONSTANTS } from \"../models/ws\";\nimport { api } from \"../axios\";\nimport { send } from \"./useWS.hook\";\nimport {\n  setCompanion,\n  setHeader,\n  setParent,\n  showBackButton,\n} from \"../store/UISlice\";\nimport {\n  setChat,\n  setChats,\n  addChat,\n  updateMessage,\n  setDeleteMessage,\n} from \"../store/chatSlice\";\nimport { loadUsers } from \"../store/usersSlice\";\nimport { useNotifications } from \"./useNotifications\";\nimport { useLocation } from \"react-router-dom\";\n\nexport const useChat = () => {\n  const myId = useSelector((state) => state.general.id);\n  const users = useSelector((state) => state.users.users);\n  const companion = useSelector((state) => state.UI.companion);\n  const location = useLocation();\n  const { chats, chat } = useSelector((state) => state.chat);\n  const dispatch = useDispatch();\n  const notif = useNotifications();\n\n  /**\n   * Fetches and returns chat info\n   * @param {string} chatId\n   */\n  const getChatInfo = async (chatId) => {\n    try {\n      const chatInfo = await api(`chat/${chatId}`);\n      console.log(\"[getChatInfo]\", chatInfo.data);\n      return chatInfo.data;\n    } catch (e) {\n      console.log(e);\n      return null;\n    }\n  };\n\n  /**\n   * Creates chat\n   * @param {string} userId user id to chat with\n   */\n  const createChat = async (userId) => {\n    console.log(\"newChat\");\n    const chat = new Chat({ userIds: [userId, myId] });\n    try {\n      const res = await api.post(\"chat\", chat);\n      console.log(res.data);\n      if (res.data.status) {\n        const chatInfo = await getChatInfo(res.data.data);\n        if (chatInfo.status) {\n          dispatch(addChat(chatInfo.data));\n          dispatch(setChat(chatInfo.data));\n        }\n      }\n      return res.data.data;\n    } catch (e) {\n      console.log(e);\n      return null;\n    }\n  };\n\n  const loadRecipients = () => {\n    const userIds = chats.map((chat) => chat.userIds.find((id) => id !== myId));\n    dispatch(loadUsers(new Set(userIds)));\n  };\n\n  const readMessage = (message) => {\n    const readMessage = { ...message };\n    readMessage.state = CONSTANTS.MESSAGE.READ_MESSAGE;\n    console.log(readMessage);\n    send(\n      new WSmessage({\n        messageType: CONSTANTS.WS.EDIT_MESSAGE,\n        payload: readMessage,\n      })\n    );\n    dispatch(updateMessage(readMessage));\n  };\n\n  const showNotif = (message) => {\n    console.log(`[showNotif] location path: ${location.pathname}`);\n    const pathMatch = location.pathname.match(message.chatId);\n    console.log(pathMatch);\n    if (pathMatch && pathMatch[0] !== \"\") return;\n    const user =\n      message.sender !== myId\n        ? users.find((user) => user.id === message.sender)\n        : null;\n    const username = user ? `${user.username}` : \"Anonim\";\n    console.log(`[showNotif] username: ${username}`);\n    if (username) {\n      notif(`${username}: ${message.text}`);\n    }\n  };\n\n  const handleChatMessage = async (res) => {\n    console.log(\"[handleChatMessage]\", res);\n    if (res.messageType === CONSTANTS.WS.NEW_CHAT) {\n      const chatID = res.payload.id;\n      const chatData = await getChatInfo(chatID);\n      if (chatData.status) dispatch(addChat(chatData.data));\n      const exists = chats.find((chat) => chatID === chat.id);\n      console.log(\"[handleChatMessage]\", \"chatID\", \"chatData\", \"exists\");\n      console.log(chatID, chatData, exists);\n      if (!exists) {\n        // should never happen\n        console.log(\n          \"chat not found. actually this should never be visible\",\n          chats\n        );\n      }\n    } else if (res.messageType === CONSTANTS.WS.NEW_MESSAGE) {\n      // show new message\n      console.log(\"[handleChatMessage] new message\");\n      showNotif(res.payload);\n      dispatch(updateMessage(res.payload));\n    } else if (res.messageType === CONSTANTS.WS.EDIT_MESSAGE) {\n      console.log(\"[handleChatMessage] edit message\");\n      showNotif(res.payload);\n      dispatch(updateMessage(res.payload));\n    } else if (res.messageType === CONSTANTS.WS.DELETE_MESSAGE) {\n      // find and delete message\n    }\n  };\n\n  const getChatsInfo = async () => {\n    console.log(\"[getChatsInfoWS]\", chats);\n    try {\n      const res = await api(\"chat\");\n      console.log(res.data);\n      if (res.data.status) {\n        loadRecipients(res.data.data);\n        dispatch(setChats(res.data.data));\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  /**\n   * Tries to find exsiting chat by its ID or recipient ID\n   * If failes - creates new chat\n   * @param {string} userId user to chat with\n   * @param {string} chatId if known\n   */\n  const selectChat = async (userId, chatId = null) => {\n    console.log(chats);\n    if (!chats || chats.length === 0) await getChatsInfo();\n    const selectedCompanion = companion || users.find((e) => e.id === userId);\n    if (!selectedCompanion) {\n      dispatch(loadUsers([userId]));\n    }\n    let selectedChat = chatId ? chats.find((chat) => chat.id === chatId) : null;\n    if (!selectedChat) {\n      selectedChat = chats.find((chat) =>\n        chat.userIds.find((id) => userId === id)\n      );\n    }\n    console.log(selectedCompanion);\n    console.log(selectedChat);\n    if (!selectedChat) {\n      createChat(userId);\n      return null;\n    } else {\n      dispatch(setChat(selectedChat));\n      dispatch(setCompanion({ companion: selectedCompanion }));\n      dispatch(setParent({ parent: \"chat\" }));\n      dispatch(setHeader({ header: selectedCompanion?.name || null }));\n      dispatch(showBackButton());\n      return selectedCompanion;\n    }\n  };\n\n  const newMessage = (recipient, text) => {\n    const message = new Message({\n      sender: myId,\n      recipient,\n      text,\n      chatId: chat,\n    });\n    const wsMessage = new WSmessage({\n      messageType: CONSTANTS.MESSAGE.SENT_MESSAGE,\n      payload: message,\n    });\n    dispatch(updateMessage(message));\n    send(wsMessage);\n  };\n\n  const editMessage = (id, recipient, text) => {\n    console.log(\"editMessage\");\n    const message = new Message({\n      sender: myId,\n      id,\n      recipient,\n      text,\n      chatId: chat,\n    });\n    const wsMessage = new WSmessage({\n      messageType: CONSTANTS.WS.EDIT_MESSAGE,\n      payload: message,\n    });\n    dispatch(updateMessage(message));\n    send(wsMessage);\n  };\n\n  const deleteMessage = (id, recipient, text) => {\n    console.log(\"deleteMessage\");\n    const message = new Message({\n      sender: myId,\n      id,\n      recipient,\n      text,\n      chatId: chat,\n    });\n    const wsMessage = new WSmessage({\n      messageType: CONSTANTS.WS.DELETE_MESSAGE,\n      payload: message,\n    });\n    dispatch(setDeleteMessage(message));\n    send(wsMessage);\n  };\n\n  return {\n    selectChat,\n    createChat,\n    newMessage,\n    editMessage,\n    deleteMessage,\n    getChatInfo,\n    getChatsInfo,\n    readMessage,\n    handleChatMessage,\n  };\n};\n","import React, { useEffect } from \"react\";\nimport { Divider, Fab, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useSelector } from \"react-redux\";\nimport Gallery from \"../../components/Gallery/Gallery\";\nimport Tags from \"../../components/Tags/Tags\";\nimport ProfileHeader from \"../../components/ProfileHeader/ProfileHeader\";\nimport Bio from \"../../components/Bio/Bio\";\nimport { useHistory } from \"react-router-dom\";\nimport { useChat } from \"../../hooks/useChat.hook\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\nimport { ChatRounded } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles({\n  Typography: {\n    fontSize: \"1.5rem\",\n  },\n  Name: {\n    fontSize: \"2rem\",\n  },\n  Location: {\n    fontSize: \"1rem\",\n  },\n  FullWidth: {\n    width: \"100%\",\n  },\n  Message: {\n    position: \"fixed\",\n    right: \"10vw\",\n    bottom: \"4rem\",\n  },\n  FabIcon: {\n    marginRight: \"10px\",\n  },\n});\n\nconst UserProfile = (props) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const user = useSelector((state) => state.UI.companion);\n  const { id, images, avatar, name, surname, country, city, age, bio, tags } = {\n    ...user,\n  };\n  const defaultBio = \"UFO flew here and dropped this message here\";\n  const { selectChat } = useChat();\n  const chat = useSelector((state) => state.chat.chat);\n\n  const handleChat = (e) => {\n    selectChat(id);\n  };\n\n  useEffect(() => {\n    console.log(\"UserProfile useEffect push to chat\");\n    if (!chat) return;\n    history.push(`/chat/${chat}`);\n  }, [chat, history]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.FullWidth}\n    >\n      <ProfileHeader img={avatar?.image || images[0]?.image || defaultAvatar} />\n\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        item\n        xs={12}\n        sm={8}\n        md={6}\n      >\n        <Typography className={classes.Name}>{`${name} ${surname}`}</Typography>\n        <Typography color=\"secondary\" className={classes.Location}>\n          {`${country}, ${city}`}\n        </Typography>\n        <Typography\n          className={classes.Typography}\n        >{`${age} years old`}</Typography>\n        <Divider className={classes.FullWidth} />\n        <Tags tags={tags} />\n        <Divider className={classes.FullWidth} />\n        <Bio bio={bio || defaultBio} />\n        <Gallery images={images} />\n        <Fab\n          variant=\"extended\"\n          color=\"primary\"\n          className={classes.Message}\n          onClick={handleChat}\n        >\n          <ChatRounded className={classes.FabIcon} />\n          Send message\n        </Fab>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default UserProfile;\n","import { Grid, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Input from \"../Input/Input\";\nimport { changeUsername, changeSearchAgeRange } from \"./filterSlice\";\n\nconst useStyles = makeStyles({\n  Inputs: {\n    width: \"100%\",\n    margin: \"10px 0\",\n  },\n});\n\nconst Filter = () => {\n  const classes = useStyles();\n  const { username, age } = { ...useSelector((state) => state.filter) };\n  const dispatch = useDispatch();\n\n  const inputs = [\n    {\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n      value: username,\n      onChange: (e) => {\n        dispatch(changeUsername(e.target.value));\n      },\n    },\n    {\n      name: \"AgeRange\",\n      type: \"doubleSelector\",\n      label: \"Age search range\",\n      value: age,\n      onChange: (value) => dispatch(changeSearchAgeRange(value)),\n    },\n  ];\n\n  return (\n    <>\n      {inputs.map(({ name, type, label, value, onChange }) => (\n        <Grid className={classes.Inputs} key={label} item xs={12}>\n          <Input\n            name={name}\n            type={type}\n            label={label}\n            value={value}\n            onChange={onChange}\n          />\n        </Grid>\n      ))}\n    </>\n  );\n};\n\nexport default Filter;\n","import {\n  Button,\n  ButtonGroup,\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  makeStyles,\n} from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { sortStrangers } from \"../../store/usersSlice\";\nimport { secondaryColor } from \"../../theme\";\n\nconst useStyles = makeStyles({\n  Wrapper: {\n    width: \"100%\",\n    margin: \"10px 0\",\n  },\n  Active: {\n    color: secondaryColor.light,\n    fontWeight: \"bold\",\n  },\n});\n\nconst Sort = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [isAsc, setIsAsc] = useState(true);\n  const [sortingParam, setSortingParam] = useState(null);\n\n  const sortByUsernameAsc = (userA, userB) => {\n    return userA.username.localeCompare(userB.username);\n  };\n  const sortByUsernameDesc = (userA, userB) => {\n    return userB.username.localeCompare(userA.username);\n  };\n  const sortByAgeAsc = (userA, userB) => {\n    return userA.age - userB.age;\n  };\n  const sortByAgeDesc = (userA, userB) => {\n    return userB.age - userA.age;\n  };\n  const sortByRatingAsc = (userA, userB) => {\n    return userA.rating - userB.rating;\n  };\n  const sortByRatingDesc = (userA, userB) => {\n    return userB.rating - userA.rating;\n  };\n  const compFn = useCallback(() => {\n    switch (sortingParam) {\n      case \"username\":\n        return isAsc ? sortByUsernameAsc : sortByUsernameDesc;\n      case \"age\":\n        return isAsc ? sortByAgeAsc : sortByAgeDesc;\n      case \"rating\":\n        return isAsc ? sortByRatingAsc : sortByRatingDesc;\n      default:\n        return;\n    }\n  }, [isAsc, sortingParam]);\n\n  useEffect(() => {\n    dispatch(sortStrangers({ compareFunction: compFn() }));\n  }, [isAsc, sortingParam, compFn, dispatch]);\n\n  return (\n    <Grid\n      container\n      justify=\"space-around\"\n      alignItems=\"center\"\n      className={classes.Wrapper}\n    >\n      <ButtonGroup variant=\"outlined\">\n        <Button\n          className={sortingParam === \"username\" && classes.Active}\n          onClick={() => setSortingParam(\"username\")}\n        >\n          username\n        </Button>\n        <Button\n          className={sortingParam === \"age\" && classes.Active}\n          onClick={() => setSortingParam(\"age\")}\n        >\n          age\n        </Button>\n        <Button\n          className={sortingParam === \"rating\" && classes.Active}\n          onClick={() => setSortingParam(\"rating\")}\n        >\n          rating\n        </Button>\n      </ButtonGroup>\n\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={isAsc}\n            onChange={() => setIsAsc((state) => !state)}\n            name=\"isAscending\"\n          />\n        }\n        label=\"Ascending order\"\n      />\n    </Grid>\n  );\n};\n\nexport default Sort;\n","import {\n  Button,\n  ButtonGroup,\n  Grid,\n  makeStyles,\n  Paper,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { ExpandLessRounded, ExpandMoreRounded } from \"@material-ui/icons\";\nimport Filter from \"../Filter/Filter\";\nimport Sort from \"../Sort/Sort\";\nimport { secondaryColor } from \"../../theme\";\n\nconst useStyles = makeStyles({\n  Wrapper: {\n    position: \"fixed\",\n    left: 0,\n    bottom: \"39px\",\n    zIndex: 6,\n  },\n  Paper: {\n    padding: \"10px\",\n    width: \"70vw\",\n  },\n  ButtonLabel: {\n    fontFamily: \"Righteous\",\n    fontSize: \"1.2rem\",\n    padding: \"0 15px\",\n  },\n  Active: {\n    boxShadow: `0 0 5px ${secondaryColor.light}`,\n  },\n});\n\nconst FilterSortWrapper = () => {\n  const [content, setContent] = useState(\"\");\n  const [show, setShow] = useState(false);\n  const classes = useStyles(content);\n\n  const handleShow = () => {\n    setShow((prev) => !prev);\n  };\n\n  const handleButtonPress = (button) => {\n    const triggerShow = content ? button === content || !show : true;\n    setContent(button);\n    triggerShow && handleShow();\n  };\n\n  return (\n    <Grid\n      className={classes.Wrapper}\n      container\n      item\n      xs={12}\n      justify=\"center\"\n      self=\"flex-end\"\n    >\n      <Paper className={classes.Paper}>\n        <Grid container direction=\"column\" alignItems=\"center\">\n          <Grid container item direction=\"column\" alignItems=\"center\">\n            {show && (content === \"filter\" ? <Filter /> : <Sort />)}\n          </Grid>\n          <Grid container justify=\"space-evenly\" alignItems=\"center\" item>\n            <ButtonGroup\n              variant=\"text\"\n              color=\"secondary\"\n              aria-label=\"text primary button group\"\n            >\n              <Button\n                className={show && content === \"filter\" && classes.Active}\n                classes={{ label: classes.ButtonLabel }}\n                onClick={() => handleButtonPress(\"filter\")}\n              >\n                Filter\n              </Button>\n              <Button\n                className={show && content === \"sort\" && classes.Active}\n                classes={{ label: classes.ButtonLabel }}\n                onClick={() => handleButtonPress(\"sort\")}\n              >\n                Sort\n              </Button>\n            </ButtonGroup>\n            <Button onClick={handleShow} size=\"small\" color=\"secondary\">\n              {show ? <ExpandMoreRounded /> : <ExpandLessRounded />}\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default FilterSortWrapper;\n","import React, { useEffect, useState } from \"react\";\nimport UserCard from \"../../components/UserCard/UserCard\";\nimport { Button, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { Route, Switch } from \"react-router-dom\";\nimport UserProfile from \"../../containers/UserProfile/UserProfile\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Filter from \"../../components/Filter/Filter\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { loadStrangers } from \"../../store/usersSlice\";\nimport FilterSortWrapper from \"../../components/FIlterSortWrapper/FilterSortWrapper\";\n\nconst useStyles = makeStyles({\n  Strangers: {\n    fontSize: \"2rem\",\n    paddingBottom: \"60px\",\n  },\n  CardContainer: {\n    paddingBottom: \"90px\",\n  },\n  Text: {\n    marginTop: \"1rem\",\n    width: \"100%\",\n    textAlign: \"center\",\n  },\n});\n\nconst Strangers = () => {\n  const showNotif = useNotifications();\n  const allUsers = useSelector((state) => state.users.users);\n  const strangers = useSelector((state) => state.users.strangers);\n  const filter = useSelector((state) => state.filter);\n  const [cards, setCards] = useState(null);\n  const [routes, setRoutes] = useState(null);\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  // load strangers on component mount\n  useEffect(() => {\n    dispatch(loadStrangers(showNotif));\n  }, [dispatch]);\n\n  // filter users and set cards\n  useEffect(() => {\n    let filteredUsers = strangers.filter(\n      (user) => user.age >= filter.age.minAge && user.age <= filter.age.maxAge\n    );\n    filteredUsers =\n      filter.username.length > 0\n        ? filteredUsers.filter((user) =>\n            user.username.toLowerCase().includes(filter.username.toLowerCase())\n          )\n        : filteredUsers;\n\n    const cards =\n      filteredUsers && filteredUsers.length ? (\n        filteredUsers.map((el) => <UserCard user={el} key={el.id} />)\n      ) : (\n        <Typography className={classes.Text}>No users to display</Typography>\n      );\n    setCards(cards);\n  }, [filter, classes.Text, strangers]);\n\n  useEffect(() => {\n    const routes =\n      allUsers &&\n      allUsers.map((el) => (\n        <Route\n          key={el.id}\n          path={`/strangers/:id`}\n          render={() => <UserProfile user={el} />}\n        />\n      ));\n    setRoutes(routes);\n  }, [allUsers]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.Strangers}\n    >\n      <Switch>\n        {routes}\n        <Route\n          path=\"/\"\n          exact\n          render={() => (\n            <Grid\n              className={classes.CardContainer}\n              container\n              item\n              xs={10}\n              spacing={3}\n            >\n              {cards}\n              <FilterSortWrapper />\n            </Grid>\n          )}\n        />\n      </Switch>\n    </Grid>\n  );\n};\n\nexport default Strangers;\n","import {\n  Badge,\n  Button,\n  Grid,\n  Typography,\n  makeStyles,\n  Popper,\n  Paper,\n  ClickAwayListener,\n  Fade,\n  AppBar,\n} from \"@material-ui/core\";\nimport { ChevronLeftRounded } from \"@material-ui/icons\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { handleBack } from \"../../store/UISlice\";\nimport { backgroundColor, primaryColor } from \"../../theme\";\nimport PropTypes from \"prop-types\";\nimport { loadUsers } from \"../../store/usersSlice\";\nimport ClickableUsersList from \"../ClickableUsersList/ClickableUsersList\";\nimport useScrollTrigger from \"@material-ui/core/useScrollTrigger\";\n\nfunction ElevationScroll({ children }) {\n  const trigger = useScrollTrigger({\n    disableHysteresis: true,\n    threshold: 0,\n  });\n\n  return React.cloneElement(children, {\n    elevation: trigger ? 4 : 0,\n  });\n}\n\nconst useStyles = makeStyles({\n  Appbar: {\n    paddingTop: \"10px\",\n    backgroundColor: backgroundColor.background,\n  },\n  Header: {\n    textAlign: \"center\",\n    fontFamily: \"Righteous\",\n    color: primaryColor.dark,\n    fontSize: \"2rem\",\n    textTransform: \"capitalize\",\n  },\n  Popper: {\n    zIndex: 5,\n    textAlign: \"center\",\n  },\n  PopperPaper: {\n    padding: \"1rem\",\n  },\n  Category: {\n    fontSize: \"1rem\",\n    fontWeight: 700,\n  },\n});\n\nconst Header = ({ header, notification }) => {\n  const classes = useStyles();\n  const allUsers = useSelector((state) => state.users.users);\n  const [users, setUsers] = useState([]);\n  const loc = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n  const anchorRef = useRef(null);\n\n  useEffect(() => {\n    dispatch(loadUsers(notification));\n  }, [dispatch, notification]);\n\n  useEffect(() => {\n    if (!notification) return;\n    const users = allUsers.filter((user) =>\n      [...notification].includes(user.id)\n    );\n    if (users) setUsers(users);\n  }, [allUsers, notification]);\n\n  const handleToggle = () => {\n    setOpen((prevOpen) => !prevOpen);\n  };\n\n  const handleBackButton = () => {\n    const parent = loc.pathname.split(\"/\")[1];\n    dispatch(handleBack(history, parent));\n  };\n\n  //show backbutton only if we're in submenu\n  const showBackButton = loc.pathname.split(\"/\").length > 2;\n\n  const handleClose = (event) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpen(false);\n  };\n\n  // return focus to the button when we transitioned from !open -> open\n  const prevOpen = useRef(open);\n  useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n\n  return (\n    <ElevationScroll>\n      <AppBar className={classes.Appbar}>\n        <Grid container justify=\"space-around\" alignItems=\"center\" item>\n          <Grid item xs={2}>\n            {showBackButton ? (\n              <Button variant=\"text\" color=\"inherit\" onClick={handleBackButton}>\n                <ChevronLeftRounded\n                  style={{ color: primaryColor.dark }}\n                  fontSize=\"large\"\n                />\n              </Button>\n            ) : null}\n          </Grid>\n          <Grid item xs={6}>\n            <Typography variant=\"h1\" className={classes.Header}>\n              {header}\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Button\n              ref={anchorRef}\n              variant=\"text\"\n              color=\"inherit\"\n              onClick={handleToggle}\n            >\n              <Badge\n                color=\"secondary\"\n                overlap=\"circle\"\n                variant=\"dot\"\n                badgeContent={notification || 0}\n              >\n                <NotificationsIcon\n                  style={{ color: primaryColor.dark }}\n                  fontSize=\"large\"\n                />\n              </Badge>\n            </Button>\n            <Popper\n              className={classes.Popper}\n              open={open}\n              anchorEl={anchorRef.current}\n              placement=\"left\"\n              transition\n              disablePortal\n            >\n              {({ TransitionProps }) => (\n                <Fade {...TransitionProps}>\n                  <Paper className={classes.PopperPaper}>\n                    <Typography className={classes.Category}>\n                      Visitors\n                    </Typography>\n                    <ClickAwayListener onClickAway={handleClose}>\n                      <ClickableUsersList\n                        users={users}\n                        autoFocusItem={open}\n                        setOpen={setOpen}\n                      />\n                    </ClickAwayListener>\n                  </Paper>\n                </Fade>\n              )}\n            </Popper>\n          </Grid>\n        </Grid>\n      </AppBar>\n    </ElevationScroll>\n  );\n};\n\nHeader.propTypes = {\n  header: PropTypes.string,\n  notification: PropTypes.oneOfType([\n    PropTypes.instanceOf(Set),\n    // PropTypes.shape({\n    //   id: PropTypes.string,\n    //   avatarImg: PropTypes.string,\n    //   username: PropTypes.string,\n    // }),\n    PropTypes.oneOf([null]),\n  ]),\n};\n\nexport default Header;\n","import {\n  Avatar,\n  Badge,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { borderRadius } from \"../../../theme\";\n\nconst useStyles = makeStyles({\n  List: {\n    width: \"100%\",\n    textAlign: \"center\",\n  },\n  ListItem: {\n    width: \"80%\",\n    margin: \"0 auto\",\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n    borderRadius: borderRadius,\n  },\n  Username: {\n    fontWeight: 800,\n  },\n  Text: {\n    fontSize: \"1rem\",\n  },\n});\n\nconst ChatList = ({ chats, handleChatSelect }) => {\n  const classes = useStyles();\n  const users = useSelector((state) => state.users.users);\n  const myId = useSelector((state) => state.general.id);\n\n  const chatList = chats.map((chat) => {\n    const newChatItem = { ...chat };\n    const recepient = newChatItem.userIds.find((id) => id !== myId);\n    const user = users.find((user) => user.id === recepient);\n    newChatItem.user = { ...user };\n    return newChatItem;\n  });\n\n  return (\n    <List className={classes.List}>\n      {chatList.length ? (\n        chatList.map((chat) => {\n          const chatId = chat.id;\n          const { id, name, image, messages, newMessages } = { ...chat.user };\n          return (\n            <ListItem\n              className={classes.ListItem}\n              button\n              onClick={() => handleChatSelect(id, chatId)}\n              key={chatId}\n            >\n              <Badge\n                color=\"secondary\"\n                overlap=\"circle\"\n                variant=\"dot\"\n                badgeContent={newMessages || 0}\n              >\n                <ListItemAvatar>\n                  <Avatar src={image} alt={name} />\n                </ListItemAvatar>\n              </Badge>\n              <ListItemText\n                primary={name}\n                primaryTypographyProps={{ className: classes.Username }}\n                secondary={\n                  messages ? messages[messages.length - 1]?.text || \"\" : \"\"\n                }\n              />\n            </ListItem>\n          );\n        })\n      ) : (\n        <Typography className={classes.Text}>No chats yet</Typography>\n      )}\n    </List>\n  );\n};\n\nexport default ChatList;\n","import { Avatar, Grid, makeStyles, Paper, Typography } from \"@material-ui/core\";\nimport { DoneAllRounded, DoneRounded } from \"@material-ui/icons\";\nimport React from \"react\";\nimport { CONSTANTS } from \"../../../../models/ws\";\nimport {\n  backgroundColor,\n  primaryColor,\n  secondaryColor,\n} from \"../../../../theme\";\n\nconst useStyles = makeStyles({\n  Container: {\n    width: \"100%\",\n    justifyContent: ({ self }) => (self ? \"flex-end\" : \"flex-start\"),\n    \"& $Paper\": {\n      borderRadius: ({ self }) =>\n        self ? \"30px 30px 5px 30px\" : \"5px 30px 30px 30px\",\n    },\n  },\n  Paper: {\n    padding: \"0.4rem 1.5rem\",\n    marginLeft: \"1rem\",\n    maxWidth: \"60%\",\n    backgroundColor: ({ self }) =>\n      self ? primaryColor.light : backgroundColor.foreground,\n  },\n  Typography: {\n    fontSize: \"1rem\",\n  },\n  Info: {\n    justifyContent: ({ self }) => (self ? \"flex-end\" : \"flex-start\"),\n  },\n  Date: {\n    fontSize: \"0.7rem\",\n    color: primaryColor.contrastTextLighter,\n  },\n  Icon: {\n    marginLeft: \"0.3rem\",\n    fontSize: \"0.7rem\",\n    color: ({ state }) =>\n      state === CONSTANTS.MESSAGE.SENT_MESSAGE\n        ? primaryColor.contrastTextLighter\n        : secondaryColor.main,\n  },\n  \"@media (max-width: 600px)\": {\n    Avatar: {\n      display: \"none\",\n    },\n    Paper: {\n      maxWidth: \"100%\",\n      padding: \"0.3rem 1rem\",\n    },\n  },\n});\n\nconst getDate = (date) => {\n  const d = new Date(date);\n  const minutes = d.getMinutes() < 10 ? \"0\" + d.getMinutes() : d.getMinutes();\n  return `${d.getHours()}:${minutes}`;\n};\n\nconst Message = (props) => {\n  const { self, text, image, name, date, state } = { ...props };\n  const classes = useStyles({ self, state });\n\n  return (\n    <Grid container className={classes.Container}>\n      {self ? null : (\n        <Avatar className={classes.Avatar} src={image} alt={name} />\n      )}\n      <Paper elevation={1} className={classes.Paper}>\n        <Grid container>\n          <Typography className={classes.Typography}>{text}</Typography>\n        </Grid>\n        <Grid className={classes.Info} container alignItems=\"center\">\n          <Typography component=\"span\" className={classes.Date}>\n            {getDate(date)}\n          </Typography>\n          {state === CONSTANTS.MESSAGE.READ_MESSAGE ? (\n            <DoneAllRounded className={classes.Icon} />\n          ) : (\n            <DoneRounded className={classes.Icon} />\n          )}\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default Message;\n","import { Grid, Fab, InputBase, makeStyles } from \"@material-ui/core\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useChat } from \"../../../../hooks/useChat.hook\";\nimport { backgroundColor } from \"../../../../theme\";\n\nconst useStyles = makeStyles({\n  Wrapper: {\n    border: \"1px solid #ccc\",\n    borderRadius: \"45px\",\n    padding: \"10px\",\n    backgroundColor: backgroundColor.foreground,\n  },\n  Input: {\n    flexGrow: 2,\n    paddingLeft: \"20px\",\n  },\n  Send: {\n    boxShadow: \"none\",\n  },\n  Icon: {\n    transform: \"rotate(-38deg) skew(17deg, 4deg) translateX(2px)\",\n  },\n  Form: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n\nconst SendForm = () => {\n  const classes = useStyles();\n  const [message, setMessage] = React.useState(\"\");\n  const id = useSelector((state) => state.UI.companion.id);\n  const { newMessage } = useChat();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log(message);\n    newMessage(id, message);\n    setMessage(\"\");\n  };\n\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        className={classes.Wrapper}\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignItems=\"center\"\n        item\n        xs={10}\n        sm={8}\n      >\n        <form onSubmit={handleSubmit} className={classes.Form}>\n          <InputBase\n            className={classes.Input}\n            onChange={(e) => setMessage(e.target.value)}\n            value={message}\n          />\n          <Fab\n            type=\"submit\"\n            className={classes.Send}\n            size=\"small\"\n            color=\"secondary\"\n          >\n            <SendIcon className={classes.Icon} />\n          </Fab>\n        </form>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default SendForm;\n","import { makeStyles, Grid, List, ListItem } from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useChat } from \"../../../hooks/useChat.hook\";\nimport { CONSTANTS } from \"../../../models/ws\";\nimport Message from \"./Message/Message\";\nimport SendForm from \"./SendForm/SendForm\";\n\nconst useStyles = makeStyles({\n  Container: {\n    minHeight: \"91vh\",\n  },\n  List: {\n    flexGrow: 2,\n    width: \"70%\",\n    maxHeight: \"70vh\",\n    margin: \"0 auto\",\n    overflowY: \"auto\",\n  },\n  ListItem: {\n    margin: \"20px auto\",\n  },\n  Header: {\n    marginTop: \"30px\",\n  },\n  SendForm: {\n    marginTop: \"auto\",\n    marginBottom: \"70px\",\n  },\n});\n\nlet cnt = 0;\n\nconst ChatRoom = (props) => {\n  const { name, avatar, images } = useSelector((state) => state.UI.companion);\n  const { chat, chats } = useSelector((state) => state.chat);\n  const messages = chats.find((ch) => ch.id === chat).messages;\n  const myId = useSelector((state) => state.general.id);\n  const classes = useStyles();\n  const { readMessage } = useChat();\n  const [mappedMessages, setMappedMessages] = useState([]);\n  console.log(`[ChatRoom ${cnt}] mappedMessages`, mappedMessages);\n  console.log(`[ChatRoom ${cnt}] messages`, messages);\n\n  const readAllMessages = useCallback(() => {\n    messages.forEach((message) => {\n      if (message.sender !== myId) {\n        switch (message.state) {\n          case CONSTANTS.MESSAGE.SENT_MESSAGE:\n          case CONSTANTS.MESSAGE.DELIVERED_MESSAGE:\n            readMessage(message);\n            return;\n          case CONSTANTS.MESSAGE.READ_MESSAGE:\n          default:\n            return;\n        }\n      }\n    });\n  }, [messages]);\n\n  useEffect(() => {\n    // if (cnt === 5) return;\n    if (!messages || !messages.length) return;\n    readAllMessages();\n  }, [messages]);\n\n  useEffect(() => {\n    // if (cnt === 5) return;\n    const formatedMessages = () =>\n      !messages || !messages.length\n        ? []\n        : messages.map((el) => (\n            <ListItem key={el.id} className={classes.ListItem}>\n              <Message\n                self={el.sender === myId}\n                text={el.text}\n                image={avatar?.image || images[0]?.image}\n                name={name}\n                date={el.date}\n                state={el.state}\n              />\n            </ListItem>\n          ));\n    setMappedMessages(formatedMessages);\n  }, [messages]);\n  cnt++;\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"stretch\"\n      spacing={1}\n      className={classes.Container}\n    >\n      <List className={classes.List}>\n        {mappedMessages.length ? mappedMessages : \"No messages yet\"}\n      </List>\n      <Grid item className={classes.SendForm}>\n        <SendForm />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ChatRoom;\n","import { makeStyles, Container, Button } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport ChatList from \"./ChatList/ChatList\";\nimport ChatRoom from \"./ChatRoom/ChatRoom\";\nimport { useSelector } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { useChat } from \"../../hooks/useChat.hook\";\n\nconst useStyles = makeStyles({\n  Container: {\n    overflow: \"hidden\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n});\n\nconst Chat = (props) => {\n  const classes = useStyles();\n  const chats = useSelector((state) => state.chat.chats);\n  const { getChatsInfo, selectChat, createChat, getChatInfo } = useChat();\n  // const [id, setId] = useState(\"\");\n\n  // const handleChange = (e) => {\n  //   setId(e.target.value);\n  // };\n\n  useEffect(() => {\n    getChatsInfo();\n  }, []);\n\n  const handleChatSelect = (id, chatId) => {\n    // console.log(id, chatId);\n    selectChat(id, chatId);\n    props.history.push(`/chat/${chatId}`);\n  };\n  // console.log(chats);\n\n  return (\n    <Container className={classes.Container}>\n      <Switch>\n        {chats.map((el) => (\n          <Route\n            key={el.id}\n            path={`/chat/${el.id}`}\n            render={() => <ChatRoom />}\n          />\n        ))}\n        <Route\n          path=\"/chat\"\n          exact\n          render={() => (\n            <ChatList chats={chats} handleChatSelect={handleChatSelect} />\n          )}\n        />\n      </Switch>\n      {/* chat debug */}\n      {/* <Container>\n        <Button onClick={() => createChat(id)}>Create chat</Button>\n        <Button onClick={() => getChatsInfo()}>Get chats info</Button>\n        <input onChange={handleChange} value={id} />\n        <Button onClick={() => getChatInfo(id)}>Get chat info</Button>\n      </Container> */}\n    </Container>\n  );\n};\n\nexport default Chat;\n","import React, { useEffect, useState } from \"react\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Switch, Route, useHistory, withRouter, Link } from \"react-router-dom\";\nimport { logout } from \"../../store/generalSlice\";\nimport { setCompanion, setHeader, setSelectedTab } from \"../../store/UISlice\";\n\nimport {\n  AppBar,\n  Tabs,\n  Tab,\n  Container,\n  Grid,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport { Search, Message, Settings, ExitToApp } from \"@material-ui/icons\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { backgroundColor } from \"../../theme\";\n\nimport Strangers from \"../../pages/Strangers/Strangers\";\nimport Profile from \"../../pages/Profile/Profile\";\nimport Header from \"../../components/Header/Header\";\nimport Chat from \"../Chat/Chat\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { checkStatusAndReconnect, useWS } from \"../../hooks/useWS.hook\";\n\nconst useStyles = makeStyles({\n  selectedTab: {\n    color: \"red\",\n  },\n  AppBar: {\n    position: \"fixed\",\n    left: 0,\n    bottom: 0,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  View: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  Max: {\n    width: \"100%\",\n    height: \"100vh\",\n  },\n  Container: {\n    paddingTop: \"70px\",\n    backgroundColor: backgroundColor.background,\n    maxWidth: \"100vw\",\n    width: \"100%\",\n  },\n});\n\nconst tabs = [\n  {\n    index: 0,\n    label: \"Strangers\",\n    icon: <Search />,\n    content: <Strangers />,\n    url: \"/\",\n  },\n  {\n    index: 1,\n    label: \"Chat\",\n    icon: <Message />,\n    content: <Chat />,\n    url: \"/chat\",\n  },\n  {\n    index: 2,\n    label: \"Settings\",\n    icon: <Settings />,\n    content: <Profile />,\n    url: \"/profile\",\n  },\n  {\n    index: 3,\n    label: \"Logout\",\n    icon: <ExitToApp />,\n    content: null,\n    url: \"/logout\",\n  },\n];\n\nconst Main = () => {\n  const showNotif = useNotifications();\n  const { header, selectedTab, companion } = useSelector((state) => state.UI);\n  const { id, isLoading, lookedBy } = useSelector((state) => state.general);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n  const [notification, setNotification] = useState(null);\n  useWS();\n\n  const handleChange = async (e, url) => {\n    if (url === \"/logout\") {\n      dispatch(logout(showNotif));\n      history.push(\"/login\");\n      return;\n    }\n    const tab = tabs.find((e) => e.url === url);\n    dispatch(setHeader({ header: tab.label }));\n    dispatch(setCompanion({ companion: null }));\n    dispatch(setSelectedTab({ selectedTab: tab }));\n    history.push(url);\n  };\n\n  // filter out myself and remove duplicates\n  useEffect(() => {\n    // console.log(lookedBy);\n    const lookedBySet = lookedBy\n      ? new Set(lookedBy.filter((el) => el !== id))\n      : new Set();\n    if (lookedBySet.size === 0) return;\n    setNotification(lookedBySet);\n  }, [lookedBy, id]);\n\n  // check WS status on every tab change and user visit\n  useEffect(() => {\n    checkStatusAndReconnect();\n  }, [selectedTab, companion]);\n\n  const renderedTabs = tabs.map((el) => {\n    return (\n      <Tab\n        icon={el.icon}\n        value={el.url}\n        key={el.index}\n        component={Link}\n        to={el.url}\n      />\n    );\n  });\n\n  return (\n    <Container>\n      {isLoading ? (\n        <Grid\n          container\n          justify=\"center\"\n          alignItems=\"center\"\n          className={classes.Max}\n        >\n          <CircularProgress />\n        </Grid>\n      ) : (\n        <Grid\n          container\n          direction=\"column\"\n          justify=\"flex-start\"\n          alignItems=\"stretch\"\n          spacing={1}\n          className={classes.Container}\n        >\n          <Header\n            header={companion?.username || header || tabs[0].label}\n            notification={notification}\n          />\n          <Switch>\n            <Route path=\"/chat\" component={Chat} />\n            <Route path=\"/profile\" component={Profile} />\n            <Route path=\"/\" component={Strangers} />\n          </Switch>\n          <AppBar className={classes.AppBar} position=\"static\">\n            <Tabs\n              value={selectedTab?.url || \"/\"}\n              centered\n              onChange={handleChange}\n            >\n              {renderedTabs}\n            </Tabs>\n          </AppBar>\n        </Grid>\n      )}\n    </Container>\n  );\n};\n\nexport default withRouter(Main);\n","import { Container, Grid, Typography } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst Step0 = () => {\n  return (\n    <Container>\n      <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n        <Typography>There's some info missing about you</Typography>\n        <Typography>Please take a quick survey</Typography>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default Step0;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../../components/Form/Form\";\nimport {\n  changeBirthDate,\n  changeName,\n  changeNameValid,\n  changeGender,\n  changeSurname,\n  changeSurnameValid,\n} from \"../additionalSlice\";\n\nconst Step1 = () => {\n  const dispatch = useDispatch();\n  const { name, surname, birthDate, gender } = {\n    ...useSelector((state) => state.additional),\n  };\n\n  const inputs = [\n    {\n      name: \"name\",\n      type: \"text\",\n      label: \"First name\",\n      value: name,\n      onChange: (e) => {\n        dispatch(changeName(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeNameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"surname\",\n      type: \"text\",\n      label: \"Last name\",\n      value: surname,\n      onChange: (e) => {\n        dispatch(changeSurname(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeSurnameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"birthDate\",\n      type: \"date\",\n      label: \"Birth date\",\n      value: birthDate,\n      onChange: (e) => {\n        dispatch(changeBirthDate(e.target.value));\n      },\n    },\n    {\n      name: \"gender\",\n      type: \"select\",\n      label: \"I'm\",\n      values: [\"male\", \"female\"],\n      value: gender,\n      onChange: (e) => {\n        dispatch(changeGender(e.target.value));\n      },\n    },\n  ];\n  return <Form inputs={inputs} />;\n};\n\nexport default Step1;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../../components/Form/Form\";\nimport {\n  changeCity,\n  changeCityValid,\n  changeCountry,\n  changeCountryValid,\n  changePhone,\n  changePhoneValid,\n} from \"../additionalSlice\";\n\nconst Step2 = () => {\n  const dispatch = useDispatch();\n  const { phone, country, city } = useSelector((state) => state.additional);\n\n  const inputs = [\n    {\n      name: \"phone\",\n      type: \"text\",\n      label: \"Phone\",\n      value: phone,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changePhone(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changePhoneValid(isValid));\n      },\n      rules: {\n        helperText: \"invalid phone\",\n        rule: {\n          minLength: 0,\n          maxLength: 12,\n          regex: /^$|^\\+?\\d+$/,\n        },\n      },\n    },\n    {\n      name: \"country\",\n      type: \"text\",\n      label: \"Country\",\n      value: country,\n      onChange: (e) => {\n        dispatch(changeCountry(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCountryValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"city\",\n      type: \"text\",\n      label: \"City\",\n      value: city,\n      onChange: (e) => {\n        dispatch(changeCity(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCityValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n  ];\n\n  return <Form inputs={inputs} />;\n};\n\nexport default Step2;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../../components/Form/Form\";\nimport {\n  changeLookFor,\n  changeMaxDist,\n  changeSearchAgeRange,\n} from \"../additionalSlice\";\n\nconst Step3 = () => {\n  const dispatch = useDispatch();\n  const { lookFor, maxAge, minAge, maxDist } = useSelector(\n    (state) => state.additional\n  );\n\n  const inputs = [\n    {\n      name: \"lookFor\",\n      type: \"select\",\n      label: \"I look for\",\n      values: [\"male\", \"female\", \"both\"],\n      value: lookFor,\n      onChange: (e) => {\n        dispatch(changeLookFor(e.target.value));\n      },\n    },\n    {\n      name: \"maxDistance\",\n      type: \"slider\",\n      label: \"Search distance\",\n      value: maxDist,\n      onChange: (value) => {\n        dispatch(changeMaxDist(value));\n      },\n    },\n    {\n      name: \"ageRange\",\n      type: \"slider\",\n      label: \"Age search range\",\n      value: [minAge, maxAge],\n      onChange: (value) => {\n        dispatch(changeSearchAgeRange(value));\n      },\n    },\n  ];\n  return <Form inputs={inputs} />;\n};\n\nexport default Step3;\n","import {\n  Grid,\n  makeStyles,\n  Button,\n  Step,\n  StepLabel,\n  Stepper,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { updateInfo } from \"./additionalSlice\";\nimport Step0 from \"./Steps/Step0\";\nimport Step1 from \"./Steps/Step1\";\nimport Step2 from \"./Steps/Step2\";\nimport Step3 from \"./Steps/Step3\";\n\nconst useStyles = makeStyles({\n  Grid: {\n    height: \"100vh\",\n  },\n  Stepper: {\n    backgroundColor: \"#ffffff00\",\n  },\n  Buttons: {\n    width: \"100%\",\n  },\n});\n\nconst steps = [\n  {\n    key: 0,\n    view: <Step0 />,\n    text: \"Intro\",\n  },\n  {\n    key: 1,\n    view: <Step1 />,\n    text: \"Who are you?\",\n  },\n  {\n    key: 2,\n    view: <Step2 />,\n    text: \"Where are you?\",\n  },\n  {\n    key: 3,\n    view: <Step3 />,\n    text: \"Who fits you?\",\n  },\n];\n\nconst AdditionalInfo = () => {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = useState(0);\n  const showNotif = useNotifications();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const info = useSelector((state) => state.additional);\n  const {\n    id,\n    name,\n    surname,\n    username,\n    birthDate,\n    phone,\n    gender,\n    country,\n    city,\n    maxDist,\n    lookFor,\n    minAge,\n    maxAge,\n    updateSuccess,\n  } = { ...info };\n  const isLoading = useSelector((state) => state.general.isLoading);\n\n  const handleNext = () => {\n    if (activeStep === steps.length - 1) {\n      console.log(\n        \"[AdditionalInfo] updateSuccess before dispatch\",\n        updateSuccess\n      );\n      dispatch(\n        updateInfo(\n          {\n            id,\n            name,\n            surname,\n            username,\n            birthDate,\n            phone,\n            gender,\n            country,\n            city,\n            maxDist,\n            lookFor,\n            minAge,\n            maxAge,\n          },\n          showNotif\n        )\n      );\n      history.push(\"/\");\n    } else {\n      setActiveStep((prev) => prev + 1);\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prev) => prev - 1);\n  };\n\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        item\n        xs={12}\n        sm={6}\n        lg={4}\n        container\n        direction=\"column\"\n        justify=\"center\"\n        alignItems=\"center\"\n        className={classes.Grid}\n      >\n        {steps[activeStep].view}\n        <Stepper\n          className={classes.Stepper}\n          activeStep={activeStep}\n          alternativeLabel\n        >\n          {steps.map(({ key, text }) => (\n            <Step key={key}>\n              <StepLabel>{text}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n        <Grid container justify=\"space-evenly\" className={classes.Buttons}>\n          <Button\n            disabled={isLoading || activeStep === 0}\n            onClick={handleBack}\n            variant=\"outlined\"\n          >\n            Back\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleNext}\n            disabled={isLoading}\n          >\n            {activeStep === steps.length - 1 ? \"Finish\" : \"Next\"}\n          </Button>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default AdditionalInfo;\n","import { Grid } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { api } from \"../../axios\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\nimport Form from \"../Form/Form\";\n\nconst Forgot = () => {\n  const classes = useStyles();\n  const notif = useNotifications();\n  const [email, setEmail] = useState(\"\");\n  const [emailValid, setEmailValid] = useState(false);\n  const history = useHistory();\n\n  const updatePasswordRequest = (e) => {\n    e.preventDefault();\n    try {\n      api.post(\"/reset\", { email });\n      notif(\"Check your email\", \"info\");\n    } catch (e) {\n      notif(\"Server error, please try again later\", \"error\");\n    }\n  };\n\n  const backToLogin = () => {\n    history.push(\"/login\");\n  };\n\n  const inputs = [\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      onValidate: (isValid) => {\n        setEmailValid(isValid);\n      },\n      onChange: (e) => {\n        setEmail(e.target.value);\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      component: \"button\",\n      variant: \"contained\",\n      type: \"submit\",\n      text: \"send restore password link\",\n      size: \"large\",\n      disabled: !emailValid,\n      onClick: updatePasswordRequest,\n    },\n    {\n      component: \"button\",\n      text: \"back to login\",\n      size: \"large\",\n      onClick: backToLogin,\n    },\n  ];\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      className={classes.SingleForm}\n    >\n      <Form className={classes.Form} inputs={inputs} buttons={buttons} />\n    </Grid>\n  );\n};\n\nexport default Forgot;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSnackbar, SnackbarContent } from \"notistack\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { useSelector } from \"react-redux\";\nimport classnames from \"classnames\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up(\"sm\")]: {\n      minWidth: \"344px !important\",\n    },\n  },\n  card: {\n    display: \"flex\",\n    width: \"100%\",\n  },\n  default: {\n    backgroundColor: theme.palette.grey[800],\n  },\n  info: {\n    backgroundColor: theme.palette.info.main,\n  },\n  success: {\n    backgroundColor: theme.palette.success.main,\n  },\n  warning: {\n    backgroundColor: theme.palette.warning.dark,\n  },\n  error: {\n    backgroundColor: theme.palette.error.main,\n  },\n  header: {\n    display: \"block\",\n    fontWeight: \"bold\",\n    color: theme.palette.common.white,\n  },\n  actionRoot: {\n    padding: \"8px 8px 8px 26px\",\n  },\n  close: {\n    marginLeft: \"auto !important\",\n    color: theme.palette.common.white,\n  },\n  text: {\n    fontSize: \"1rem\",\n    color: theme.palette.common.white,\n  },\n}));\n\nconst SnackMessage = React.forwardRef(({ id }, ref) => {\n  const { closeSnackbar } = useSnackbar();\n  const notifications = useSelector((state) => state.snack.notifications);\n  const selected = notifications.find((el) => el.key === id);\n  const { text, variant, header } = { ...selected };\n  const classes = useStyles();\n\n  const handleDismiss = () => {\n    closeSnackbar(id);\n  };\n\n  return (\n    <SnackbarContent ref={ref} className={classes.root}>\n      <Card className={classnames(classes.card, classes[variant])}>\n        <CardActions classes={{ root: classes.actionRoot }}>\n          {header && (\n            <Typography variant=\"subtitle2\" className={classes.header}>\n              {header}\n            </Typography>\n          )}\n          {text && (\n            <Typography variant=\"body1\" className={classes.text}>\n              {text}\n            </Typography>\n          )}\n        </CardActions>\n        <IconButton className={classes.close} onClick={handleDismiss}>\n          <CloseIcon color=\"inherit\" />\n        </IconButton>\n      </Card>\n    </SnackbarContent>\n  );\n});\n\nexport default SnackMessage;\n","import { useSnackbar } from \"notistack\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { removeSnack } from \"./snackSlice\";\n\nlet displayed = [];\n\nconst Notifier = () => {\n  const dispatch = useDispatch();\n  const notifications = useSelector((state) => state.snack.notifications);\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const storeDisplayed = (id) => {\n    displayed = [...displayed, id];\n  };\n  const removeDisplayed = (id) => {\n    displayed = displayed.filter((key) => id !== key);\n  };\n\n  useEffect(() => {\n    notifications.forEach(({ key, text, options = {}, dismissed = false }) => {\n      if (dismissed) {\n        // dismiss snackbar using notistack\n        closeSnackbar(key);\n        return;\n      }\n\n      // do nothing if snackbar is already displayed\n      if (displayed.includes(key)) return;\n\n      // display snackbar using notistack\n      enqueueSnackbar(text, {\n        key,\n        ...options,\n        onClose: (event, reason, key) => {\n          if (options.onClose) {\n            options.onClose(event, reason, key);\n          }\n        },\n        onExited: (event, key) => {\n          // remove this snackbar from redux store\n          dispatch(removeSnack({ key }));\n          removeDisplayed(key);\n        },\n      });\n\n      // keep track of snackbars that we've displayed\n      storeDisplayed(key);\n    });\n  }, [notifications, enqueueSnackbar, dispatch, closeSnackbar]);\n\n  return null;\n};\n\nexport default Notifier;\n","import React, { useEffect, useState } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { makeStyles, ThemeProvider } from \"@material-ui/core/styles\";\nimport { theme } from \"./theme\";\n\nimport Login from \"./pages/Login/Login\";\nimport Register from \"./pages/Register/Register\";\nimport Main from \"./containers/Main/Main\";\nimport { SnackbarProvider } from \"notistack\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AdditionalInfo from \"./pages/AdditionalInfo/AdditionalInfo\";\nimport { getSelfInfo } from \"./store/generalSlice\";\nimport { CircularProgress, Grid } from \"@material-ui/core\";\nimport Forgot from \"./components/Forgot/Forgot\";\nimport UpdatePassword from \"./components/UpdatePassword/UpdatePassword\";\nimport SnackMessage from \"./components/Notifier/SnackMessage/SnackMessage\";\nimport Notifier from \"./components/Notifier/Notifier\";\n\nconst useStyles = makeStyles({\n  Grid: {\n    width: \"100vw\",\n    height: \"100vh\",\n  },\n});\n\nfunction App() {\n  const classes = useStyles();\n  const { isAuth, isLoading } = useSelector((state) => state.general);\n  const { isInfoMissing } = useSelector((state) => state.UI);\n  const dispatch = useDispatch();\n  const [content, setContent] = useState(<CircularProgress />);\n\n  useEffect(() => {\n    dispatch(getSelfInfo());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (isLoading) {\n      setContent(\n        <Grid\n          container\n          justify=\"center\"\n          alignItems=\"center\"\n          className={classes.Grid}\n        >\n          <CircularProgress />\n        </Grid>\n      );\n    } else if (isAuth && isInfoMissing) {\n      setContent(\n        <Switch>\n          <Redirect from=\"/login\" to=\"/add\" />\n          <Route path=\"/add\" component={AdditionalInfo} exact />\n        </Switch>\n      );\n    } else if (isAuth) {\n      setContent(\n        <Switch>\n          <Route path=\"/reset\" component={UpdatePassword} exact />\n          <Redirect exact from=\"/strangers\" to=\"/\" />\n          <Redirect from=\"/login\" to=\"/\" />\n          <Route path=\"/\" component={Main} />\n        </Switch>\n      );\n    } else {\n      setContent(\n        <Switch>\n          <Route path=\"/register\" component={Register} exact />\n          <Route path=\"/forgot\" component={Forgot} exact />\n          <Route path=\"/reset\" component={UpdatePassword} exact />\n          <Route path=\"/login\" component={Login} exact />\n          <Route path=\"/\">\n            <Redirect to=\"/login\" />\n          </Route>\n        </Switch>\n      );\n    }\n  }, [isAuth, isLoading, classes.Grid]);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <SnackbarProvider\n        maxSnack={3}\n        content={(key) => <SnackMessage id={key} />}\n      >\n        <>\n          <CssBaseline />\n          {content}\n          <Notifier />\n        </>\n      </SnackbarProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { combineReducers } from \"redux\";\nimport generalReducer from \"./generalSlice\";\nimport loginReducer from \"../pages/Login/loginSlice\";\nimport registerReducer from \"../pages/Register/registerSlice\";\nimport uiReducer from \"./UISlice\";\nimport filterReducer from \"../components/Filter/filterSlice\";\nimport additionalReducer from \"../pages/AdditionalInfo/additionalSlice\";\nimport usersReducer from \"./usersSlice\";\nimport chatReducer from \"./chatSlice\";\nimport snackReducer from \"../components/Notifier/snackSlice\";\n\nexport default combineReducers({\n  general: generalReducer,\n  login: loginReducer,\n  register: registerReducer,\n  UI: uiReducer,\n  filter: filterReducer,\n  additional: additionalReducer,\n  users: usersReducer,\n  chat: chatReducer,\n  snack: snackReducer,\n});\n","import rootReducer from \"./reducer\";\nimport thunk from \"redux-thunk\";\nimport { configureStore } from \"@reduxjs/toolkit\";\n\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: [thunk],\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store } from \"./store/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    {/* <React.StrictMode> */}\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n    {/* </React.StrictMode> */}\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","module.exports = __webpack_public_path__ + \"static/media/default-avatar.d2c893f5.png\";"],"sourceRoot":""}