{"version":3,"sources":["theme.js","pages/Login/loginSlice.js","axios.js","utils.js","store/chatSlice.js","store/UISlice.js","components/Filter/filterSlice.js","pages/AdditionalInfo/additionalSlice.js","models/ws.js","store/snackSlice.js","store/WSSlice.js","store/usersSlice.js","hooks/useNotifications.js","hooks/useChat.hook.js","hooks/useWS.hook.js","hooks/useOnline.hook.js","store/generalSlice.js","components/TagInput/TagInput.jsx","hooks/useTags.hook.js","components/Input/Input.jsx","components/Form/Form.jsx","style.jsx","pages/Login/Login.jsx","pages/Register/registerSlice.js","pages/Register/Register.jsx","hooks/useBan.hook.js","components/UserCard/UserCard.jsx","components/Gallery/Gallery.jsx","components/Tags/Tags.jsx","components/ProfileHeader/ProfileHeader.jsx","components/Bio/Bio.jsx","components/Icons/Icons.jsx","components/Report/Report.jsx","containers/UserProfile/UserProfile.jsx","components/Filter/Filter.jsx","components/Sort/Sort.jsx","components/FIlterSortWrapper/FilterSortWrapper.jsx","pages/Strangers/Strangers.jsx","containers/TabPanel/TabPanel.jsx","components/Avatar/AvatarContainer.jsx","components/NotificationListItem/NotificationListItem.jsx","components/ProfileListItem/ProfileListItem.jsx","components/ClickableUsersList/ClickableUsersList.jsx","components/Banned/Banned.jsx","components/UpdatePassword/UpdatePassword.jsx","components/DialogMessage/DialogMessage.jsx","components/UpdatePersonalInfo/UpdatePersonalInfo.jsx","components/UpdatePublicInfo/UpdatePublicInfo.jsx","components/ProfileSettings/ProfileSettings.jsx","components/Settings/Settings.jsx","pages/Profile/Profile.jsx","components/Header/Header.jsx","containers/Chat/ChatList/ChatList.jsx","containers/Chat/ChatRoom/Message/Message.jsx","containers/Chat/ChatRoom/SendForm/SendForm.jsx","containers/Chat/ChatRoom/ChatRoom.jsx","containers/Chat/Chat.jsx","containers/Social/Social.jsx","containers/Main/Main.jsx","pages/AdditionalInfo/Steps/Step0.jsx","pages/AdditionalInfo/Steps/Step1.jsx","pages/AdditionalInfo/Steps/Step2.jsx","pages/AdditionalInfo/Steps/Step3.jsx","pages/AdditionalInfo/AdditionalInfo.jsx","components/Forgot/Forgot.jsx","hooks/useGPS.hook.js","components/Notifier/SnackMessage/SnackMessage.jsx","components/Notifier/Notifier.jsx","components/VerifyEmail/VerifyEmail.jsx","App.jsx","store/reducer.js","store/store.js","index.jsx","Images/default-avatar.png"],"names":["backgroundColor","primaryColor","light","main","dark","contrastText","contrastTextLighter","secondaryColor","theme","createMuiTheme","palette","primary","secondary","info","overrides","MuiTextField","root","width","MuiContainer","display","justifyContent","MuiBadge","anchorOriginTopRightCircle","top","right","transform","border","shape","borderRadius","props","MuiButton","variant","color","size","MuiAlert","elevation","loginSlice","createSlice","name","initialState","email","password","emailValid","passwordValid","reducers","changeEmail","state","action","payload","changePassword","changeEmailValid","changePasswordValid","actions","CancelToken","axios","api","create","baseURL","withCredentials","headers","validateStatus","status","media","responseType","chatApi","mediaUpload","id","file","a","isAvatar","formData","FormData","append","post","res","xssSanitize","value","toString","replace","unsanitaze","lt","gt","ap","ic","source","loadImages","user","images","length","promises","map","img","cancelToken","token","Promise","allSettled","resolvedPromises","fetchedImages","filter","URL","createObjectURL","data","config","url","split","image","updatedUser","avatar","find","Axios","isCancel","console","log","addAge","age","Date","getFullYear","birthDate","prepareUsers","users","getCookie","allCookies","document","cookie","matches","match","RegExp","decodeURIComponent","undefined","el","trim","require","chat","chats","chatSlice","setChats","messages","addChat","push","deleteChat","setChat","ch","setChatByUserId","userIds","includes","addMessage","chatIdx","findIndex","chatId","msg","updateMessage","selectedChatId","msgIdx","text","deleteMessage","messageIndex","slpice","upadateChatMessages","resetState","initialUIState","showBackButton","header","selectedTab","companion","isInfoMissing","parent","UISlice","hideBackButton","setSelectedTab","label","setHeader","resetUIState","setCompanion","setIsInfoMissing","setParent","handleBack","history","dispatch","useState","backLocation","UI","sendLike","userId","getState","likes","general","newLikes","saveNewState","e","removeLike","delete","likedBy","newLikedBy","inititalFilterState","username","city","country","gender","tags","minAge","maxAge","rating","min","max","filterSlice","changeFilterState","key","Error","resetFilter","initialAdditionalState","surname","bio","phone","maxDist","lookFor","useLocation","usernameValid","nameValid","surnameValid","bioValid","countryValid","cityValid","updateSuccess","additionalSlice","setAdditionalState","Object","keys","forEach","resetAdditionalState","changeUsername","changeName","changeSurname","changeBio","changeBirthDate","date","getTime","isNaN","changeGender","changePhone","changeCountry","changeCity","changeMaxDist","changeLookFor","changeSearchAgeRange","changeMinAge","changeMaxAge","changeTags","changeUseLocation","changeUsernameValid","changeNameValid","changeSurnameValid","changeBioValid","changePhoneValid","phoneValid","changeCountryValid","changeCityValid","onUpdateSuccess","onUpdateFail","updateInfo","showNotif","additionalState","additional","generalState","body","position","lat","lon","setTimeout","put","response","tagsResponse","message","CONSTANTS","CHAT","MESSAGE","UPDATE","NEW_CHAT","DELETE_CHAT","USER_STATUS_UPDATE","NEW_LIKE","NEW_LOOK","NEW_MATCH","DELETE_MATCH","DELETE_LIKE","NEW","READ","NEW_MESSAGE","UPDATE_MESSAGE","DELETE_MESSAGE","STATUS_NEW","STATUS_DELIVERED","STATUS_READ","WSmessage","type","this","Chat","Message","sender","recipient","uuid","WSNotification","obj","snackSlice","notifications","addSnack","dismissSnack","notificaton","dismissAll","dismissed","removeSnack","initialWSState","WSSlice","resetWSSlice","addNotification","notification","some","removeNotification","index","equals","_","idx","readNotification","updated","newNotifications","slice","concat","readAllNotifications","initialUsersState","isLoading","isUpdating","error","strangers","banned","loadedIds","Set","usersSlice","startLoading","successLoading","failLoading","addUsers","updateUsers","userInState","setUsersOnline","isOnline","sortStrangers","compareFunction","sort","updateStrangers","setUsers","setStrangers","setBanned","startUpdating","successUpdating","failUpdating","resetError","resetUsersState","getUserIds","getStrangers","queryParams","params","entries","reduce","acc","curr","get","loadStrangers","loadBanned","resetGeneralState","stranger","uncashed","has","all","preparedUsers","allUsers","preparedStrangers","u","add","loadUsers","notYetLoaded","userPromises","loadedUsers","checkAndUpdateUsers","needLoading","useNotifications","useDispatch","notif","options","autoHideDuration","handleNotification","wsNotification","newWSNotification","addGeneralValues","values","removeGeneralValues","showPrompt","persist","useChat","myId","useSelector","store","useStore","getChatsInfo","createChat","selectChat","handleChat","wsMessage","handleMessage","pathMatch","window","location","pathname","newMsg","send","readMsg","updateMsg","socket","localStorage","debug","newConnection","io","path","reconnection","query","auth","useWS","updateOnline","getOnlineUsers","lastOnline","useOnline","useEffect","on","disconnected","json","JSON","parse","onAny","event","args","reason","connect","stringify","emit","initialGeneralState","isAuth","generalSlice","stopLoading","authSuccess","authFail","revokeObjectURL","setNewState","stateValues","updatedValues","updateSelfInfo","resolve","myLikes","checkInfo","isAgeRangeMissing","indexOf","checkAuth","latitude","longitude","logout","disconnect","useStyles","makeStyles","Container","TagInput","classes","setTags","fetchTags","offset","limit","addTags","newTags","tagsSet","removeTags","oldTags","filtered","tag","useTags","allTags","setAllTags","Grid","className","Autocomplete","multiple","freeSolo","getOptionLabel","option","defaultValue","onChange","filterSelectedOptions","renderInput","TextField","placeholder","ButtonListItem","Input","SmallSelector","minWidth","padding","FormControl","flexDirection","alignItems","RadioGroup","getDate","timestamp","now","year","month","getMonth","day","onValidate","rules","ignoreUntouched","rest","touched","setTouched","setError","errorText","setErrorText","helperText","rule","minLength","maxLength","regex","validate","onFocus","select","MenuItem","component","FormLabel","capitalize","aria-label","FormControlLabel","control","Radio","checked","InputLabelProps","shrink","Box","Typography","gutterBottom","Slider","valueLabelDisplay","aria-labelledby","container","justify","item","xs","target","Form","Button","margin","List","Buttons","Fab","bottom","zIndex","inputs","buttons","ListItem","onClick","others","SingleForm","height","breakpoints","down","up","maxWidth","textTransform","Login","useHistory","login","formValid","setFormValid","onLoginHandler","preventDefault","isValid","required","disabled","direction","CircularProgress","initialRegisterState","confirm","confirmValid","registerSuccess","registerSlice","changeConfirmPassword","changeConfirmValid","onRegisterSuccess","onRegisterFail","register","Register","onRegisterHandler","banUser","unbanUser","useBan","banAndUpdate","filteredStrangers","updatedBanned","unbanAndUpdate","UserCard","overflow","cursor","opacity","Info","left","background","transition","InfoHeader","fontSize","Tags","lineHeight","content","Stepper","StepperButton","textShadow","CardMedia","paddingTop","Like","Ban","Status","marginLeft","grey","Online","success","Tooltip","default","defaultUser","displayedImage","setDisplayedImage","like","setLike","LeftButtonDisabled","RightButtonDisabled","sm","lg","Card","sendVisit","MobileStepper","steps","activeStep","nextButton","stopPropagation","prev","ChevronRightRounded","backButton","ChevronLeftRounded","style","tooltip","title","cn","handleLike","FavoriteBorderOutlined","FavoriteOutlined","handleBan","RemoveCircleOutlineRounded","defaultImage","Skeleton","currentImage","CardContent","Media","marginTop","Gallery","handleRemove","imageId","newImages","newAvatar","spacing","md","DeleteOutlineRounded","defaultAvatar","Item","Header","fontWeight","Chip","maxHeight","ProfileHeader","fullWidth","Bio","MaleColorIcon","colors","elementColor","shadow","ringColor","SvgIcon","viewBox","xmlns","d","fill","FemaleColorIcon","Report","open","onClose","category","complaint","report","setReport","valid","setValid","errorMessage","setErrorMessage","handleChange","handleSendReport","authorId","Dialog","DialogTitle","DialogContent","DialogContentText","input","DialogActions","dayjs","extend","relativeTime","Name","marginRight","Location","FullWidth","FabIcon","UserProfile","fromNow","isMatched","openReport","setOpenReport","handleOpenReport","Divider","ChatRounded","Favorite","Inputs","Filter","step","Wrapper","Active","Sort","isAsc","setIsAsc","sortingParam","setSortingParam","sortByUsernameAsc","userA","userB","localeCompare","sortByUsernameDesc","sortByAgeAsc","sortByAgeDesc","sortByRatingAsc","sortByRatingDesc","sortByLocationAsc","sortByLocationDesc","compFn","useCallback","ButtonGroup","Checkbox","Paper","ButtonLabel","fontFamily","boxShadow","Arrow","Less","FilterSortWrapper","setContent","show","setShow","handleShow","handleButtonPress","button","triggerShow","self","ExpandMoreRounded","Strangers","paddingBottom","CardContainer","Text","textAlign","cards","setCards","routes","setRoutes","useLayoutEffect","filteredUsers","toLowerCase","regexString","test","memorizedRoutes","useMemo","render","exact","TabPanel","children","other","role","hidden","Avatar","AvatarContainer","loadingDisabled","displayedAvatar","setDisplayedAvatar","changeAvatarHandler","files","search","objectUrl","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","src","flexWrap","flexGrow","NotificationListItem","getText","time","today","valueOf","getDay","toTimeString","SecondaryText","ProfileListItem","wrap","Menu","Unread","Center","forwardRef","ref","items","autoFocusItem","defaultText","setOpen","handleItemClick","MenuList","onKeyDown","endIcon","icon","handleActionClick","Banned","bannedUsers","unbanAction","ReplayRounded","UpdatePassword","queryString","checkValidity","k","updatePasswordRequest","Transition","Slide","DialogMessage","buttonText","yesText","noText","handleClose","TransitionComponent","keepMounted","aria-describedby","lastButton","UpdatePersonalInfo","saveUserInfo","formButtons","deleteAccountDialog","UpdatePublicInfo","marginBottom","formControl","ProfileSettings","setState","FormGroup","Settings","selectRoute","indicator","borderColor","Profile","minHeight","paddingBlockEnd","Tab","TabContext","createContext","currentTab","setCurrentTab","tabs","disableRipple","Provider","Tabs","next","ElevationScroll","trigger","useScrollTrigger","disableHysteresis","threshold","cloneElement","Appbar","Popper","PopperPaper","Notifications","overflowY","scrollbarWidth","Category","WS","filledNotifications","setFilledNotifications","loc","anchorRef","useRef","usersIds","reverse","readAll","current","contains","unreadNotifications","cur","AppBar","prevOpen","anchorEl","placement","disablePortal","TransitionProps","Fade","ClickAwayListener","onClickAway","Username","Secondary","lineClamp","boxOrient","paper","animation","NewMessages","ChatList","chatList","newChatItem","recepient","newMessages","badge","ListItemAvatar","alt","ListItemText","primaryTypographyProps","secondaryTypographyProps","Icon","minutes","getMinutes","getHours","DoneAllRounded","DoneRounded","paddingLeft","Send","SendForm","React","setMessage","onSubmit","InputBase","ChatRoom","mappedMessages","setMappedMessages","messagesEndRef","formatedMessages","scrollIntoView","behavior","Social","lookedBy","looked","setLooked","liked","setLiked","matched","setMatched","lookedUsers","matchedUsers","View","Max","Search","People","ExitToApp","withRouter","tab","substr","renderedTabs","Link","to","centered","Step0","Step1","Step2","inputProps","autoFocus","Step3","view","AdditionalInfo","setActiveStep","alternativeLabel","Step","StepLabel","Forgot","setEmail","setEmailValid","useGPS","gps","navigator","geolocation","pos","crd","coords","getLocationByIp","getCurrentLocaion","getCurrentPosition","sendCoordinates","fetch","then","ip","card","prompt","warning","common","white","actionRoot","close","SnackMessage","closeSnackbar","useSnackbar","selected","snack","isPrompt","classnames","CardActions","IconButton","CheckRounded","displayed","Notifier","enqueueSnackbar","onExited","VerifyEmail","App","permissions","result","from","Main","ThemeProvider","maxSnack","containerRoot","CssBaseline","combineReducers","generalReducer","loginReducer","registerReducer","uiReducer","filterReducer","additionalReducer","usersReducer","chatReducer","snackReducer","WSReducer","configureStore","reducer","rootReducer","middleware","thunk","ReactDOM","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.a16f72af.chunk.js","sourcesContent":["import { unstable_createMuiStrictModeTheme as createMuiTheme } from \"@material-ui/core/styles\";\n\nexport const backgroundColor = {\n  background: \"#fafafa\",\n  foreground: \"#fdfdfd\",\n};\nexport const primaryColor = {\n  light: \"#A8DADC\",\n  main: \"#457B9D\",\n  dark: \"#1D3557\",\n  contrastText: \"#000\",\n  contrastTextLighter: \"#777\",\n};\nexport const secondaryColor = {\n  light: \"#E94957\",\n  main: \"#E63946\",\n  dark: \"#C81927\",\n  contrastText: \"#fff\",\n};\nexport const borderRadius = \"30px\";\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: primaryColor,\n    secondary: secondaryColor,\n    info: {\n      main: \"#04728B\",\n    },\n  },\n  overrides: {\n    MuiTextField: {\n      root: {\n        width: \"100%\",\n      },\n    },\n    MuiContainer: {\n      root: {\n        display: \"flex\",\n        justifyContent: \"center\",\n      },\n    },\n    MuiBadge: {\n      anchorOriginTopRightCircle: {\n        top: \"23%\",\n        right: \"33%\",\n        transform: \"scale(1.5) translate(50%, -50%)\",\n        border: `1px solid ${backgroundColor.foreground}`,\n      },\n    },\n  },\n  shape: {\n    borderRadius: borderRadius,\n  },\n  props: {\n    MuiButton: {\n      variant: \"outlined\",\n      color: \"primary\",\n      size: \"large\",\n    },\n    MuiTextField: {\n      variant: \"outlined\",\n    },\n    MuiAlert: {\n      elevation: 6,\n      variant: \"filled\",\n    },\n  },\n});\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialLoginState = {\n  email: \"\",\n  password: \"\",\n  emailValid: false,\n  passwordValid: false,\n};\n\nconst loginSlice = createSlice({\n  name: \"login\",\n  initialState: initialLoginState,\n  reducers: {\n    changeEmail(state, action) {\n      state.email = action.payload;\n    },\n    changePassword(state, action) {\n      state.password = action.payload;\n    },\n    changeEmailValid(state, { payload }) {\n      state.emailValid = payload;\n    },\n    changePasswordValid(state, { payload }) {\n      state.passwordValid = payload;\n    },\n  },\n});\n\nexport const {\n  changeEmail,\n  changePassword,\n  changeEmailValid,\n  changePasswordValid,\n} = loginSlice.actions;\n\nexport default loginSlice.reducer;\n","import axios from \"axios\";\nexport const CancelToken = axios.CancelToken;\n\nconst api = axios.create({\n  baseURL: `/api/main/`,\n  withCredentials: true,\n  headers: { \"Content-Type\": \"application/json\" },\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nconst media = axios.create({\n  baseURL: \"/api/media/\",\n  withCredentials: true,\n  headers: { \"Content-Type\": \"application/json\" },\n  responseType: \"blob\",\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\nconst chatApi = axios.create({\n  baseURL: \"/api/chat/\",\n  withCredentials: true,\n  headers: { \"Content-Type\": \"application/json\" },\n  validateStatus: (status) => status >= 200 && status < 500,\n});\n\n// media.interceptors.response.use(\n//   function (response) {\n//     // Any status code that lie within the range of 2xx cause this function to trigger\n//     // Do something with response data\n//     // console.log(response);\n//     return response;\n//   },\n//   function (error) {\n//     // console.log(error);\n//     // Any status codes that falls outside the range of 2xx cause this function to trigger\n//     // Do something with response error\n//     return Promise.reject(null);\n//   }\n// );\n\nconst mediaUpload = async (id, file, isAvatar = false) => {\n  let formData = new FormData();\n  formData.append(\"id\", id);\n  formData.append(\"isAvatar\", isAvatar);\n  formData.append(\"userImage\", file);\n  const res = await axios.post(\"/api/media/upload/\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  });\n  return res;\n};\nexport { api, media, chatApi, mediaUpload };\n","import { CancelToken, media } from \"./axios\";\nimport Axios from \"axios\";\n\nexport const xssSanitize = (value) => {\n  var lt = /</g,\n    gt = />/g,\n    ap = /'/g,\n    ic = /\"/g;\n  return value\n    ? value\n        .toString()\n        .replace(lt, \"&lt;\")\n        .replace(gt, \"&gt;\")\n        .replace(ap, \"&#39;\")\n        .replace(ic, \"&#34;\")\n    : \"\";\n};\n\nexport const unsanitaze = (value) => {\n  var lt = [/&lt;/g, \"<\"],\n    gt = [/&gt;/g, \">\"],\n    ap = [/&#39;/g, \"'\"],\n    ic = [/&#34;/g, '\"'];\n  return value\n    ? value\n        .replace(lt[0], lt[1])\n        .replace(gt[0], gt[1])\n        .replace(ap[0], ap[1])\n        .replace(ic[0], ic[1])\n    : \"\";\n};\n\nconst source = CancelToken.source();\n\nexport const capitalize = (str) => {\n  return str[0].toUpperCase() + str.slice(1);\n};\n\nexport const loadImages = async (user) => {\n  const images = user.images;\n  if (!images || images.length === 0) return { ...user, images: [] };\n\n  // console.log(\"fetching images for user: \", user);\n  // console.log(\"images: \", images);\n  try {\n    const promises = images.map((img) =>\n      media(`img/${img}`, { cancelToken: source.token })\n    );\n    const resolvedPromises = await Promise.allSettled(promises);\n    // console.log(\"image promises\", resolvedPromises);\n    const fetchedImages = resolvedPromises\n      .filter((img) => img.status === \"fulfilled\")\n      .map((img) => {\n        // console.log(img);\n        const file = URL.createObjectURL(img.value.data);\n        const image = { id: img.value.config.url.split(\"/\")[1], image: file };\n        // console.log(\"image\", image);\n        return image;\n      });\n    // console.log(\"fetchedImages\", fetchedImages);\n    const updatedUser = { ...user, images: fetchedImages };\n    updatedUser.avatar = updatedUser.images.find(\n      (img) => img.id === user.avatar\n    );\n    return updatedUser;\n  } catch (e) {\n    if (Axios.isCancel(e)) {\n      console.log(\"Request cancelled\");\n    }\n    return user;\n  }\n};\n\nexport const addAge = (user) => {\n  const age = new Date().getFullYear() - new Date(user.birthDate).getFullYear();\n  return { ...user, age };\n};\n\nexport const prepareUsers = (users) => {\n  return users.map((user) => addAge(user)).map((user) => loadImages(user));\n};\n\nexport const throttle = (f) => {\n  let store = {\n    isCooldown: false,\n    args: null,\n    savedthis: null,\n  };\n  function wrapper() {\n    if (store.isCooldown) {\n      store.savedthis = this;\n      store.args = arguments;\n      return;\n    }\n\n    f.apply(this, arguments);\n    store.isCooldown = true;\n    setTimeout(() => {\n      store.isCooldown = false;\n      if (store.args) f.apply(store.savedthis, store.args);\n      store.args = store.savedthis = null;\n    }, 30);\n  }\n\n  return wrapper;\n};\n\nexport const getCookie = (name) => {\n  const allCookies = document.cookie;\n  console.log(allCookies);\n  let matches = allCookies.match(\n    new RegExp(\n      \"(?:^|; )\" + name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, \"\\\\$1\") + \"=([^;]*)\"\n    )\n  );\n  let cookie = matches ? decodeURIComponent(matches[1]) : undefined;\n  if (cookie === undefined) {\n    cookie = allCookies.split(\";\").find((el) => el.match(/session_id.+/));\n    if (cookie) cookie = cookie.split(\"=\")[1].trim();\n  }\n  return cookie;\n};\n","const { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst initialState = {\n  chat: null,\n  chats: [],\n};\n\nconst chatSlice = createSlice({\n  name: \"chat\",\n  initialState,\n  reducers: {\n    setChats(state, { payload }) {\n      // console.log(payload);\n      if (payload && payload.length) {\n        // console.log(\"payload is not null\");\n        state.chats = payload.map((chat) => ({\n          ...chat,\n          messages: chat.messages || [],\n        }));\n      }\n    },\n    addChat(state, { payload }) {\n      // console.log(payload);\n      if (!state.chats.find((chat) => chat.id === payload.id)) {\n        // console.log(\"chat not found, adding\", payload);\n        state.chats.push({ ...payload, messages: payload.messages || [] });\n      }\n    },\n    deleteChat(state, { payload }) {\n      state.chats = state.chats?.filter((chat) => chat.id !== payload.id);\n    },\n    setChat(state, { payload }) {\n      // console.log(payload);\n      if (!state.chats.length) return;\n      if (!payload) {\n        state.chat = null;\n        return;\n      }\n      // just to be sure that chat exsist\n      // actually we can just set chat to payload.id\n      const chat = state.chats.find((ch) => ch.id === payload.id);\n      // console.log(chat);\n      state.chat = chat ? chat.id : null;\n    },\n    setChatByUserId(state, { payload }) {\n      if (!payload || state.chats.length === 0) return;\n      const chat = state.chats.find((chat) =>\n        chat.userIds.includes(payload.id)\n      );\n      state.chat = chat && chat.id;\n    },\n    addMessage(state, { payload }) {\n      if (!payload) return;\n      const chatIdx = state.chats.findIndex(\n        (chat) => chat.id === payload.chatId\n      );\n      if (chatIdx < 0) {\n        // console.log(\"[addMessage reducer] chat not found\", payload);\n        return;\n      }\n      if (state.chats[chatIdx].messages.find((msg) => msg.id === payload.id))\n        return;\n      state.chats[chatIdx].messages.push(payload);\n    },\n    updateMessage(state, { payload }) {\n      const selectedChatId =\n        state.chat || state.chats.find((ch) => ch.id === payload.chatId)?.id;\n      if (!selectedChatId) {\n        // console.log(\"[updateMessage reducer] chat not found. payload:\", payload);\n        return;\n      }\n\n      const chatIdx = state.chats.findIndex(\n        (chat) => chat.id === selectedChatId\n      );\n      const msgIdx = state.chats[chatIdx].messages.findIndex(\n        (msg) => msg.id === payload.id\n      );\n\n      console.log(`chatIdx: ${chatIdx}, msgIdx: ${msgIdx}`);\n      if (msgIdx === -1) {\n        state.chats[chatIdx].messages.push(payload);\n      } else {\n        state.chats[chatIdx].messages[msgIdx].text = payload.text;\n        state.chats[chatIdx].messages[msgIdx].status = payload.status;\n      }\n    },\n    deleteMessage(state, { payload }) {\n      const selectedChatId =\n        state.chat || state.chats.find((ch) => ch.id === payload.chatId)?.id;\n      const chatIdx = state.chats.findIndex(\n        (chat) => chat.id === selectedChatId\n      );\n      const messageIndex = state.chats[chatIdx].messages.findIndex(\n        (msg) => msg.id === payload.id\n      );\n      if (messageIndex !== -1) {\n        state.chat.messages.slpice(messageIndex, 1);\n      }\n    },\n    upadateChatMessages(state, { payload }) {\n      if (!state.chat) return;\n      const chatIdx = state.chats.findIndex((chat) => chat.id === state.chat);\n      state.chats[chatIdx].messages = payload;\n    },\n    resetState() {\n      return initialState;\n    },\n  },\n});\n\nexport const {\n  setChat,\n  setChats,\n  setChatByUserId,\n  deleteChat,\n  addChat,\n  resetState,\n  addMessage,\n  updateMessage,\n  deleteMessage,\n  upadateChatMessages,\n} = chatSlice.actions;\n\nexport default chatSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { api } from \"../axios\";\nimport { setChat } from \"./chatSlice\";\nimport { saveNewState } from \"./generalSlice\";\n\nconst initialUIState = {\n  showBackButton: false,\n  header: null,\n  selectedTab: null,\n  companion: null,\n  isInfoMissing: false,\n  parent: \"/\",\n};\n\nconst UISlice = createSlice({\n  name: \"UI\",\n  initialState: initialUIState,\n  reducers: {\n    showBackButton(state) {\n      state.showBackButton = true;\n    },\n    hideBackButton(state) {\n      state.showBackButton = false;\n    },\n    setSelectedTab(state, { payload }) {\n      state.selectedTab = payload.selectedTab;\n      state.header = payload.selectedTab.label;\n      state.companion = null;\n    },\n    setHeader(state, { payload }) {\n      state.header = payload.header;\n    },\n    resetUIState: () => initialUIState,\n    setCompanion(state, { payload }) {\n      state.companion = payload.companion;\n    },\n    setIsInfoMissing(state, { payload }) {\n      state.isInfoMissing = payload;\n    },\n    setParent(state, { payload }) {\n      state.parent = payload.parent;\n    },\n  },\n});\n\nexport const {\n  showBackButton,\n  hideBackButton,\n  setSelectedTab,\n  setHeader,\n  resetUIState,\n  setCompanion,\n  setIsInfoMissing,\n  setParent,\n} = UISlice.actions;\n\nexport const handleBack = (history, parent) => (dispatch, useState) => {\n  const backLocation = useState().UI.parent;\n  dispatch(hideBackButton());\n  dispatch(setHeader({ header: parent }));\n  dispatch(setCompanion({ companion: null }));\n  dispatch(setChat(null));\n  backLocation === \"strangers\"\n    ? history.push(\"/\")\n    : history.push(`/${backLocation}`);\n};\n\nexport const sendVisit = (id) => (dispatch) => {\n  try {\n    api.post(`/look`, { id });\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const sendLike = (userId) => (dispatch, getState) => {\n  try {\n    api.post(`/like`, { id: userId });\n    const { likes } = getState().general;\n    const newLikes = [...likes, userId];\n    dispatch(saveNewState({ likes: newLikes }));\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport const removeLike = (userId) => (dispatch, getState) => {\n  try {\n    api.delete(`/like/${userId}`);\n    const { likes, matches, likedBy } = getState().general;\n    const newLikes = likes.filter((id) => id !== userId);\n    const newLikedBy = matches.includes(userId)\n      ? [...likedBy, userId]\n      : likedBy;\n    dispatch(saveNewState({ likes: newLikes, likedBy: newLikedBy }));\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nexport default UISlice.reducer;\n","const { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst inititalFilterState = {\n  username: \"\",\n  city: \"\",\n  country: \"\",\n  gender: \"\",\n  tags: [],\n  age: { minAge: 0, maxAge: 100 },\n  rating: { min: 0, max: 1 },\n};\n\nconst filterSlice = createSlice({\n  name: \"filter\",\n  initialState: inititalFilterState,\n  reducers: {\n    changeFilterState(state, { payload }) {\n      for (let key in payload) {\n        if ([\"username\", \"city\", \"country\", \"gender\", \"tags\"].includes(key)) {\n          state[key] = key === \"tags\" ? payload[key].value : payload[key];\n        } else if (key === \"age\") {\n          state.age.minAge = payload.age[0];\n          state.age.maxAge = payload.age[1];\n        } else if (key === \"rating\") {\n          state.rating.min = payload.rating[0];\n          state.rating.max = payload.rating[1];\n        } else {\n          throw new Error(`Key <<${key}>> is not allowed`);\n        }\n      }\n    },\n    resetFilter(state) {\n      state = { ...inititalFilterState };\n    },\n  },\n});\n\nexport const { changeFilterState, resetFilter } = filterSlice.actions;\n\nexport default filterSlice.reducer;\n","import { api } from \"../../axios\";\nimport { saveNewState } from \"../../store/generalSlice\";\nimport { unsanitaze, xssSanitize } from \"../../utils\";\n\nconst { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst initialAdditionalState = {\n  id: \"\",\n  email: \"\",\n  name: \"\",\n  surname: \"\",\n  username: \"\",\n  bio: \"\",\n  birthDate: 0,\n  gender: \"\",\n  phone: \"\",\n  country: \"\",\n  city: \"\",\n  maxDist: 0,\n  lookFor: \"\",\n  minAge: 0,\n  maxAge: 100,\n  tags: null,\n  useLocation: false,\n\n  emailValid: false,\n  usernameValid: false,\n  nameValid: false,\n  surnameValid: false,\n  bioValid: false,\n  countryValid: false,\n  cityValid: false,\n\n  updateSuccess: false,\n};\n\nconst additionalSlice = createSlice({\n  name: \"additional\",\n  initialState: initialAdditionalState,\n  reducers: {\n    setAdditionalState(state, { payload }) {\n      Object.keys(payload).forEach((key) => {\n        if ([\"name\", \"surname\", \"bio\", \"country\", \"city\"].includes(key)) {\n          const value = payload[key] || initialAdditionalState[key];\n          state[key] = unsanitaze(value);\n        } else {\n          state[key] = payload[key] || initialAdditionalState[key];\n        }\n      });\n    },\n    resetAdditionalState: () => initialAdditionalState,\n    changeEmail(state, { payload }) {\n      state.email = payload;\n    },\n    changeUsername(state, { payload }) {\n      state.username = payload;\n    },\n    changeName(state, { payload }) {\n      state.name = payload;\n    },\n    changeSurname(state, { payload }) {\n      state.surname = payload;\n    },\n    changeBio(state, { payload }) {\n      state.bio = payload;\n    },\n    changeBirthDate(state, { payload }) {\n      let date = new Date(payload).getTime();\n      if (!isNaN(date)) state.birthDate = date;\n    },\n    changeGender(state, { payload }) {\n      state.gender = payload;\n    },\n    changePhone(state, { payload }) {\n      state.phone = payload;\n    },\n    changeCountry(state, { payload }) {\n      state.country = payload;\n    },\n    changeCity(state, { payload }) {\n      state.city = payload;\n    },\n    changeMaxDist(state, { payload }) {\n      state.maxDist = +payload;\n    },\n    changeLookFor(state, { payload }) {\n      state.lookFor = payload;\n    },\n    changeSearchAgeRange(state, { payload }) {\n      state.minAge = payload[0];\n      state.maxAge = payload[1];\n    },\n    changeMinAge(state, { payload }) {\n      state.minAge = payload;\n    },\n    changeMaxAge(state, { payload }) {\n      state.maxAge = payload;\n    },\n    changeTags(state, { payload: { value } }) {\n      state.tags = value;\n    },\n    changeUseLocation(state, { payload }) {\n      state.useLocation = payload;\n    },\n\n    changeEmailValid(state, { payload }) {\n      state.emailValid = payload;\n    },\n    changeUsernameValid(state, { payload }) {\n      state.usernameValid = payload;\n    },\n    changeNameValid(state, { payload }) {\n      state.nameValid = payload;\n    },\n    changeSurnameValid(state, { payload }) {\n      state.surnameValid = payload;\n    },\n    changeBioValid(state, { payload }) {\n      state.bioValid = payload;\n    },\n    changePhoneValid(state, { payload }) {\n      state.phoneValid = payload;\n    },\n    changeCountryValid(state, { payload }) {\n      state.countryValid = payload;\n    },\n    changeCityValid(state, { payload }) {\n      state.cityValid = payload;\n    },\n    onUpdateSuccess(state) {\n      state.updateSuccess = true;\n    },\n    onUpdateFail(state) {\n      state.updateSuccess = false;\n    },\n  },\n});\n\nexport const {\n  setAdditionalState,\n  resetAdditionalState,\n\n  changeEmail,\n  changeUsername,\n  changeName,\n  changeSurname,\n  changeBio,\n  changeBirthDate,\n  changeGender,\n  changePhone,\n  changeCountry,\n  changeCity,\n  changeMaxDist,\n  changeLookFor,\n  changeSearchAgeRange,\n  changeTags,\n  changeUseLocation,\n\n  changeEmailValid,\n  changeUsernameValid,\n  changeNameValid,\n  changeSurnameValid,\n  changeBioValid,\n  changePhoneValid,\n  changeCountryValid,\n  changeCityValid,\n  onUpdateSuccess,\n  onUpdateFail,\n} = additionalSlice.actions;\n\nexport const updateInfo = (\n  {\n    id,\n    username,\n    name,\n    surname,\n    bio,\n    birthDate,\n    phone,\n    gender,\n    country,\n    city,\n    maxDist,\n    lookFor,\n    minAge,\n    maxAge,\n    tags,\n    useLocation,\n  } = {},\n  showNotif\n) => async (dispatch, getState) => {\n  const additionalState = getState().additional;\n  const generalState = getState().general;\n\n  const body = {\n    id: id || additionalState.id,\n    username: username || additionalState.username,\n    name: xssSanitize(name) || additionalState.name,\n    surname: xssSanitize(surname) || additionalState.surname,\n    bio: xssSanitize(bio) || additionalState.bio,\n    phone: phone || additionalState.phone,\n    birthDate: birthDate || additionalState.birthDate,\n    gender: gender || additionalState.gender,\n    country: xssSanitize(country) || additionalState.country,\n    city: xssSanitize(city) || additionalState.city,\n    maxDist: maxDist || additionalState.maxDist,\n    lookFor: lookFor || additionalState.lookFor,\n    minAge: minAge || additionalState.minAge,\n    maxAge: maxAge || additionalState.maxAge,\n    useLocation: useLocation || additionalState.useLocation,\n  };\n  if (generalState.position.lat !== 0 && generalState.position.lon !== 0) {\n    body.position = generalState.position;\n  }\n  // console.log(\n  //   \"[AdditionalInfoSlice] update user info\",\n  //   additionalState,\n  //   generalState,\n  //   body\n  // );\n  if (!body.id) {\n    // if didn't get self info yet - try lo send updated info later\n    setTimeout(() => dispatch(updateInfo(body)), 1000);\n    return;\n  }\n  let message;\n  try {\n    if (additionalState.email !== generalState.email) {\n      api.put(\"email/change\", {\n        email: additionalState.email,\n      });\n    }\n    const response = await api.put(\"account\", body);\n    if (tags && tags.length) {\n      const tagsResponse = await api.put(\"tag\", { tags: [...tags] });\n      console.log(\"TAGS\", tagsResponse);\n      if (tagsResponse.data.status) {\n        dispatch(saveNewState({ tags }));\n      }\n    }\n\n    console.log(response.data.data);\n    if (response.data.status) {\n      dispatch(saveNewState(body));\n      dispatch(onUpdateSuccess());\n      showNotif && showNotif(\"Successfully saved!\", \"success\");\n      return;\n    } else {\n      message = response.data;\n    }\n  } catch (e) {\n    console.log(e);\n    message = \"Server error\";\n  }\n  showNotif && showNotif(message, \"error\");\n  dispatch(onUpdateFail());\n};\n\nexport default additionalSlice.reducer;\n","import { v4 as uuid } from \"uuid/dist\";\n\nexport const CONSTANTS = {\n  WS: {\n    CHAT: \"CHAT\",\n    MESSAGE: \"MESSAGE\",\n    UPDATE: \"UPDATE\",\n  },\n  CHAT_TYPES: {\n    NEW_CHAT: \"NEW_CHAT\",\n    DELETE_CHAT: \"DELETE_CHAT\",\n  },\n  UPDATE_TYPES: {\n    USER_STATUS_UPDATE: \"USER_STATUS_UPDATE\",\n    NEW_LIKE: \"NEW_LIKE\",\n    NEW_LOOK: \"NEW_LOOK\",\n    NEW_MATCH: \"NEW_MATCH\",\n    DELETE_MATCH: \"DELETE_MATCH\",\n    DELETE_LIKE: \"DELETE_LIKE\",\n  },\n  UPDATE_STATUS: {\n    NEW: \"UPDATE_STATUS_NEW\",\n    READ: \"UPDATE_STATUS_READ\",\n  },\n  MESSAGE_TYPES: {\n    NEW_MESSAGE: \"NEW_MESSAGE\",\n    UPDATE_MESSAGE: \"UPDATE_MESSAGE\",\n    DELETE_MESSAGE: \"DELETE_MESSAGE\",\n  },\n  MESSAGE_STATUS: {\n    STATUS_NEW: \"STATUS_NEW\",\n    STATUS_DELIVERED: \"STATUS_DELIVERED\",\n    STATUS_READ: \"STATUS_READ\",\n  },\n};\n\nexport class WSmessage {\n  constructor({ type, payload }) {\n    this.type = type;\n    this.payload = payload || null;\n  }\n}\n\nexport class Chat {\n  constructor({ id, userIds, messages }) {\n    this.id = id || \"\";\n    this.userIds = userIds;\n    this.messages = messages || [];\n  }\n}\n\nexport class Message {\n  constructor({ id, sender, recipient, date, text, chatId, status }) {\n    this.id = id || uuid();\n    this.chatId = chatId || \"\";\n    this.sender = sender;\n    this.recipient = recipient;\n    this.date = date || new Date().getTime();\n    this.text = text || \"\";\n    this.status = status;\n  }\n}\n\nexport class WSNotification {\n  constructor({ id, userId, type }) {\n    this.id = id || uuid();\n    this.date = new Date().getTime();\n    this.userId = userId;\n    this.type = type;\n    this.status = CONSTANTS.UPDATE_STATUS.NEW;\n  }\n\n  equals(obj) {\n    return (\n      this.id === obj.id && this.userId === obj.userId && this.type === obj.type\n    );\n  }\n}\n","const { createSlice } = require(\"@reduxjs/toolkit\");\n\nconst initialState = {\n  notifications: [],\n};\n\nconst snackSlice = createSlice({\n  name: \"snack\",\n  initialState,\n  reducers: {\n    addSnack(state, { payload }) {\n      state.notifications.push(payload);\n    },\n    dismissSnack(state, { payload }) {\n      state.notifications = state.notifications.map((notificaton) =>\n        payload.dismissAll || notificaton.key === payload.key\n          ? { ...notificaton, dismissed: true }\n          : notificaton\n      );\n    },\n    removeSnack(state, { payload }) {\n      state.notifications = state.notifications.filter(\n        (el) => el.key !== payload.key\n      );\n    },\n  },\n});\n\nexport const { addSnack, dismissSnack, removeSnack } = {\n  ...snackSlice.actions,\n};\n\nexport default snackSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { CONSTANTS, WSNotification } from \"../models/ws\";\n\nconst initialWSState = {\n  notifications: [],\n};\n\nconst WSSlice = createSlice({\n  name: \"WS\",\n  initialState: initialWSState,\n  reducers: {\n    resetWSSlice: () => initialWSState,\n    /**\n     * payload: WSNotification { id, userId, type, date? }\n     */\n    addNotification: (state, { payload }) => {\n      // some checks for development\n      if (!payload.notification) throw new Error(\"No notification in payload\");\n      if (!payload.notification.id) throw new Error(\"No id in payload\");\n      // check if notification is already there\n      if (\n        !state.notifications.length ||\n        !state.notifications.some(\n          (el) =>\n            el.id === payload.notification.id &&\n            el.userId === payload.notification.userId &&\n            el.type === payload.notification.type\n        )\n      )\n        state.notifications.push(new WSNotification(payload.notification));\n    },\n    /**\n     * payload: WSNotification { id, userId, type, date? }\n     */\n    removeNotification: (state, { payload }) => {\n      // some checks for development\n      if (!payload.notification) throw new Error(\"No notification in payload\");\n      if (!payload.notification.id) throw new Error(\"No id in payload\");\n      // check if notification is already there\n      const index = state.notifications.findIndex((el) =>\n        el.equals(payload.notification)\n      );\n      if (index !== -1)\n        return state.notifications.filter((_, idx) => idx !== index);\n    },\n    /**\n     * payload: { id }\n     */\n    readNotification: (state, { payload }) => {\n      // some checks for development\n      if (!payload.id) throw new Error(\"No id in payload\");\n      // check if notification is already there\n      const index = state.notifications.findIndex((el) => el.id === payload.id);\n      if (index !== -1) {\n        const updated = state.notifications[index];\n        updated.status = CONSTANTS.UPDATE_STATUS.READ;\n        const newNotifications = state.notifications\n          .slice(0, index)\n          .concat(updated)\n          .concat(state.notifications.slice(index + 1));\n        state.notifications = newNotifications;\n      }\n    },\n    readAllNotifications: (state) => {\n      state.notifications = state.notifications.map((notification) => ({\n        ...notification,\n        status: CONSTANTS.UPDATE_STATUS.READ,\n      }));\n    },\n  },\n});\n\nexport const {\n  resetWSSlice,\n  addNotification,\n  removeNotification,\n  readNotification,\n  readAllNotifications,\n} = WSSlice.actions;\nexport default WSSlice.reducer;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { api } from \"../axios\";\nimport { addAge, loadImages, prepareUsers } from \"../utils\";\nimport { resetGeneralState } from \"./generalSlice\";\nimport { resetUIState } from \"./UISlice\";\n\nconst initialUsersState = {\n  isLoading: false,\n  isUpdating: false,\n  error: null,\n  users: [],\n  strangers: [],\n  banned: null,\n};\n\nconst loadedIds = new Set();\n\nconst usersSlice = createSlice({\n  name: \"users\",\n  initialState: initialUsersState,\n  reducers: {\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    successLoading(state) {\n      state.isLoading = false;\n    },\n    failLoading(state, { payload }) {\n      state.isLoading = false;\n      state.error = payload;\n    },\n    /**\n     * Adds all users, filters already added users by id\n     * @param {State} state\n     * @param {action} {payload} - users to add\n     */\n    addUsers(state, { payload }) {\n      const users = [...payload];\n      if (!users.length) return;\n      users.forEach((user) => {\n        if (\n          Object.keys(user).length !== 0 &&\n          !state.users.find((el) => el.id === user.id)\n        ) {\n          state.users.push(user);\n        }\n      });\n    },\n    /**\n     * Run through all passed users and updates their info or addes new\n     * @param {State} state\n     * @param {action} {payload} - users to update\n     */\n    updateUsers(state, { payload }) {\n      const users = [...payload];\n      if (!users.length) return;\n      users.forEach((user) => {\n        const userInState = state.users.find((el) => user.id === el.id);\n        if (userInState) {\n          Object.keys(user).forEach((key) => {\n            if (\n              // prevent overwrite socket info - it could be got earlier than http request\n              (key === \"lastOnline\" && user[key] > userInState[key]) ||\n              (key === \"isOnline\" && userInState[key])\n            )\n              return;\n            userInState[key] = user[key];\n          });\n        } else {\n          state.users.push(user);\n        }\n      });\n    },\n    setUsersOnline(state, { payload }) {\n      const users = [...payload];\n      if (!users.length) return;\n      users.forEach((user) => {\n        const userInState = state.users.find((el) => user.id === el.id);\n        if (userInState) {\n          userInState.isOnline = user.isOnline;\n        }\n      });\n    },\n    sortStrangers(state, { payload }) {\n      const { compareFunction } = { ...payload };\n      state.strangers.sort(compareFunction);\n    },\n    /**\n     * Run through all passed strangers and updates their info or addes new\n     * @param {State} state\n     * @param {action} {payload} - users to update\n     */\n    updateStrangers(state, { payload }) {\n      const users = [...payload];\n      if (!users.length) return;\n      users.forEach((user) => {\n        const userInState = state.strangers.find((el) => user.id === el.id);\n        if (userInState) {\n          Object.keys(user).forEach((key) => {\n            userInState[key] = user[key];\n          });\n        }\n      });\n    },\n\n    setUsers(state, { payload }) {\n      state.users = payload;\n    },\n    setStrangers(state, { payload }) {\n      state.strangers = [...payload];\n    },\n    setBanned(state, { payload }) {\n      state.banned = payload;\n    },\n    startUpdating(state) {\n      state.isUpdating = true;\n    },\n    successUpdating(state) {\n      state.isUpdating = false;\n    },\n    failUpdating(state, { payload }) {\n      state.isUpdating = false;\n      state.error = payload;\n    },\n    resetError(state) {\n      state.error = null;\n    },\n    resetUsersState: () => initialUsersState,\n  },\n});\n\nconst getUserIds = (users) => users.map((user) => user.id);\n\nconst getStrangers = async (showNotif, queryParams = {}) => {\n  // console.log(queryParams, Object.entries(queryParams));\n  const params = Object.entries(queryParams).reduce((acc, [key, value]) => {\n    if (key === \"tags\") {\n      if (!value || value.length === 0) return acc;\n      const tags = value.reduce((curr, acc) => `${acc},${curr}`);\n      acc[key] = tags;\n      return acc;\n    } else if (key === \"age\") {\n      return { ...acc, minAge: value.minAge, maxAge: value.maxAge };\n    } else if (key === \"gender\") {\n      acc[key] = value;\n      return acc;\n    } else {\n      // ignore empty values and username (no api endpint)\n      if (value !== \"\" && key !== \"username\") acc[key] = value;\n      return acc;\n    }\n  }, {});\n  try {\n    const res = await api.get(\"strangers\", {\n      params,\n    });\n    if (res.data.status) {\n      // console.log(\"[userSlice] starngers\", res.data.data);\n      return res.data.data || [];\n    } else {\n      showNotif(res.data.data, \"error\");\n      if (res.data.data === \"incorrect session id\") {\n        return null;\n      }\n    }\n  } catch (e) {\n    showNotif(\"Server error\", \"error\");\n    console.log(e);\n  }\n  return [];\n};\n\n/**\n * Returns array of users not yet stored in redux\n * @param {Array<user>} users all users for loading\n */\nconst getUncashedUsers = (users) => {\n  if (loadedIds.length === 0) return users;\n  const uncashed = users.filter((user) => !loadedIds.has(user.id));\n  // console.log(uncashed);\n  return uncashed;\n};\n\n/**\n * Loads all strangers and saves to store\n * @param {function} showNotif cunsom hook to show notification\n */\nexport const loadStrangers = (showNotif, queryParams) => async (\n  dispatch,\n  getState\n) => {\n  dispatch(startLoading());\n  loadBanned(dispatch);\n  let strangers = await getStrangers(showNotif, queryParams);\n  if (!strangers) {\n    dispatch(resetGeneralState());\n    dispatch(resetUsersState());\n    dispatch(resetUIState());\n    return;\n  }\n\n  dispatch(successLoading());\n  dispatch(startUpdating());\n\n  strangers = strangers.map((stranger) => addAge(stranger));\n  // console.log(strangers);\n  dispatch(setStrangers(strangers));\n  dispatch(addUsers(strangers));\n  // console.log(strangers);\n\n  // load only those, who was not loaded before\n  const uncashed = getUncashedUsers(strangers);\n  let preparedUsers = await Promise.all(prepareUsers(uncashed));\n  // console.log(preparedUsers);\n  dispatch(updateUsers(preparedUsers));\n\n  // map fetched strangers to those we've already prepared\n  const allUsers = getState().users.users;\n  // console.log(allUsers);\n  const preparedStrangers = strangers\n    .map((user) => allUsers.find((u) => u.id === user.id))\n    .filter((el) => el !== null);\n  // console.log(preparedStrangers);\n  getUserIds(preparedStrangers).forEach((el) => loadedIds.add(el));\n  // console.log(loadedIds);\n  dispatch(setStrangers(preparedStrangers));\n\n  dispatch(successUpdating());\n};\n\n/**\n * Recieves arrays of strings, loads only uncashed ones\n * @param {Array<string>} users\n */\nexport const loadUsers = (users) => async (dispatch) => {\n  if (!users) return;\n  const notYetLoaded = [...users].filter((id) => !loadedIds.has(id));\n  // console.log(notYetLoaded, loadedIds);\n\n  try {\n    const promises = notYetLoaded.map((el) => api(`/data/${el}`));\n    let resolvedPromises = await Promise.allSettled(promises);\n    // console.log(resolvedPromises);\n    const userPromises = resolvedPromises\n      .filter((el) => el.status === \"fulfilled\")\n      .filter((el) => el.value.data.status)\n      .map(async (el) => await loadImages(el.value.data.data));\n    const loadedUsers = await Promise.all(userPromises);\n    // console.log(loadedUsers);\n    const preparedUsers = loadedUsers.map((user) => user && addAge(user));\n    if (!preparedUsers.length) return;\n    // console.log(\"loadedUsers\", loadedUsers);\n    getUserIds(preparedUsers).forEach((el) => loadedIds.add(el));\n    // console.log(loadedIds);\n    dispatch(updateUsers(preparedUsers));\n  } catch (e) {\n    console.log(e);\n    throw new Error(\"Fetching users failed\");\n  }\n};\n\nexport const checkAndUpdateUsers = (users) => async (dispatch, getState) => {\n  const allUsers = getState().users.users;\n  const needLoading = [];\n  users.forEach((user) => {\n    const userInState = allUsers.find((el) => el.id === user.id);\n    // console.log(user);\n    if (!userInState || !userInState.username) needLoading.push(user.id);\n  });\n  // console.log(needLoading);\n  needLoading.length && dispatch(loadUsers(needLoading));\n  dispatch(updateUsers(users));\n  dispatch(updateStrangers(users));\n};\n\nconst loadBanned = async (dispatch) => {\n  try {\n    const res = await api(\"ban\");\n    if (res.data.status) {\n      const data = res.data.data || [];\n      dispatch(loadUsers(data));\n      dispatch(setBanned(data));\n    }\n  } catch (e) {}\n};\n\nexport const {\n  startLoading,\n  successLoading,\n  addUsers,\n  setUsers,\n  setBanned,\n  updateUsers,\n  updateStrangers,\n  setUsersOnline,\n  sortStrangers,\n  setStrangers,\n  failLoading,\n  startUpdating,\n  successUpdating,\n  failUpdating,\n  resetError,\n  resetUsersState,\n} = usersSlice.actions;\n\nexport default usersSlice.reducer;\n","import { useDispatch } from \"react-redux\";\nimport { addSnack } from \"../store/snackSlice\";\nimport { v4 as uuid } from \"uuid/dist\";\nimport { CONSTANTS } from \"../models/ws\";\nimport { addNotification } from \"../store/WSSlice\";\nimport { WSNotification } from \"../models/ws\";\nimport { addGeneralValues, removeGeneralValues } from \"../store/generalSlice\";\nimport { checkAndUpdateUsers } from \"../store/usersSlice\";\n\nexport const useNotifications = () => {\n  const dispatch = useDispatch();\n\n  const handleNotification = (wsNotification) => {\n    console.log(\"[useNotifications] handleNotification\", wsNotification);\n    if (\n      wsNotification.type === CONSTANTS.UPDATE_TYPES.NEW_LIKE ||\n      wsNotification.type === CONSTANTS.UPDATE_TYPES.NEW_LOOK ||\n      wsNotification.type === CONSTANTS.UPDATE_TYPES.NEW_MATCH ||\n      wsNotification.type === CONSTANTS.UPDATE_TYPES.DELETE_MATCH ||\n      wsNotification.type === CONSTANTS.UPDATE_TYPES.DELETE_LIKE\n    ) {\n      const newWSNotification = new WSNotification({\n        type: wsNotification.type,\n        userId: wsNotification.payload.userId,\n      });\n      // console.log(newWSNotification);\n      dispatch(addNotification({ notification: newWSNotification }));\n      dispatch(checkAndUpdateUsers([{ id: wsNotification.payload.userId }]));\n    }\n    switch (wsNotification.type) {\n      case CONSTANTS.UPDATE_TYPES.NEW_LIKE:\n        console.log(\"[useNotifications] NEW_LIKE\", wsNotification);\n        dispatch(\n          addGeneralValues({\n            key: \"likedBy\",\n            values: [wsNotification.payload.userId],\n          })\n        );\n        return;\n      case CONSTANTS.UPDATE_TYPES.NEW_LOOK:\n        dispatch(\n          addGeneralValues({\n            key: \"lookedBy\",\n            values: [wsNotification.payload.userId],\n          })\n        );\n        return;\n      case CONSTANTS.UPDATE_TYPES.NEW_MATCH:\n        dispatch(\n          addGeneralValues({\n            key: \"matches\",\n            values: [wsNotification.payload.userId],\n          })\n        );\n        dispatch(\n          removeGeneralValues({\n            key: \"likedBy\",\n            values: [wsNotification.payload.userId],\n          })\n        );\n        return;\n      case CONSTANTS.UPDATE_TYPES.DELETE_LIKE:\n        dispatch(\n          removeGeneralValues({\n            key: \"likedBy\",\n            values: [wsNotification.payload.userId],\n          })\n        );\n        return;\n      case CONSTANTS.UPDATE_TYPES.DELETE_MATCH:\n        dispatch(\n          removeGeneralValues({\n            key: \"matches\",\n            values: [wsNotification.payload.userId],\n          })\n        );\n        return;\n      default:\n        return;\n    }\n  };\n\n  const notif = (message, variant, options = {}) => {\n    dispatch(\n      addSnack({\n        key: uuid(),\n        text: message.text || message,\n        header: message.header,\n        variant: variant || \"default\",\n        options: { ...options, autoHideDuration: 3000 },\n      })\n    );\n  };\n\n  const showPrompt = (message, options = {}) => {\n    dispatch(\n      addSnack({\n        key: \"message_\" + uuid(),\n        text: message.text || message,\n        header: message.header,\n        variant: \"prompt\",\n        options: { ...options, persist: true },\n      })\n    );\n  };\n  return { notif, handleNotification, showPrompt };\n};\n","import { useDispatch, useSelector, useStore } from \"react-redux\";\nimport { chatApi } from \"../axios\";\nimport { Chat, CONSTANTS, Message, WSmessage } from \"../models/ws\";\nimport {\n  addChat,\n  setChats,\n  deleteChat,\n  addMessage,\n  updateMessage,\n  deleteMessage,\n  setChatByUserId,\n} from \"../store/chatSlice\";\nimport { useNotifications } from \"./useNotifications\";\nimport { send } from \"./useWS.hook\";\n\nexport const useChat = () => {\n  const myId = useSelector((state) => state.general.id);\n  const dispatch = useDispatch();\n  const { chat } = useSelector((state) => state.chat);\n  const { notif } = useNotifications();\n  const store = useStore();\n\n  const getChatsInfo = async () => {\n    try {\n      const res = await chatApi(\"chats\", {\n        params: { id: myId },\n      });\n      // console.log(\"[getChatsInfo]\", res);\n      if (res.data.status) {\n        dispatch(setChats(res.data.data));\n      }\n    } catch (e) {}\n  };\n  /**\n   * Creates chat\n   * @param {string} userId user id to chat with\n   */\n  const createChat = async (userId) => {\n    // console.log(\"newChat\");\n    const chat = new Chat({ userIds: [userId, myId] });\n    try {\n      const res = await chatApi.post(\"chat\", chat);\n      // console.log(res.data);\n      if (res.data.status) {\n        await getChatsInfo();\n      }\n      return res.data.data;\n    } catch (e) {\n      notif(\"Server error when creating chat\", \"error\");\n      return null;\n    }\n  };\n\n  const selectChat = (userId) => {\n    // console.log(\"[selectChat]\");\n    dispatch(setChatByUserId({ id: userId }));\n  };\n\n  const handleChat = (wsMessage) => {\n    console.log(\"[hadleChat]\", wsMessage);\n    if (wsMessage.type === CONSTANTS.CHAT_TYPES.NEW_CHAT) {\n      dispatch(addChat(wsMessage.payload));\n    } else if (wsMessage.type === CONSTANTS.CHAT_TYPES.DELETE_CHAT) {\n      dispatch(deleteChat(wsMessage.payload));\n    }\n  };\n\n  const showNotif = (message) => {\n    const users = store.getState().users?.users;\n    const pathMatch = window.location.pathname.match(message.chatId);\n    if (pathMatch && pathMatch[0] !== \"\") return;\n    const user = users && users.find((user) => user.id === message.sender);\n    const username = user ? `${user.username}` : \"new message\";\n    notif({ header: username, text: message.text });\n  };\n\n  const handleMessage = (wsMessage) => {\n    // console.log(\"[hadleChat]\", wsMessage);\n    if (wsMessage.type === CONSTANTS.MESSAGE_TYPES.NEW_MESSAGE) {\n      dispatch(addMessage(wsMessage.payload));\n      showNotif(wsMessage.payload);\n    } else if (wsMessage.type === CONSTANTS.MESSAGE_TYPES.UPDATE_MESSAGE) {\n      dispatch(updateMessage(wsMessage.payload));\n    } else if (wsMessage.type === CONSTANTS.MESSAGE_TYPES.DELETE_MESSAGE) {\n      dispatch(deleteMessage(wsMessage.payload));\n    }\n  };\n\n  const newMsg = (recipient, text) => {\n    const message = new Message({\n      chatId: chat,\n      sender: myId,\n      recipient,\n      text,\n      status: CONSTANTS.MESSAGE_STATUS.STATUS_NEW,\n    });\n    const wsMessage = new WSmessage({\n      type: CONSTANTS.MESSAGE_TYPES.NEW_MESSAGE,\n      payload: message,\n    });\n    send(CONSTANTS.WS.MESSAGE, wsMessage);\n  };\n\n  const readMsg = (payload) => {\n    const message = {\n      ...payload,\n      status: CONSTANTS.MESSAGE_STATUS.STATUS_READ,\n    };\n    dispatch(updateMessage(message));\n    const wsMessage = new WSmessage({\n      type: CONSTANTS.MESSAGE_TYPES.UPDATE_MESSAGE,\n      payload: message,\n    });\n    send(CONSTANTS.WS.MESSAGE, wsMessage);\n  };\n\n  const updateMsg = (payload) => {\n    const message = {\n      ...payload,\n      status: CONSTANTS.MESSAGE_STATUS.STATUS_READ,\n    };\n    const wsMessage = new WSmessage({\n      type: CONSTANTS.MESSAGE_TYPES.UPDATE_MESSAGE,\n      payload: message,\n    });\n    send(CONSTANTS.WS.MESSAGE, wsMessage);\n  };\n\n  return {\n    getChatsInfo,\n    createChat,\n    selectChat,\n\n    handleChat,\n    handleMessage,\n\n    newMsg,\n    readMsg,\n    updateMsg,\n  };\n};\n","import { useChat } from \"./useChat.hook\";\nimport { io } from \"socket.io-client\";\nimport { useSelector } from \"react-redux\";\nimport { CONSTANTS } from \"../models/ws\";\nimport { useEffect } from \"react\";\nimport { useOnline } from \"./useOnline.hook\";\nimport { useNotifications } from \"./useNotifications\";\n\n// const ip = \"192.168.43.151\";\nconst ip = \"localhost\";\nconst local = true;\nconst host = local ? ip : \"aim-love.ga\";\nconst port = 8080;\nconst url = local ? `ws://${host}:${port}` : `wss://${host}`;\nlet socket = null;\nlocalStorage.debug = \"*\";\n\nconst newConnection = (id) => {\n  return io(url, {\n    path: \"/api/socket/connect\",\n    withCredentials: true,\n    reconnection: false,\n    query: {\n      auth: id,\n    },\n  });\n};\n\nexport const WSdisconnect = () => {\n  socket.disconnect();\n};\n\nexport const checkStatusAndReconnect = () => {\n  if (!socket || socket.readyState !== socket.OPEN) {\n    socket = newConnection();\n  }\n};\n\nexport const useWS = () => {\n  const id = useSelector((state) => state.general.id);\n  const { handleMessage, handleChat } = useChat();\n  const { handleNotification } = useNotifications();\n  const { updateOnline } = useOnline();\n\n  useEffect(() => {\n    socket = newConnection(id);\n    socket.on(\"connect\", () => {\n      console.log(\"[open] Соединение установлено\");\n\n      if (socket.disconnected) {\n        console.log(\"socket disconnected\");\n      }\n    });\n\n    socket.on(CONSTANTS.WS.CHAT, (message) => {\n      const json = JSON.parse(message);\n      handleChat(json);\n    });\n\n    socket.on(CONSTANTS.WS.MESSAGE, (message) => {\n      const json = JSON.parse(message);\n      handleMessage(json);\n    });\n\n    socket.on(CONSTANTS.WS.UPDATE, (message) => {\n      const json = JSON.parse(message);\n      if (json.type === CONSTANTS.UPDATE_TYPES.USER_STATUS_UPDATE)\n        updateOnline(json.payload);\n      else handleNotification(json);\n    });\n\n    socket.onAny((event, ...args) => {\n      console.log(`got ${event}`);\n      console.log(args);\n    });\n\n    socket.on(\"disconnect\", (reason) => {\n      console.log(`[disconnect] ${reason}`);\n      if (reason !== \"io client disconnect\") socket.connect();\n    });\n\n    socket.on(\"close\", (reason) => {\n      console.log(`[close] ${reason}`);\n    });\n\n    socket.on(\"error\", (error) => {\n      console.log(error);\n      socket.connect();\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return socket;\n};\n\nexport const send = (type, payload) => {\n  console.log(JSON.stringify(payload));\n\n  socket.emit(type, JSON.stringify(payload));\n};\n","import { useDispatch, useStore } from \"react-redux\";\nimport { setCompanion } from \"../store/UISlice\";\nimport { checkAndUpdateUsers } from \"../store/usersSlice\";\n\nexport const useOnline = () => {\n  const store = useStore();\n  const dispatch = useDispatch();\n\n  const getOnlineUsers = () => {\n    const users = store.getState().users?.users;\n    if (!users) return [];\n    const online = users.filter((user) => user.isOnline);\n    // console.log(\"[useOnline] getonlineUsers\", online);\n    return online;\n  };\n\n  const updateOnline = ({ userId, isOnline }) => {\n    // console.log(\"[useOnline] updateOnline\", userId, isOnline);\n    const user = { id: userId, isOnline, lastOnline: new Date().getTime() };\n    dispatch(checkAndUpdateUsers([user]));\n\n    const companion = store.getState().UI.companion;\n    if (!companion || companion.id !== userId) return;\n    dispatch(setCompanion({ companion: { ...companion, isOnline } }));\n  };\n\n  return { getOnlineUsers, updateOnline };\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { api } from \"../axios\";\nimport { getCookie, prepareUsers, unsanitaze, xssSanitize } from \"../utils\";\nimport { resetUIState, setIsInfoMissing } from \"./UISlice\";\nimport { resetFilter } from \"../components/Filter/filterSlice\";\nimport { setAdditionalState } from \"../pages/AdditionalInfo/additionalSlice\";\nimport { WSdisconnect } from \"../hooks/useWS.hook\";\n\nconst initialGeneralState = {\n  isAuth: false,\n  isLoading: false,\n  id: \"\",\n  email: \"\",\n  phone: \"\",\n  name: \"\",\n  surname: \"\",\n  username: \"\",\n  bio: \"\",\n  birthDate: 0,\n  gender: \"\",\n  country: \"\",\n  city: \"\",\n  maxDist: 0,\n  lookFor: \"\",\n  minAge: 0,\n  maxAge: 0,\n  images: [],\n  avatar: null,\n  useLocation: null,\n  likedBy: [],\n  matches: [],\n  likes: [],\n  position: { lat: 0, lon: 0 },\n};\n\nconst generalSlice = createSlice({\n  name: \"general\",\n  initialState: initialGeneralState,\n  reducers: {\n    startLoading(state) {\n      state.isLoading = true;\n    },\n    stopLoading(state) {\n      state.isLoading = false;\n    },\n    authSuccess(state) {\n      state.isAuth = true;\n      state.isLoading = false;\n    },\n    authFail(state) {\n      state.isAuth = false;\n      state.isLoading = false;\n    },\n    resetGeneralState: (state) => {\n      state.images &&\n        state.images.forEach((el) => URL.revokeObjectURL(el.image));\n      return initialGeneralState;\n    },\n    setNewState(state, { payload }) {\n      Object.keys(payload).forEach((key) => {\n        if (key === \"position\") {\n          if (payload.position.lat) state.position.lat = payload.position.lat;\n          if (payload.position.lon) state.position.lon = payload.position.lon;\n        } else if (key === \"images\" && payload.images) {\n          state.images = [...payload.images];\n        } else if (\n          [\"name\", \"surname\", \"bio\", \"country\", \"city\"].includes(key)\n        ) {\n          state[key] = unsanitaze(payload[key]);\n        } else {\n          state[key] = payload[key];\n        }\n      });\n    },\n    addGeneralValues(state, { payload }) {\n      console.log(payload);\n      if (!payload.key || !payload.values)\n        throw new Error(\"[addGeneralValues] no key or value in payload\");\n      const stateValues = state[payload.key];\n      const updatedValues = [...stateValues, ...payload.values];\n      // console.log(stateValues, updatedValues);\n      state[payload.key] = [...new Set(updatedValues)];\n    },\n    removeGeneralValues(state, { payload }) {\n      console.log(payload);\n      if (!payload.key || !payload.values)\n        throw new Error(\"[addGeneralValues] no key or value in payload\");\n      state[payload.key] =\n        state[payload.key].filter((el) => !payload.values.includes(el)) || [];\n    },\n  },\n});\n\nexport const {\n  startLoading,\n  stopLoading,\n  authSuccess,\n  authFail,\n  resetGeneralState,\n  setNewState,\n  addGeneralValues,\n  removeGeneralValues,\n} = generalSlice.actions;\n\nconst updateSelfInfo = async (data, dispatch) => {\n  // console.log(data);\n  dispatch(saveNewState(data.data));\n  dispatch(authSuccess());\n  dispatch(setAdditionalState(data.data));\n  try {\n    const user = await Promise.resolve(prepareUsers([data.data])[0]);\n    const myLikes = await api.get(\"like\");\n    user.likes = myLikes.data.status ? myLikes.data.data : [];\n    // console.log(user);\n    if (user) {\n      dispatch(saveNewState(user));\n      dispatch(setAdditionalState(user));\n    }\n  } catch (e) {}\n};\n\nexport const checkInfo = (info) => {\n  let isInfoMissing = false;\n  let isAgeRangeMissing = false;\n  Object.keys(info).forEach((key) => {\n    // skip these keys\n    if (\n      [\n        \"tags\",\n        \"position\",\n        \"lookedBy\",\n        \"likedBy\",\n        \"matches\",\n        \"avatar\",\n        \"images\",\n        \"useLocation\",\n      ].indexOf(key) !== -1\n    )\n      return;\n    // check if ageRange is default\n    if (key === \"minAge\" || key === \"maxAge\") {\n      isAgeRangeMissing =\n        info[\"maxAge\"] === initialGeneralState[\"maxAge\"] &&\n        info[\"minAge\"] === initialGeneralState[\"minAge\"];\n    } else {\n      isInfoMissing = isInfoMissing || info[key] === initialGeneralState[key];\n    }\n  });\n  // console.log(isInfoMissing, isAgeRangeMissing);\n  return isInfoMissing || isAgeRangeMissing;\n};\n\nexport const checkAuth = () => async (dispatch) => {\n  try {\n    if (!getCookie(\"session_id\")) {\n      return;\n    }\n    dispatch(startLoading());\n    const res = await api(\"account\");\n    if (res.data.status) {\n      await updateSelfInfo(res.data, dispatch);\n    } else {\n      dispatch(authFail());\n    }\n  } catch (e) {\n    dispatch(authFail());\n  }\n};\n\nexport const saveNewState = (payload) => (dispatch) => {\n  let isInfoMissing = checkInfo(payload);\n  dispatch(setIsInfoMissing(isInfoMissing));\n  dispatch(setNewState(payload));\n};\n\nexport const auth = (email, password, showNotif) => async (\n  dispatch,\n  getState\n) => {\n  dispatch(startLoading());\n  const position = getState().general.position;\n  try {\n    const body = {\n      email: xssSanitize(email),\n      password: xssSanitize(password),\n    };\n    if (position.lat) body.useLocation = true;\n    const params =\n      position.lat === 0 || position.lon === 0\n        ? {}\n        : {\n            headers: {\n              latitude: position.lat,\n              longitude: position.lon,\n            },\n          };\n    const res = await api.post(\"/signin\", body, params);\n    if (res.data.status) {\n      updateSelfInfo(res.data, dispatch);\n    } else {\n      dispatch(authFail());\n      dispatch(resetGeneralState());\n      showNotif(res.data.data, \"error\");\n    }\n  } catch (err) {\n    // console.log(err);\n    dispatch(authFail());\n    showNotif(\"Server error\", \"error\");\n  }\n};\n\nexport const logout = (showNotif) => async (dispatch) => {\n  dispatch(startLoading());\n  WSdisconnect();\n  try {\n    const res = await api.delete(\"/signout\");\n    if (res.data.status) {\n      showNotif(\"Successful logout\", \"success\");\n      dispatch(resetGeneralState());\n      dispatch(resetUIState());\n      dispatch(resetFilter());\n    } else {\n      throw new Error(res.data.data);\n    }\n  } catch (e) {\n    dispatch(stopLoading());\n    showNotif(\"Server error\", \"error\");\n  }\n};\n\nexport const deleteAccount = (showNotif) => async (dispatch) => {\n  try {\n    const res = await api.delete(\"account\");\n    console.log(res.data);\n    if (res.data.status) {\n      showNotif(\"Account successfully deleted\", \"success\");\n      dispatch(resetGeneralState());\n      dispatch(resetUIState());\n      dispatch(resetFilter());\n    } else {\n      throw new Error(res.data.data);\n    }\n  } catch (e) {\n    dispatch(stopLoading());\n    showNotif(e, \"error\");\n  }\n};\n\nexport default generalSlice.reducer;\n","import { Grid, makeStyles, TextField } from \"@material-ui/core\";\nimport { Autocomplete } from \"@material-ui/lab\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTags } from \"../../hooks/useTags.hook\";\n\nconst useStyles = makeStyles({\n  Container: {\n    width: \"100%\",\n  },\n});\n\nconst TagInput = (props) => {\n  const classes = useStyles();\n  const { tags } = useTags();\n  const [allTags, setAllTags] = useState([]);\n\n  useEffect(() => {\n    setAllTags(tags);\n  }, [tags]);\n\n  return (\n    <Grid className={classes.Container}>\n      {allTags && (\n        <Autocomplete\n          multiple\n          freeSolo\n          id={props.name}\n          options={allTags}\n          getOptionLabel={(option) => option}\n          defaultValue={props.tags}\n          value={props.tags}\n          onChange={(e, value, reason) => props.onChange({ value })}\n          filterSelectedOptions\n          renderInput={(params) => (\n            <TextField\n              {...params}\n              variant=\"outlined\"\n              label=\"Tags\"\n              placeholder=\"Enter tag and press enter\"\n            />\n          )}\n        />\n      )}\n    </Grid>\n  );\n};\n\nexport default TagInput;\n","import { useEffect, useState } from \"react\";\nimport { api } from \"../axios\";\n\nexport const useTags = () => {\n  const [tags, setTags] = useState([]);\n\n  const fetchTags = async (offset = 0, limit = 10) => {\n    const res = await api(\"tag\", { params: { offset, limit } });\n    // console.log(res.data);\n    if (res.data.status && res.data.data) {\n      setTags(res.data.data);\n    }\n  };\n\n  useEffect(() => {\n    fetchTags();\n  }, []);\n\n  const addTags = (newTags) => {\n    const tagsSet = new Set([...tags, ...newTags]);\n    setTags([...tagsSet]);\n  };\n\n  const removeTags = (oldTags) => {\n    const filtered = tags.filter((tag) => !oldTags.find((el) => el === tag));\n    setTags(filtered);\n  };\n\n  return { tags, fetchTags, addTags, removeTags };\n};\n","import React, { useEffect, useState } from \"react\";\nimport {\n  MenuItem,\n  TextField,\n  Box,\n  Slider,\n  Typography,\n  makeStyles,\n  Grid,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n} from \"@material-ui/core\";\nimport PropTypes from \"prop-types\";\nimport TagInput from \"../TagInput/TagInput\";\nimport { capitalize } from \"lodash\";\n\nconst useStyles = makeStyles({\n  ButtonListItem: {\n    justifyContent: \"center\",\n  },\n  Input: {\n    width: \"100%\",\n  },\n  SmallSelector: {\n    minWidth: \"100px\",\n    padding: \"10px\",\n  },\n  FormControl: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"flex-start\",\n  },\n  RadioGroup: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\",\n  },\n});\n\nconst getDate = (timestamp) => {\n  const now = new Date();\n  const date =\n    timestamp > now.getTime() + 1000 * 60 * 60 * 24 ? now : new Date(timestamp);\n  let year = date.getFullYear();\n  if (year < 10) year = \"000\" + year;\n  else if (year < 100) year = \"00\" + year;\n  else if (year < 1000) year = \"0\" + year;\n  let month = date.getMonth() + 1;\n  month = month < 10 ? \"0\" + month : \"\" + month;\n  let day = date.getDate();\n  day = day < 10 ? \"0\" + day : \"\" + day;\n  const formattedDate = `${year}-${month}-${day}`;\n  return formattedDate;\n};\n\n/**\n * checks *value* based on *rule* if input was *touched*\n * @param {string} value checked value\n * @param {regex} rule rule to match value\n * @param {boolean} touched flag to check if input was already focused\n */\nconst validate = (value, rule, touched) => {\n  return touched\n    ? value.length >= rule.minLength &&\n        value.length <= rule.maxLength &&\n        value.match(rule.regex)\n    : true;\n};\n\nconst Input = (props) => {\n  const classes = useStyles();\n  const {\n    type,\n    label,\n    name,\n    values,\n    value,\n    onValidate,\n    onChange,\n    rules,\n    ignoreUntouched, //defaults to false if not passed explictly\n    ...rest\n  } = {\n    ...props,\n  };\n  const [touched, setTouched] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorText, setErrorText] = useState(\"\");\n\n  const { helperText, rule } = rules\n    ? { ...rules }\n    : { ...{ helperText: \"\", rule: null } };\n\n  useEffect(() => {\n    let error;\n    // check *touched* only if *ignoreUntouched* is false\n    error = rule ? !validate(value, rule, ignoreUntouched || touched) : false;\n    // update error message\n    error ? setErrorText(helperText) : setErrorText(\"\");\n    // update inputValid state in Redux\n    onValidate && onValidate((ignoreUntouched || touched) && !error);\n    setError(error);\n  }, [value, rule, touched, helperText, onValidate, ignoreUntouched]);\n\n  switch (type) {\n    case \"text\":\n    case \"number\":\n    case \"email\":\n    case \"password\":\n      return (\n        <TextField\n          id={name}\n          error={error}\n          helperText={errorText}\n          type={type}\n          label={label}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onFocus={() => setTouched(true)}\n          onChange={(e) => onChange(e)}\n          {...rest}\n        />\n      );\n    case \"select\":\n      return (\n        <TextField\n          id={name}\n          key={name}\n          label={label}\n          value={value}\n          name={name}\n          className={classes.Input}\n          onChange={(e) => onChange(e)}\n          select\n          {...rest}\n        >\n          {values.map((e) => (\n            <MenuItem key={e} value={e}>\n              {e}\n            </MenuItem>\n          ))}\n        </TextField>\n      );\n    case \"radio\":\n      return (\n        <FormControl\n          className={classes.FormControl}\n          key={name}\n          component=\"fieldset\"\n        >\n          <FormLabel component=\"legend\">{capitalize(label)}</FormLabel>\n          <RadioGroup\n            className={classes.RadioGroup}\n            value={value}\n            aria-label={name}\n            name={name}\n            onChange={(e) => onChange(e)}\n          >\n            {values.map((el) => (\n              <FormControlLabel\n                key={el}\n                value={el}\n                control={<Radio checked={value === el} color=\"primary\" />}\n                label={capitalize(el)}\n              />\n            ))}\n          </RadioGroup>\n        </FormControl>\n      );\n    case \"date\":\n      return (\n        <TextField\n          id={name}\n          type=\"date\"\n          label=\"Birth Date\"\n          name={name}\n          className={classes.Input}\n          InputLabelProps={{ shrink: true }}\n          value={getDate(value)}\n          onChange={(e) => onChange(e)}\n          {...rest}\n        />\n      );\n    case \"slider\":\n      return (\n        <Box className={classes.Input}>\n          <Typography id=\"range-slider\" gutterBottom>\n            {label}\n          </Typography>\n          <Slider\n            value={value}\n            onChange={(e, value) => onChange(value)}\n            valueLabelDisplay=\"auto\"\n            aria-labelledby=\"range-slider\"\n            {...rest}\n          />\n        </Box>\n      );\n    case \"doubleSelector\":\n      return (\n        <Box key={name} className={classes.Input}>\n          <Grid container justify=\"space-evenly\" alignItems=\"center\">\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={\"min\" + name}\n                type=\"number\"\n                value={value.minAge}\n                label=\"Minimum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ minAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n            <Grid item xs={4}>\n              <TextField\n                shrink\n                id={\"max\" + name}\n                type=\"number\"\n                value={value.maxAge}\n                label=\"Maximum age\"\n                className={classes.SmallSelector}\n                onChange={(e) => onChange({ maxAge: +e.target.value })}\n                {...rest}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n      );\n    case \"autocomplete\":\n      return (\n        <TagInput\n          name={name}\n          className={classes.Input}\n          tags={values}\n          onChange={onChange}\n          {...rest}\n        />\n      );\n    default:\n      return null;\n  }\n};\n\nInput.propTypes = {\n  type: PropTypes.oneOf([\n    \"text\",\n    \"number\",\n    \"password\",\n    \"email\",\n    \"select\",\n    \"date\",\n    \"radio\",\n    \"slider\",\n    \"doubleSelector\",\n    \"autocomplete\",\n  ]).isRequired,\n  label: PropTypes.string,\n  name: PropTypes.string,\n  values: PropTypes.array,\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.array,\n    PropTypes.exact({\n      minAge: PropTypes.number,\n      maxAge: PropTypes.number,\n    }),\n  ]),\n  onValidate: PropTypes.func,\n  onChange: PropTypes.func.isRequired,\n  rules: PropTypes.exact({\n    rule: PropTypes.exact({\n      minLength: PropTypes.number,\n      maxLength: PropTypes.number,\n      regex: PropTypes.any,\n    }),\n    helperText: PropTypes.string,\n  }),\n};\n\nexport default Input;\n","import React from \"react\";\nimport { Button, Fab, List, ListItem, makeStyles } from \"@material-ui/core\";\nimport Input from \"../Input/Input\";\n\nconst useStyles = makeStyles({\n  Form: {\n    width: \"100%\",\n  },\n  Button: {\n    margin: \"8px\",\n  },\n  List: {\n    width: \"100%\",\n  },\n  Buttons: {\n    width: \"100%\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  Fab: {\n    position: \"fixed\",\n    right: \"10vw\",\n    bottom: \"4rem\",\n    zIndex: 2,\n  },\n});\n\nconst Form = ({ inputs, buttons }) => {\n  const classes = useStyles();\n\n  return (\n    <form className={classes.Form}>\n      <List className={classes.List}>\n        {inputs.map((el) => (\n          <ListItem key={el.name || el.type}>\n            <Input {...el} />\n          </ListItem>\n        ))}\n        {buttons && (\n          <ListItem className={classes.Buttons}>\n            {buttons.map(\n              ({ component, variant, type, text, onClick, ...others }) =>\n                component === \"fab\" ? (\n                  <Fab\n                    color=\"primary\"\n                    key={text}\n                    className={classes.Fab}\n                    variant={variant}\n                    type={type}\n                    onClick={onClick}\n                    {...others}\n                  >\n                    {text}\n                  </Fab>\n                ) : (\n                  <Button\n                    key={text}\n                    className={classes.Button}\n                    variant={variant}\n                    type={type}\n                    onClick={onClick}\n                    {...others}\n                  >\n                    {text}\n                  </Button>\n                )\n            )}\n          </ListItem>\n        )}\n      </List>\n    </form>\n  );\n};\n\nexport default Form;\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nexport const useStyles = makeStyles((theme) => ({\n  SingleForm: {\n    width: \"70vw\",\n    height: \"100vh\",\n    margin: \"0 auto\",\n    [theme.breakpoints.down(\"xs\")]: {\n      width: \"100vw\",\n    },\n    [theme.breakpoints.up(\"md\")]: {\n      maxWidth: \"600px !important\",\n    },\n  },\n  label: {\n    textTransform: \"none\",\n  },\n}));\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { CircularProgress, Grid, Button } from \"@material-ui/core\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport {\n  changeEmail,\n  changeEmailValid,\n  changePassword,\n  changePasswordValid,\n} from \"./loginSlice\";\nimport { auth } from \"../../store/generalSlice\";\nimport Form from \"../../components/Form/Form\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\n\nconst Login = () => {\n  const { notif } = useNotifications();\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { email, password, emailValid, passwordValid } = useSelector(\n    (state) => state.login\n  );\n  const { isLoading } = useSelector((state) => state.general);\n  const [formValid, setFormValid] = useState(true);\n\n  useEffect(() => {\n    const formValid = emailValid && passwordValid;\n    setFormValid(formValid);\n  }, [emailValid, passwordValid]);\n\n  // useEffect(() => {\n  //   showPrompt(\n  //     \"We use geolocation on this site to provide better results and optimize your experience. Allow using GPS?\"\n  //   );\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, []);\n\n  const onRegisterHandler = () => {\n    history.push(\"register\");\n  };\n\n  const onLoginHandler = async (e) => {\n    e.preventDefault();\n    dispatch(auth(email, password, notif));\n  };\n\n  const inputs = [\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      onValidate: (isValid) => {\n        dispatch(changeEmailValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeEmail(e.target.value));\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n    {\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\",\n      value: password,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changePasswordValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changePassword(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use at least one lower- and uppercase letter, number and symbol. Min length 4\",\n        rule: {\n          minLength: 4,\n          maxLength: 20,\n          regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/,\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      variant: \"contained\",\n      type: \"submit\",\n      text: \"Sign in\",\n      disabled: !formValid,\n      onClick: (e) => {\n        onLoginHandler(e);\n      },\n    },\n    {\n      text: \"Not yet with us?\",\n      onClick: onRegisterHandler,\n    },\n  ];\n\n  const handleForgot = () => {\n    history.push(\"/forgot\");\n  };\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      direction=\"column\"\n      className={classes.SingleForm}\n    >\n      {isLoading ? (\n        <CircularProgress />\n      ) : (\n        <>\n          <Form inputs={inputs} buttons={buttons} />\n          <Button\n            variant=\"text\"\n            color=\"primary\"\n            classes={{ label: classes.label }}\n            onClick={handleForgot}\n          >\n            Forgot password?\n          </Button>\n        </>\n      )}\n    </Grid>\n  );\n};\n\nexport default Login;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { api } from \"../../axios\";\nimport { startLoading, stopLoading } from \"../../store/generalSlice\";\nimport { xssSanitize } from \"../../utils\";\n\nconst initialRegisterState = {\n  email: \"\",\n  username: \"\",\n  password: \"\",\n  confirm: \"\",\n  emailValid: false,\n  usernameValid: false,\n  passwordValid: false,\n  confirmValid: false,\n  phoneValid: false,\n  registerSuccess: false,\n};\n\nconst registerSlice = createSlice({\n  name: \"register\",\n  initialState: initialRegisterState,\n  reducers: {\n    changeEmail(state, { payload }) {\n      state.email = payload;\n    },\n    changeUsername(state, { payload }) {\n      state.username = payload;\n    },\n    changePassword(state, { payload }) {\n      state.password = payload;\n    },\n    changeConfirmPassword(state, { payload }) {\n      state.confirm = payload;\n    },\n\n    changeEmailValid(state, { payload }) {\n      state.emailValid = payload;\n    },\n    changeUsernameValid(state, { payload }) {\n      state.usernameValid = payload;\n    },\n    changePasswordValid(state, { payload }) {\n      state.passwordValid = payload;\n    },\n    changeConfirmValid(state, { payload }) {\n      state.confirmValid = payload;\n    },\n\n    onRegisterSuccess(state) {\n      state = { ...initialRegisterState, registerSuccess: true };\n    },\n    onRegisterFail(state) {\n      state.registerSuccess = false;\n    },\n  },\n});\n\nexport const {\n  changeEmail,\n  changeUsername,\n  changePassword,\n  changeConfirmPassword,\n\n  changeEmailValid,\n  changeUsernameValid,\n  changePasswordValid,\n  changeConfirmValid,\n  changePhoneValid,\n  onRegisterSuccess,\n  onRegisterFail,\n} = registerSlice.actions;\n\nexport const register = (\n  username,\n  email,\n  password,\n  showNotif,\n  history\n) => async (dispatch) => {\n  dispatch(startLoading());\n  const body = {\n    username: xssSanitize(username),\n    email: xssSanitize(email),\n    password: xssSanitize(password),\n  };\n  // console.log(body);\n  try {\n    const response = await api.post(\"signup\", body);\n    // console.log(response.data);\n    if (response.data.status === true) {\n      dispatch(onRegisterSuccess());\n      showNotif(\"Account successfully created, now login\", \"success\");\n      history.push(\"/login\");\n    } else {\n      showNotif(response.data.data, \"error\");\n    }\n  } catch (e) {\n    console.log(e);\n    showNotif(\"server error\", \"error\");\n  }\n  dispatch(stopLoading());\n};\n\nexport default registerSlice.reducer;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Grid, CircularProgress } from \"@material-ui/core\";\nimport {\n  changeEmail,\n  changeUsername,\n  changePassword,\n  changeConfirmPassword,\n  changeEmailValid,\n  changeUsernameValid,\n  changePasswordValid,\n  changeConfirmValid,\n  register,\n} from \"./registerSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../components/Form/Form\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\n\nconst Register = () => {\n  const { notif } = useNotifications();\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const history = useHistory();\n  const {\n    email,\n    username,\n    password,\n    confirm,\n\n    emailValid,\n    usernameValid,\n    passwordValid,\n    confirmValid,\n  } = useSelector((state) => state.register);\n  const [formValid, setFormValid] = useState(false);\n  const { isLoading } = useSelector((state) => state.general);\n\n  const onLoginHandler = () => {\n    history.push(\"/login\");\n  };\n\n  useEffect(() => {\n    const formValid =\n      emailValid && usernameValid && passwordValid && confirmValid;\n    setFormValid(formValid);\n  }, [emailValid, usernameValid, passwordValid, confirmValid]);\n\n  const onRegisterHandler = async (e) => {\n    e.preventDefault();\n    dispatch(register(username, email, password, notif, history));\n  };\n\n  const inputs = [\n    {\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n      value: username,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeUsernameValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeUsername(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use letters, numbers or symbols ., %, _, -, +. Min length 3\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: /^[\\w%-+.]+$/,\n        },\n      },\n    },\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeEmailValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeEmail(e.target.value));\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n    {\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\",\n      value: password,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changePasswordValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changePassword(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use at least one lower- and uppercase letter, number and symbol. Min length 4\",\n        rule: {\n          minLength: 4,\n          maxLength: 20,\n          regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/,\n        },\n      },\n    },\n    {\n      name: \"confirm\",\n      type: \"password\",\n      label: \"Confirm\",\n      value: confirm,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeConfirmValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeConfirmPassword(e.target.value));\n      },\n      rules: {\n        helperText: \"Confirm and password does not match\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: new RegExp(`^${password}$`),\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      variant: \"contained\",\n      type: \"submit\",\n      text: \"Sign up\",\n      disabled: !formValid,\n      onClick: (e) => {\n        onRegisterHandler(e);\n      },\n    },\n    {\n      text: \"Already a member?\",\n      onClick: onLoginHandler,\n    },\n  ];\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      direction=\"column\"\n      className={classes.SingleForm}\n    >\n      {isLoading ? (\n        <CircularProgress />\n      ) : (\n        <Form inputs={inputs} buttons={buttons} />\n      )}\n    </Grid>\n  );\n};\n\nexport default Register;\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { api } from \"../axios\";\nimport { setBanned, setStrangers } from \"../store/usersSlice\";\n\nexport const banUser = async (id) => {\n  try {\n    const res = await api.post(\"ban\", { id });\n    return res.data.status;\n  } catch (e) {}\n};\n\nexport const unbanUser = async (id) => {\n  try {\n    const res = await api.delete(`ban/${id}`);\n    return res.data.status;\n  } catch (e) {}\n};\n\nexport const useBan = () => {\n  const dispatch = useDispatch();\n  const { strangers, banned } = useSelector((state) => state.users);\n\n  const banAndUpdate = async (userId) => {\n    await banUser(userId);\n    const filteredStrangers = strangers.filter((user) => user.id !== userId);\n    dispatch(setStrangers(filteredStrangers));\n    const updatedBanned = [...banned, userId];\n    dispatch(setBanned(updatedBanned));\n  };\n\n  const unbanAndUpdate = async (userId) => {\n    const res = await unbanUser(userId);\n    if (banned.length && res) {\n      const updatedBanned = banned.filter((id) => id !== userId);\n      dispatch(setBanned(updatedBanned));\n    }\n  };\n\n  return { banned, banAndUpdate, unbanAndUpdate };\n};\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Card,\n  CardMedia,\n  Grid,\n  makeStyles,\n  MobileStepper,\n  Button,\n  Container,\n  CardContent,\n  Typography,\n  Fab,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  FavoriteOutlined,\n  RemoveCircleOutlineRounded,\n  ChevronLeftRounded,\n  ChevronRightRounded,\n  FavoriteBorderOutlined,\n} from \"@material-ui/icons\";\nimport defaultImage from \"../../Images/default-avatar.png\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  sendVisit,\n  sendLike,\n  setCompanion,\n  setParent,\n  removeLike,\n} from \"../../store/UISlice\";\nimport cn from \"classnames\";\nimport { useBan } from \"../../hooks/useBan.hook\";\nimport { theme } from \"../../theme\";\nimport { Skeleton } from \"@material-ui/lab\";\n\nconst useStyles = makeStyles({\n  UserCard: {\n    maxWidth: 350,\n    minWidth: 220,\n    margin: \"0 auto\",\n    position: \"relative\",\n    overflow: \"hidden\",\n    \"&:hover\": {\n      cursor: \"pointer\",\n      \"& $Info\": {\n        transform: \"translateY(-80px)\",\n      },\n      \"& $Fab\": {\n        opacity: 1,\n      },\n      \"& $Stepper\": {\n        opacity: 1,\n      },\n    },\n  },\n  Info: {\n    width: \"105%\",\n    padding: \"10px 30px 20px\",\n    position: \"absolute\",\n    color: \"white\",\n    left: -10,\n    background: \"linear-gradient(#00000000, #000000aa)\",\n    transition: \"0.3s\",\n  },\n  InfoHeader: {\n    justifyContent: \"space-between\",\n    padding: 0,\n    \"& p\": {\n      fontSize: \"1.5rem\",\n    },\n  },\n  Tags: {\n    lineHeight: \"0.5rem\",\n    \"& span\": {\n      fontSize: \"1rem\",\n    },\n    \"& span:nth-child(n+2)::before\": {\n      content: '\"|\"',\n      margin: \"0 10px\",\n    },\n  },\n  Stepper: {\n    backgroundColor: \"#ffffff00\",\n    position: \"absolute\",\n    width: \"100%\",\n    transition: \"0.3s\",\n    opacity: 0,\n  },\n  StepperButton: {\n    backgroundColor: \"#ffffff00\",\n    textShadow: \"0,0,10,#00000055\",\n  },\n  CardMedia: {\n    height: 0,\n    paddingTop: \"100%\",\n  },\n  Fab: {\n    position: \"absolute\",\n    bottom: 10,\n    right: 10,\n    transition: \"0.3s\",\n    opacity: 0,\n    zIndex: 3,\n  },\n  Like: {\n    right: 70,\n  },\n  Ban: {\n    right: 10,\n  },\n  Status: {\n    position: \"absolute\",\n    bottom: 5,\n    left: \"50%\",\n    marginLeft: -20,\n    width: 40,\n    height: 5,\n    borderRadius: 3,\n    backgroundColor: theme.palette.grey[500],\n  },\n  Online: {\n    backgroundColor: theme.palette.success.main,\n  },\n  Tooltip: {\n    backgroundColor: theme.palette.background.default,\n    color: theme.palette.grey[700],\n    padding: 20,\n  },\n});\n\nconst defaultUser = {\n  username: \"\",\n  images: null,\n  age: 0,\n  isOnline: false,\n};\n\nconst UserCard = (props) => {\n  const classes = useStyles();\n  const [displayedImage, setDisplayedImage] = useState(0);\n  const { id } = { ...props.user };\n  const user = useSelector((state) => state.users.users).find(\n    (user) => user.id === id\n  );\n  const { username, images, age, isOnline } = user ? user : defaultUser;\n  const tags = props.user.tags;\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { banAndUpdate } = useBan();\n  const { likes } = useSelector((state) => state.general);\n  const [like, setLike] = useState(false);\n\n  useEffect(() => {\n    const isLiked = () => likes.includes(id);\n    setLike(isLiked);\n  }, [likes, id]);\n\n  const showUserProfile = (e) => {\n    const parent = \"strangers\";\n    dispatch(setCompanion({ companion: props.user }));\n    dispatch(sendVisit(id));\n    dispatch(setParent({ parent }));\n    history.push(\"/strangers/\" + id);\n  };\n\n  const handleLike = (e) => {\n    e.stopPropagation();\n    if (like) {\n      dispatch(removeLike(id));\n    } else {\n      dispatch(sendLike(id));\n    }\n  };\n\n  const handleBan = (e) => {\n    e.stopPropagation();\n    banAndUpdate(id);\n  };\n\n  const handleNextImage = (e) => {\n    e.stopPropagation();\n    setDisplayedImage((prev) => prev + 1);\n  };\n\n  const handlePrevImage = (e) => {\n    e.stopPropagation();\n    setDisplayedImage((prev) => prev - 1);\n  };\n\n  const currentImage = () => {\n    let img = defaultImage;\n    if (images && images.length) {\n      if (images[displayedImage].image) img = images[displayedImage].image;\n      else return <Skeleton variant=\"rect\" className={classes.CardMedia} />;\n    }\n    return <CardMedia className={classes.CardMedia} image={img} />;\n  };\n\n  const LeftButtonDisabled =\n    images?.length === 0 || displayedImage === images?.length - 1;\n  const RightButtonDisabled = displayedImage === 0 || images?.length === 0;\n\n  return (\n    <Grid item xs={12} sm={6} lg={4}>\n      <Card className={classes.UserCard} onClick={showUserProfile}>\n        <div>\n          {images && images.length > 1 && (\n            <MobileStepper\n              variant=\"dots\"\n              steps={0}\n              position=\"static\"\n              activeStep={displayedImage}\n              className={classes.Stepper}\n              nextButton={\n                LeftButtonDisabled ? null : (\n                  <Button\n                    color=\"secondary\"\n                    className={classes.StepperButton}\n                    size=\"small\"\n                    onClick={handleNextImage}\n                  >\n                    <ChevronRightRounded />\n                  </Button>\n                )\n              }\n              backButton={\n                RightButtonDisabled ? null : (\n                  <Button\n                    color=\"secondary\"\n                    className={classes.StepperButton}\n                    size=\"small\"\n                    onClick={handlePrevImage}\n                  >\n                    <ChevronLeftRounded />\n                  </Button>\n                )\n              }\n            />\n          )}\n\n          {images && images.length > 0 && (\n            <Tooltip\n              style={{ tooltip: classes.Tooltip }}\n              title={like ? \"Unlike user\" : \"Like user\"}\n              aria-label={like ? \"Unlike user\" : \"Like user\"}\n            >\n              <Fab\n                color={\"secondary\"}\n                className={cn(classes.Fab, classes.Like)}\n                size=\"small\"\n                onClick={(e) => handleLike(e)}\n              >\n                {like ? <FavoriteBorderOutlined /> : <FavoriteOutlined />}\n              </Fab>\n            </Tooltip>\n          )}\n\n          <Tooltip\n            style={{ tooltip: classes.Tooltip }}\n            title={\"Ban user\"}\n            aria-label={\"Ban user\"}\n          >\n            <Fab\n              color=\"secondary\"\n              className={cn(classes.Fab, classes.Ban)}\n              size=\"small\"\n              onClick={(e) => handleBan(e)}\n            >\n              <RemoveCircleOutlineRounded />\n            </Fab>\n          </Tooltip>\n\n          {/* cardMedia */}\n          {currentImage()}\n\n          <div\n            className={\n              isOnline ? cn(classes.Status, classes.Online) : classes.Status\n            }\n          />\n\n          <CardContent className={classes.Info}>\n            <Container className={classes.InfoHeader}>\n              <Typography>\n                {username}, {age}\n              </Typography>\n            </Container>\n            <div className={classes.Tags}>\n              {tags ? (\n                tags.map((el) => <span key={el}>#{el}</span>)\n              ) : (\n                <span>No tags</span>\n              )}\n            </div>\n          </CardContent>\n        </div>\n      </Card>\n    </Grid>\n  );\n};\n\nexport default UserCard;\n","import {\n  Card,\n  CardMedia,\n  Fab,\n  Grid,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { media } from \"../../axios\";\nimport { setNewState } from \"../../store/generalSlice\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\nimport { DeleteOutlineRounded } from \"@material-ui/icons\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\n\nconst useStyles = makeStyles({\n  Card: {\n    position: \"relative\",\n    maxWidth: 350,\n    margin: \"0 auto\",\n    \"&:hover\": {\n      \"& $Media\": {\n        transform: \"scale(1.2)\",\n      },\n      \"& $Fab\": {\n        opacity: 1,\n      },\n    },\n  },\n  Media: {\n    paddingTop: \"100%\",\n  },\n  Grid: {\n    marginTop: \"10px\",\n  },\n  Fab: {\n    position: \"absolute\",\n    bottom: \"10px\",\n    right: \"10px\",\n    transition: \"0.3s\",\n    opacity: 0,\n    zIndex: 4,\n  },\n});\n\nconst Gallery = (props) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  let { images, avatar } = useSelector((state) => state.general);\n  // props are set when Gallery is rendered in user profile\n  if (props.images) images = props.images;\n  const { notif } = useNotifications();\n\n  const handleRemove = async (e, imageId) => {\n    e.stopPropagation();\n    if (props.images) return;\n    try {\n      const res = await media.delete(`img/${imageId}`, {\n        responseType: \"json\",\n      });\n      console.log(res);\n      if (res.data.status) {\n        const newImages = images.filter((img) => img.id !== imageId);\n        const newAvatar = imageId === avatar.id ? newImages[0] : avatar;\n        console.log(newImages, newAvatar);\n        dispatch(setNewState({ images: newImages, avatar: newAvatar }));\n      }\n    } catch (e) {\n      console.log(e);\n      notif(\"Server error, try again later\", \"error\");\n    }\n  };\n\n  return (\n    <Grid className={classes.Grid} container justify=\"center\" spacing={1}>\n      {images.length > 0 ? (\n        images.map((el) => (\n          <Grid item xs={10} sm={6} md={4} key={el.id || el}>\n            <Card className={classes.Card}>\n              {!props.images && (\n                <>\n                  <Fab\n                    color=\"secondary\"\n                    className={classes.Fab}\n                    size=\"small\"\n                    onClick={(e) => handleRemove(e, el.id)}\n                  >\n                    <DeleteOutlineRounded />\n                  </Fab>\n                </>\n              )}\n\n              <CardMedia\n                className={classes.Media}\n                image={el.image || defaultAvatar}\n              />\n            </Card>\n          </Grid>\n        ))\n      ) : (\n        <Typography>No images</Typography>\n      )}\n    </Grid>\n  );\n};\n\nexport default Gallery;\n","import { Chip, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  Item: {\n    margin: \"0 5px\",\n  },\n  Header: {\n    fontSize: \"1.3rem\",\n    fontWeight: 500,\n    display: \"block\",\n  },\n  Container: {\n    width: \"100%\",\n    padding: \"0.5rem 0\",\n  },\n});\n\nconst Tags = ({ tags }) => {\n  const classes = useStyles();\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        className={classes.Container}\n        container\n        direction=\"column\"\n        alignItems=\"flex-start\"\n        item\n      >\n        <Typography className={classes.Header}>Interests:</Typography>\n        <Grid>\n          {tags ? (\n            tags.map((el) => (\n              <Chip\n                className={classes.Item}\n                variant=\"outlined\"\n                key={el}\n                label={el}\n              />\n            ))\n          ) : (\n            <Typography>No tags yet</Typography>\n          )}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Tags;\n","import { Card, CardMedia, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport defaultImage from \"../../Images/default-avatar.png\";\n\nconst useStyles = makeStyles({\n  Card: {\n    width: \"100%\",\n    maxHeight: 200,\n  },\n  Media: {\n    paddingTop: \"30%\",\n  },\n});\n\nconst ProfileHeader = ({ img }) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.Card}>\n      <CardMedia className={classes.Media} image={img || defaultImage} />\n    </Card>\n  );\n};\n\nexport default ProfileHeader;\n","import React from \"react\";\nimport { Chip, Grid, makeStyles, Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  Item: {\n    padding: \"10px 15px\",\n    width: \"100%\",\n  },\n  Header: {\n    fontSize: \"1.3rem\",\n    fontWeight: 500,\n    display: \"block\",\n  },\n  Container: {\n    width: \"100%\",\n    padding: \"0.5rem 0\",\n  },\n  fullWidth: {\n    width: \"100%\",\n  },\n});\n\nconst Bio = ({ bio }) => {\n  const classes = useStyles();\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        className={classes.Container}\n        container\n        direction=\"column\"\n        alignItems=\"flex-start\"\n        item\n      >\n        <Typography className={classes.Header}>Bio:</Typography>\n        <Grid className={classes.fullWidth}>\n          <Chip className={classes.Item} label={bio} variant=\"outlined\" />\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Bio;\n","import { SvgIcon } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport const MaleBlackIcon = (props) => {\n  return (\n    <SvgIcon viewBox=\"0 0 384 384\" {...props}>\n      <path d=\"m383.792969 13.9375c-.175781-1.378906-.480469-2.707031-.984375-3.953125-.015625-.03125-.015625-.074219-.023438-.113281 0-.007813-.007812-.015625-.015625-.023438-.554687-1.3125-1.3125-2.503906-2.167969-3.609375-.210937-.261719-.417968-.519531-.640624-.765625-.914063-1.03125-1.90625-1.984375-3.058594-2.761718-.03125-.023438-.070313-.03125-.101563-.054688-1.113281-.734375-2.34375-1.289062-3.632812-1.726562-.320313-.113282-.632813-.210938-.960938-.296876-1.351562-.367187-2.742187-.632812-4.207031-.632812h-112c-8.832031 0-16 7.167969-16 16s7.167969 16 16 16h73.367188l-95.496094 95.496094c-25.464844-20.367188-56.816406-31.496094-89.871094-31.496094-79.398438 0-144 64.601562-144 144s64.601562 144 144 144 144-64.601562 144-144c0-33.039062-11.121094-64.382812-31.503906-89.871094l95.503906-95.503906v73.375c0 8.832031 7.167969 16 16 16s16-7.167969 16-16v-112c0-.335938-.078125-.65625-.097656-.984375-.023438-.367187-.0625-.71875-.109375-1.078125zm-239.792969 338.0625c-61.761719 0-112-50.238281-112-112s50.238281-112 112-112c29.902344 0 58.054688 11.640625 79.222656 32.734375 21.136719 21.210937 32.777344 49.363281 32.777344 79.265625 0 61.761719-50.238281 112-112 112zm0 0\" />\n    </SvgIcon>\n  );\n};\n\nexport const FemaleBlackIcon = (props) => {\n  return (\n    <SvgIcon viewBox=\"0 0 384 384\" {...props}>\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m272 136c0-74.992188-61.007812-136-136-136s-136 61.007812-136 136c0 69.566406 52.535156 127.015625 120 134.976562v33.023438h-32c-8.832031 0-16 7.167969-16 16s7.167969 16 16 16h32v32c0 8.832031 7.167969 16 16 16s16-7.167969 16-16v-32h32c8.832031 0 16-7.167969 16-16s-7.167969-16-16-16h-32v-33.023438c67.464844-7.960937 120-65.410156 120-134.976562zm-240 0c0-57.34375 46.65625-104 104-104s104 46.65625 104 104-46.65625 104-104 104-104-46.65625-104-104zm0 0\"\n      />\n    </SvgIcon>\n  );\n};\n\nexport const MaleColorIcon = ({\n  colors = {\n    elementColor: { main: \"#89b0e0\", shadow: \"#6197d5\" },\n    ringColor: { main: \"#99ddfc\", shadow: \"#66cdf7\" },\n  },\n  ...rest\n}) => {\n  return (\n    <SvgIcon viewBox=\"0 0 511 511\" {...rest}>\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m465.029.009h-70.218c-21.163 0-38.477 17.315-38.477 38.477 0 15.974 9.868 29.748 23.808 35.544 2.544 1.058 3.228 4.333 1.279 6.281l-143.536 143.535 49.261 49.26 143.536-143.536c1.948-1.948 5.223-1.265 6.281 1.279 5.796 13.94 19.57 23.808 35.544 23.808 21.163 0 38.478-17.315 38.477-38.477v-70.218c.672-26.836-18.806-45.953-45.955-45.953z\"\n        fill={colors.elementColor.main}\n      />\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m301.028 160.703-63.143 63.143 49.261 49.26 62.107-62.108c-9.062-17.63-34.358-44.312-48.225-50.295z\"\n        fill={colors.elementColor.shadow}\n      />\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m172.157 166.679c-95.08 0-172.157 77.077-172.157 172.156s77.077 172.157 172.157 172.157 172.157-77.077 172.157-172.157-77.078-172.156-172.157-172.156zm0 278.623c-58.8 0-106.466-47.667-106.466-106.466s47.667-106.466 106.466-106.466c58.8 0 106.466 47.667 106.466 106.466s-47.667 106.466-106.466 106.466z\"\n        fill={colors.ringColor.main}\n      />\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m166.067 510.146c-10.713-22.493-19.376-45.941-26.316-69.873-42.953-13.71-74.061-53.938-74.061-101.438 0-45.748 28.857-84.752 69.359-99.816 1.911-7.469 3.992-14.898 6.242-22.279 3.69-12.108 7.948-24.071 13.413-35.503 2.329-4.871 4.904-9.746 7.926-14.293-90.647 4.945-162.63 80.009-162.63 171.891 0 93.162 74.002 169.028 166.428 172.052-.118-.248-.242-.493-.361-.741z\"\n        fill={colors.ringColor.shadow}\n      />\n    </SvgIcon>\n  );\n};\n\nexport const FemaleColorIcon = ({\n  colors = {\n    elementColor: { main: \"#ef7d92\", shadow: \"#eb6773\" },\n    ringColor: { main: \"#f6a7ae\", shadow: \"#f1919b\" },\n  },\n  ...rest\n}) => {\n  return (\n    <SvgIcon viewBox=\"0 0 511 511\" {...rest}>\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m202.361 446.901h21.698v32.828c0 17.271 14.001 31.272 31.272 31.272 17.271 0 31.272-14.001 31.272-31.272v-32.828h22.037c14.985 0 27.133-12.148 27.133-27.133 0-14.985-12.148-27.133-27.133-27.133h-22.037v-98.818h-62.205l-.339 98.818h-21.698c-14.985 0-27.133 12.148-27.133 27.133 0 14.985 12.148 27.133 27.133 27.133z\"\n        fill={colors.elementColor.main}\n      />\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m286.602 371.971v-74.042h-62.205l-.245 74.042c15.854 4.399 49.488 3.211 62.45 0z\"\n        fill={colors.elementColor.shadow}\n      />\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m255.5 0c-95.136 0-172.259 77.123-172.259 172.259s77.123 172.259 172.259 172.259 172.259-77.123 172.259-172.259-77.123-172.259-172.259-172.259zm0 278.789c-58.835 0-106.53-47.695-106.53-106.53s47.695-106.53 106.53-106.53 106.53 47.695 106.53 106.53-47.695 106.53-106.53 106.53z\"\n        fill={colors.ringColor.main}\n      />\n      <path\n        xmlns=\"http://www.w3.org/2000/svg\"\n        d=\"m151.81 196.75c-1.851-7.864-2.84-16.061-2.84-24.49 0-58.835 47.695-106.53 106.53-106.53 8.385 0 16.541.978 24.367 2.81 23.675-14.885 48.337-28.117 74.948-37.027-28.069-19.844-62.326-31.513-99.315-31.513-95.136 0-172.259 77.123-172.259 172.259 0 42.205 15.187 80.858 40.383 110.812.493-1.003 7.644-48.436 28.186-86.321z\"\n        fill={colors.ringColor.shadow}\n      />\n    </SvgIcon>\n  );\n};\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { api } from \"../../axios\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport Input from \"../Input/Input\";\n\nconst Report = ({ open, onClose }) => {\n  const id = useSelector((state) => state.general.id);\n  const [report, setReport] = useState({\n    category: \"\",\n    complaint: \"\",\n  });\n  const [valid, setValid] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const { notif } = useNotifications();\n\n  const categories = [\n    \"Unacceptable behavior\",\n    \"Bad language\",\n    \"Advertisement account\",\n  ];\n\n  const handleChange = (e) => {\n    e.preventDefault();\n    setReport({ ...report, [e.target.name]: e.target.value });\n    if (e.target.name === \"category\" && e.target.value.length > 0) {\n      setErrorMessage(\"\");\n    }\n  };\n\n  const handleSendReport = async (e) => {\n    e.stopPropagation();\n    if (report.category.length === 0) {\n      setErrorMessage(\"Please, select category\");\n      return;\n    }\n    const body = {\n      date: new Date().getTime(),\n      category: report.category,\n      complaint: report.complaint,\n      authorId: id,\n    };\n    try {\n      const res = await api.post(\"report\", body);\n      if (res.data.status) {\n        notif(\"Report was successfully sent\", \"success\");\n      } else {\n        throw new Error(res.data.status || \"Server error\");\n      }\n      onClose();\n    } catch (e) {\n      notif(e, \"error\");\n    }\n  };\n\n  const inputs = [\n    {\n      name: \"category\",\n      type: \"select\",\n      label: \"Category\",\n      value: report.category,\n      values: categories,\n      ignoreUntouched: true,\n      onChange: handleChange,\n    },\n    {\n      name: \"complaint\",\n      type: \"text\",\n      label: \"Complaint\",\n      value: report.complaint,\n      ignoreUntouched: true,\n      onChange: handleChange,\n      onValidate: (isValid) => setValid(isValid),\n      rules: {\n        helperText: \"Invalid complaint. Min length: 5, max length: 40\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^.+$/i,\n        },\n      },\n    },\n  ];\n\n  return (\n    <Dialog\n      style={{ minWidth: 400 }}\n      open={open}\n      onClose={onClose}\n      aria-labelledby=\"form-report-user\"\n    >\n      <DialogTitle id=\"form-report-user\">Report user</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          Please give some description, why user is reported\n        </DialogContentText>\n        {inputs.map((input) => (\n          <Input style={{ margin: \"10px 0\" }} key={input.name} {...input} />\n        ))}\n        <Typography style={{ color: \"red\" }}>{errorMessage}</Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={onClose}>Cancel</Button>\n        <Button disabled={!valid} onClick={handleSendReport}>\n          Submit\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default Report;\n","import React, { useEffect, useState } from \"react\";\nimport dayjs from \"dayjs\";\nimport relativeTime from \"dayjs/plugin/relativeTime\";\nimport {\n  Button,\n  Divider,\n  Fab,\n  Grid,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Gallery from \"../../components/Gallery/Gallery\";\nimport Tags from \"../../components/Tags/Tags\";\nimport ProfileHeader from \"../../components/ProfileHeader/ProfileHeader\";\nimport Bio from \"../../components/Bio/Bio\";\nimport { useHistory } from \"react-router-dom\";\nimport { useChat } from \"../../hooks/useChat.hook\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\nimport {\n  ChatRounded,\n  Favorite,\n  FavoriteBorderOutlined,\n} from \"@material-ui/icons\";\nimport cn from \"classnames\";\nimport { sendLike, removeLike } from \"../../store/UISlice\";\nimport { FemaleColorIcon, MaleColorIcon } from \"../../components/Icons/Icons\";\nimport Report from \"../../components/Report/Report\";\n\ndayjs.extend(relativeTime);\n\nconst useStyles = makeStyles((theme) => ({\n  Typography: {\n    fontSize: \"1.5rem\",\n  },\n  Name: {\n    fontSize: \"2rem\",\n    marginRight: 10,\n  },\n  Location: {\n    fontSize: \"1rem\",\n  },\n  FullWidth: {\n    width: \"100%\",\n  },\n  Message: {\n    position: \"fixed\",\n    right: \"1rem\",\n    bottom: \"8rem\",\n  },\n  FabIcon: {\n    marginRight: \"10px\",\n  },\n  Like: {\n    position: \"fixed\",\n    right: \"1rem\",\n    bottom: \"4rem\",\n  },\n  Status: {\n    position: \"absolute\",\n    left: \"50%\",\n    width: \"50%\",\n    marginLeft: \"-25%\",\n    height: 5,\n    borderRadius: 3,\n    backgroundColor: theme.palette.grey[500],\n  },\n  Online: {\n    backgroundColor: theme.palette.success.main,\n  },\n  Report: {\n    marginTop: 10,\n  },\n}));\n\nconst UserProfile = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const user = useSelector((state) => state.UI.companion);\n  const {\n    id,\n    images,\n    avatar,\n    gender,\n    name,\n    surname,\n    country,\n    city,\n    age,\n    bio,\n    tags,\n    isOnline,\n    lastOnline,\n  } = {\n    ...user,\n  };\n  const defaultBio = \"UFO flew around and dropped this message here\";\n  const { selectChat, createChat } = useChat();\n  const dispatch = useDispatch();\n  const chat = useSelector((state) => state.chat.chat);\n  const { likes, matches } = useSelector((state) => state.general);\n  const [like, setLike] = useState(false);\n  const status = isOnline\n    ? \"(online)\"\n    : `(last seen ${dayjs(lastOnline * 1000).fromNow()})`;\n  const isMatched = matches.includes(id);\n  const [openReport, setOpenReport] = useState(false);\n  // console.log(matches, id, isMatched);\n\n  useEffect(() => {\n    const isLiked = () => likes.includes(id);\n    setLike(isLiked);\n  }, [likes, id]);\n\n  useEffect(() => {\n    if (!chat) return;\n    history.push(`/chat/${chat}`);\n  }, [chat, history]);\n\n  const handleChat = async (e) => {\n    if (!selectChat(id)) {\n      if (await createChat(id)) selectChat(id);\n    }\n  };\n\n  const handleOpenReport = () => {\n    setOpenReport((open) => !open);\n  };\n\n  const handleLike = (e) => {\n    e.stopPropagation();\n    // if (like) {\n    //   if (matches.includes(id)) {\n    //     dispatch(addGeneralValues({ key: \"likedBy\", values: [id] }));\n    //   }\n    //   dispatch(removeLike(id));\n    // } else {\n    //   dispatch(sendLike(id));\n    //   if (likedBy.includes(id)) {\n    //     dispatch(addGeneralValues({ key: \"matches\", values: [id] }));\n    //     dispatch(removeGeneralValues({ key: \"likedBy\", values: [id] }));\n    //   }\n    // }\n    if (like) {\n      dispatch(removeLike(id));\n    } else {\n      dispatch(sendLike(id));\n    }\n    // setLike((like) => !like);\n  };\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.FullWidth}\n    >\n      <ProfileHeader img={avatar?.image || images[0]?.image || defaultAvatar} />\n      <div>\n        <div\n          className={\n            isOnline ? cn(classes.Status, classes.Online) : classes.Status\n          }\n        />\n      </div>\n\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        item\n        xs={12}\n        sm={8}\n        md={6}\n      >\n        <Grid container justify=\"center\" alignItems=\"baseline\">\n          <Typography\n            className={classes.Name}\n          >{`${name} ${surname}`}</Typography>\n          {gender === \"male\" ? <MaleColorIcon /> : <FemaleColorIcon />}\n          <Typography className={classes.Typography}>{status}</Typography>\n        </Grid>\n        <Typography color=\"secondary\" className={classes.Location}>\n          {`${country}, ${city}`}\n        </Typography>\n        <Typography\n          className={classes.Typography}\n        >{`${age} years old`}</Typography>\n        <Divider className={classes.FullWidth} />\n        <Tags tags={tags} />\n        <Divider className={classes.FullWidth} />\n        <Bio bio={bio || defaultBio} />\n        <Gallery images={images} />\n        <Button className={classes.Report} onClick={handleOpenReport}>\n          Report user\n        </Button>\n        {isMatched && (\n          <Fab\n            variant=\"extended\"\n            color=\"primary\"\n            className={classes.Message}\n            onClick={handleChat}\n          >\n            <ChatRounded className={classes.FabIcon} />\n            Send message\n          </Fab>\n        )}\n        <Fab\n          variant=\"extended\"\n          color=\"secondary\"\n          className={classes.Like}\n          onClick={handleLike}\n        >\n          {like ? (\n            <>\n              <FavoriteBorderOutlined className={classes.FabIcon} />\n              Unlike user\n            </>\n          ) : (\n            <>\n              <Favorite className={classes.FabIcon} />\n              Like user\n            </>\n          )}\n        </Fab>\n      </Grid>\n      <Report open={openReport} onClose={handleOpenReport} />\n    </Grid>\n  );\n};\n\nexport default UserProfile;\n","import { Button, Grid, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { loadStrangers } from \"../../store/usersSlice\";\nimport Input from \"../Input/Input\";\nimport { changeFilterState } from \"./filterSlice\";\n\nconst useStyles = makeStyles({\n  Inputs: {\n    width: \"100%\",\n    margin: \"10px 0\",\n  },\n});\n\nconst Filter = () => {\n  const classes = useStyles();\n  const { username, city, country, gender, tags, age, rating } = useSelector(\n    (state) => state.filter\n  );\n  const dispatch = useDispatch();\n  const { notif } = useNotifications();\n\n  const inputs = [\n    {\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n      value: username,\n      onChange: (e) => {\n        dispatch(changeFilterState({ username: e.target.value }));\n      },\n    },\n    {\n      name: \"ageRange\",\n      type: \"slider\",\n      label: \"Age range\",\n      value: [age.minAge, age.maxAge],\n      onChange: (value) => dispatch(changeFilterState({ age: value })),\n    },\n    {\n      name: \"country\",\n      type: \"text\",\n      label: \"Country\",\n      value: country,\n      onChange: (e) => {\n        dispatch(changeFilterState({ country: e.target.value }));\n      },\n    },\n    {\n      name: \"city\",\n      type: \"text\",\n      label: \"City\",\n      value: city,\n      onChange: (e) => {\n        dispatch(changeFilterState({ city: e.target.value }));\n      },\n    },\n    {\n      name: \"gender\",\n      type: \"radio\",\n      label: \"I look for\",\n      values: [\"male\", \"female\", \"both\"],\n      value: gender,\n      onChange: (e) => {\n        dispatch(changeFilterState({ gender: e.target.value }));\n      },\n    },\n    {\n      name: \"rating\",\n      type: \"slider\",\n      label: \"Rating range\",\n      value: [rating.min, rating.max],\n      min: 0,\n      max: 1,\n      step: 0.05,\n      onChange: (value) => dispatch(changeFilterState({ rating: value })),\n    },\n    {\n      name: \"tags\",\n      type: \"autocomplete\",\n      values: tags,\n      onChange: (values) => {\n        dispatch(changeFilterState({ tags: values }));\n      },\n    },\n  ];\n\n  const handleSerach = () => {\n    dispatch(\n      loadStrangers(notif, { username, city, country, gender, tags, age })\n    );\n  };\n\n  return (\n    <>\n      {inputs.map(({ name, type, label, value, values, onChange, ...rest }) => (\n        <Grid className={classes.Inputs} key={name} item xs={12}>\n          <Input\n            name={name}\n            type={type}\n            label={label}\n            value={value}\n            values={values}\n            onChange={onChange}\n            {...rest}\n          />\n        </Grid>\n      ))}\n      <Button style={{ margin: \"10px 0\" }} onClick={handleSerach}>\n        get new strangers\n      </Button>\n    </>\n  );\n};\n\nexport default Filter;\n","import {\n  Button,\n  ButtonGroup,\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  makeStyles,\n} from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { sortStrangers } from \"../../store/usersSlice\";\nimport { secondaryColor } from \"../../theme\";\n\nconst useStyles = makeStyles({\n  Wrapper: {\n    width: \"100%\",\n    margin: \"10px 0\",\n  },\n  Active: {\n    color: secondaryColor.light,\n    fontWeight: \"bold\",\n  },\n});\n\nconst Sort = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [isAsc, setIsAsc] = useState(true);\n  const [sortingParam, setSortingParam] = useState(null);\n\n  const sortByUsernameAsc = (userA, userB) => {\n    return userA.username.localeCompare(userB.username);\n  };\n  const sortByUsernameDesc = (userA, userB) => {\n    return userB.username.localeCompare(userA.username);\n  };\n  const sortByAgeAsc = (userA, userB) => {\n    return userA.age - userB.age;\n  };\n  const sortByAgeDesc = (userA, userB) => {\n    return userB.age - userA.age;\n  };\n  const sortByRatingAsc = (userA, userB) => {\n    return userA.rating - userB.rating;\n  };\n  const sortByRatingDesc = (userA, userB) => {\n    return userB.rating - userA.rating;\n  };\n  const sortByLocationAsc = (userA, userB) => {\n    return (\n      userA.country.localeCompare(userB.country) ||\n      userA.city.localeCompare(userB.city)\n    );\n  };\n  const sortByLocationDesc = (userA, userB) => {\n    return (\n      userB.country.localeCompare(userA.country) ||\n      userB.city.localeCompare(userA.city)\n    );\n  };\n  const compFn = useCallback(() => {\n    switch (sortingParam) {\n      case \"username\":\n        return isAsc ? sortByUsernameAsc : sortByUsernameDesc;\n      case \"age\":\n        return isAsc ? sortByAgeAsc : sortByAgeDesc;\n      case \"rating\":\n        return isAsc ? sortByRatingAsc : sortByRatingDesc;\n      case \"location\":\n        return isAsc ? sortByLocationAsc : sortByLocationDesc;\n      default:\n        return;\n    }\n  }, [isAsc, sortingParam]);\n\n  useEffect(() => {\n    dispatch(sortStrangers({ compareFunction: compFn() }));\n  }, [isAsc, sortingParam, compFn, dispatch]);\n\n  return (\n    <Grid\n      container\n      justify=\"space-around\"\n      alignItems=\"center\"\n      className={classes.Wrapper}\n    >\n      <ButtonGroup variant=\"outlined\">\n        <Button\n          className={sortingParam === \"username\" && classes.Active}\n          onClick={() => setSortingParam(\"username\")}\n        >\n          username\n        </Button>\n        <Button\n          className={sortingParam === \"age\" && classes.Active}\n          onClick={() => setSortingParam(\"age\")}\n        >\n          age\n        </Button>\n        <Button\n          className={sortingParam === \"rating\" && classes.Active}\n          onClick={() => setSortingParam(\"rating\")}\n        >\n          rating\n        </Button>\n        <Button\n          className={sortingParam === \"location\" && classes.Active}\n          onClick={() => setSortingParam(\"location\")}\n        >\n          location\n        </Button>\n      </ButtonGroup>\n\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={isAsc}\n            onChange={() => setIsAsc((state) => !state)}\n            name=\"isAscending\"\n          />\n        }\n        label=\"Ascending order\"\n      />\n    </Grid>\n  );\n};\n\nexport default Sort;\n","import {\n  Button,\n  ButtonGroup,\n  Grid,\n  makeStyles,\n  Paper,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { ExpandMoreRounded } from \"@material-ui/icons\";\nimport Filter from \"../Filter/Filter\";\nimport Sort from \"../Sort/Sort\";\nimport { secondaryColor } from \"../../theme\";\nimport cn from \"classnames\";\n\nconst useStyles = makeStyles({\n  Wrapper: {\n    position: \"fixed\",\n    left: 0,\n    bottom: \"39px\",\n    zIndex: 6,\n  },\n  Paper: {\n    padding: \"10px 40px\",\n    width: \"70vw\",\n    minWidth: 400,\n    maxWidth: 700,\n    maxHeight: \"80vh\",\n    overflow: \"auto\",\n  },\n  ButtonLabel: {\n    fontFamily: \"Righteous\",\n    fontSize: \"1.2rem\",\n    padding: \"0 15px\",\n  },\n  Active: {\n    boxShadow: `0 0 5px ${secondaryColor.light}`,\n  },\n  Arrow: {\n    transition: \"0.3s\",\n  },\n  Less: {\n    transform: \"rotateX(180deg)\",\n  },\n});\n\nconst FilterSortWrapper = () => {\n  const [content, setContent] = useState(\"\");\n  const [show, setShow] = useState(false);\n  const classes = useStyles(content);\n\n  const handleShow = () => {\n    setShow((prev) => !prev);\n  };\n\n  const handleButtonPress = (button) => {\n    const triggerShow = content ? button === content || !show : true;\n    setContent(button);\n    triggerShow && handleShow();\n  };\n\n  return (\n    <Grid\n      className={classes.Wrapper}\n      container\n      item\n      xs={12}\n      justify=\"center\"\n      self=\"flex-end\"\n    >\n      <Paper className={classes.Paper}>\n        <Grid container direction=\"column\" alignItems=\"center\">\n          <Grid container item direction=\"column\" alignItems=\"center\">\n            {show && (content === \"filter\" ? <Filter /> : <Sort />)}\n          </Grid>\n          <Grid container justify=\"space-evenly\" alignItems=\"center\" item>\n            <ButtonGroup\n              variant=\"text\"\n              color=\"secondary\"\n              aria-label=\"text primary button group\"\n            >\n              <Button\n                className={show && content === \"filter\" && classes.Active}\n                classes={{ label: classes.ButtonLabel }}\n                onClick={() => handleButtonPress(\"filter\")}\n              >\n                Filter\n              </Button>\n              <Button\n                className={show && content === \"sort\" && classes.Active}\n                classes={{ label: classes.ButtonLabel }}\n                onClick={() => handleButtonPress(\"sort\")}\n              >\n                Sort\n              </Button>\n            </ButtonGroup>\n            <Button onClick={handleShow} size=\"small\" color=\"secondary\">\n              <ExpandMoreRounded\n                className={\n                  show ? classes.Arrow : cn(classes.Arrow, classes.Less)\n                }\n              />\n            </Button>\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default FilterSortWrapper;\n","import React, { useEffect, useLayoutEffect, useMemo, useState } from \"react\";\nimport UserCard from \"../../components/UserCard/UserCard\";\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { Route, Switch, useLocation } from \"react-router-dom\";\nimport UserProfile from \"../../containers/UserProfile/UserProfile\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { loadStrangers } from \"../../store/usersSlice\";\nimport FilterSortWrapper from \"../../components/FIlterSortWrapper/FilterSortWrapper\";\n\nconst useStyles = makeStyles({\n  Strangers: {\n    fontSize: \"2rem\",\n    paddingBottom: \"60px\",\n  },\n  CardContainer: {\n    paddingBottom: \"90px\",\n  },\n  Text: {\n    marginTop: \"1rem\",\n    width: \"100%\",\n    textAlign: \"center\",\n  },\n});\n\nconst Strangers = () => {\n  const { notif } = useNotifications();\n  const allUsers = useSelector((state) => state.users.users);\n  const strangers = useSelector((state) => state.users.strangers);\n  const filter = useSelector((state) => state.filter);\n  const location = useLocation();\n  const [cards, setCards] = useState(null);\n  const [routes, setRoutes] = useState(null);\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  // load strangers on component mount\n  useEffect(() => {\n    dispatch(loadStrangers(notif));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // filter users and set cards\n  useLayoutEffect(() => {\n    // filter strangers by age\n    let filteredUsers = strangers.filter(\n      (user) =>\n        user.age >= filter.age.minAge &&\n        user.age <= filter.age.maxAge &&\n        user.rating >= filter.rating.min &&\n        user.rating <= filter.rating.max\n    );\n    // filter strangers by keys\n    for (let key of [\"username\", \"city\", \"country\"]) {\n      filteredUsers =\n        filter[key].length > 0\n          ? filteredUsers.filter((user) =>\n              user[key].toLowerCase().includes(filter[key].toLowerCase())\n            )\n          : filteredUsers;\n    }\n    filteredUsers =\n      filter.gender.length > 0 && filter.gender !== \"both\"\n        ? filteredUsers.filter((user) => user.gender === filter.gender)\n        : filteredUsers;\n    filteredUsers =\n      filter.tags.length > 0\n        ? filteredUsers.filter((user) => {\n            const regexString = new RegExp(\n              filter.tags\n                .reduce((prev, acc) => `${acc}|${prev}`)\n                .replace(/\\\\/g, \"\\\\\\\\\")\n                .replace(\"(\", \"\\\\(\")\n                .replace(\")\", \"\\\\)\")\n            );\n            if (!user.tags || user.tags.length === 0) return true;\n            return user.tags.find((tag) => regexString.test(tag));\n          })\n        : filteredUsers;\n\n    if (location.pathname.length > 1) return;\n    const cards =\n      filteredUsers && filteredUsers.length ? (\n        filteredUsers.map((el) => <UserCard user={el} key={el.id} />)\n      ) : (\n        <Typography className={classes.Text}>No users to display</Typography>\n      );\n    setCards(cards);\n  }, [filter, classes.Text, strangers, location.pathname]);\n\n  const memorizedRoutes = useMemo(\n    () =>\n      allUsers &&\n      allUsers.map((el) => (\n        <Route\n          key={el.id}\n          path={`/strangers/:id`}\n          render={() => <UserProfile user={el} />}\n        />\n      )),\n    [allUsers]\n  );\n\n  useEffect(() => {\n    setRoutes(memorizedRoutes);\n  }, [memorizedRoutes]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.Strangers}\n    >\n      <Switch>\n        {routes}\n        <Route\n          path=\"/\"\n          exact\n          render={() => (\n            <Grid\n              className={classes.CardContainer}\n              container\n              item\n              xs={10}\n              spacing={3}\n            >\n              {cards}\n              <FilterSortWrapper />\n            </Grid>\n          )}\n        />\n      </Switch>\n    </Grid>\n  );\n};\n\nexport default Strangers;\n","import React from \"react\";\nimport { Box, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  root: {\n    width: \"70%\",\n    textAlign: \"center\",\n  },\n  \"@media (max-width: 960px)\": {\n    root: {\n      width: \"100%\",\n    },\n  },\n});\n\nfunction TabPanel(props) {\n  const classes = useStyles();\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Box\n      className={classes.root}\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`full-width-tabpanel-${index}`}\n      aria-labelledby={`full-width-tab-${index}`}\n      borderRadius={0}\n      {...other}\n    >\n      {children}\n    </Box>\n  );\n}\n\nexport default TabPanel;\n","import React, { useState } from \"react\";\nimport PublishIcon from \"@material-ui/icons/Publish\";\nimport { mediaUpload } from \"../../axios\";\nimport { Avatar, Badge, Fab, makeStyles } from \"@material-ui/core\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\nimport { setNewState } from \"../../store/generalSlice\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\n\nconst useStyles = makeStyles({\n  Avatar: {\n    width: \"300px\",\n    height: \"300px\",\n  },\n});\n\nconst AvatarContainer = ({ loadingDisabled }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { id, images, avatar } = useSelector((state) => state.general);\n  const { notif } = useNotifications();\n  const [displayedAvatar, setDisplayedAvatar] = useState(null);\n\n  const changeAvatarHandler = async (e) => {\n    if (loadingDisabled) {\n      notif(\"Cannot upload more than 5 images\", \"error\");\n      return;\n    }\n    if (!e.target.files || e.target.files.length === 0) {\n      return;\n    }\n    const image = e.target.files[0];\n    if (image.size > 1000000) {\n      notif(\"The file is larger than 1MB\", \"error\");\n      return;\n    }\n    if (image.type.search(/image\\/(png|jpeg)/i) < 0) {\n      notif(\"Only png anf jpeg files allowed\", \"error\");\n      return;\n    }\n    try {\n      const res = await mediaUpload(id, image);\n      const objectUrl = URL.createObjectURL(image);\n      const avatar = { id: res.data.data.id, image: objectUrl };\n\n      if (res.data.status && res.data.data) {\n        setDisplayedAvatar(avatar);\n        dispatch(setNewState({ images: [...images, avatar] }));\n        notif(\"The file was uploaded\", \"success\");\n      } else {\n        URL.revokeObjectURL(objectUrl);\n        throw new Error(\"Unable to upload a photo\");\n      }\n    } catch (e) {\n      notif(e, \"error\");\n    }\n  };\n\n  return (\n    <Badge\n      overlap=\"circle\"\n      anchorOrigin={{\n        vertical: \"bottom\",\n        horizontal: \"right\",\n      }}\n      badgeContent={\n        <Fab\n          color=\"primary\"\n          aria-label=\"upload image\"\n          component=\"label\"\n          onChange={(e) => changeAvatarHandler(e)}\n        >\n          <PublishIcon />\n          <input type=\"file\" style={{ display: \"none\" }} />\n        </Fab>\n      }\n    >\n      <Avatar\n        className={classes.Avatar}\n        src={displayedAvatar?.image || avatar?.image || defaultAvatar}\n      />\n    </Badge>\n  );\n};\n\nexport default AvatarContainer;\n","import { Avatar, Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\nimport { CONSTANTS } from \"../../models/ws\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    flexWrap: \"nowrap\",\n  },\n  Avatar: {\n    marginRight: \"1rem\",\n  },\n  Text: {\n    fontSize: \"1rem\",\n    marginLeft: \"auto\",\n    flexGrow: 1,\n  },\n  Date: {\n    fontSize: \"0.8rem\",\n    color: theme.palette.grey[500],\n  },\n}));\n\nconst NotificationListItem = ({ notification }) => {\n  const classes = useStyles();\n\n  const getText = (type) => {\n    switch (type) {\n      case CONSTANTS.UPDATE_TYPES.NEW_LIKE:\n        return `${notification.user.name} like you`;\n      case CONSTANTS.UPDATE_TYPES.DELETE_LIKE:\n        return `${notification.user.name} does not like you anymore`;\n      case CONSTANTS.UPDATE_TYPES.NEW_LOOK:\n        return `${notification.user.name} has visited you`;\n      case CONSTANTS.UPDATE_TYPES.NEW_MATCH:\n        return `Match with ${notification.user.name}!`;\n      case CONSTANTS.UPDATE_TYPES.DELETE_MATCH:\n        return `You have no match with ${notification.user.name} anymore`;\n      default:\n        throw new Error(\"[NotificationListItem] No such type in notification\");\n    }\n  };\n\n  const getTime = (time) => {\n    const date = new Date(time);\n    const now = new Date();\n    const today = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate()\n    ).valueOf();\n\n    // 24*60*60*1000\n    if (time < today - 86400000) {\n      return `${date.getDay()} ${date.getMonth()}`;\n    } else if (time < today) {\n      return `yesterday`;\n    } else {\n      return date.toTimeString().split(\" \")[0];\n    }\n  };\n\n  return (\n    <Grid container alignItems=\"center\" className={classes.root}>\n      <Avatar\n        className={classes.Avatar}\n        src={\n          notification.user?.avatar?.image ||\n          notification.user?.images[0]?.image ||\n          defaultAvatar\n        }\n      />\n      <Typography className={classes.Text}>\n        {getText(notification.type)}\n      </Typography>\n      <Typography className={classes.Date}>\n        {getTime(notification.date)}\n      </Typography>\n    </Grid>\n  );\n};\n\nexport default NotificationListItem;\n","import { makeStyles, Typography, Grid, Avatar } from \"@material-ui/core\";\nimport React from \"react\";\nimport defaultAvatar from \"../../Images/default-avatar.png\";\n\nconst useStyles = makeStyles((theme) => ({\n  Avatar: {\n    marginRight: \"1rem\",\n  },\n  Text: {\n    fontSize: \"1.5rem\",\n  },\n  SecondaryText: {\n    fontSize: \"1.2rem\",\n    color: theme.palette.grey[500],\n  },\n}));\n\nconst ProfileListItem = ({ user }) => {\n  const classes = useStyles();\n\n  return (\n    <Grid container alignItems=\"center\" wrap=\"nowrap\">\n      <Avatar\n        className={classes.Avatar}\n        src={\n          user?.avatar?.image || user?.images\n            ? user.images[0]?.image\n            : defaultAvatar\n        }\n      />\n      <Grid container direction=\"column\">\n        <Typography\n          className={classes.Text}\n        >{`${user.name} ${user.surname}`}</Typography>\n        <Typography\n          className={classes.SecondaryText}\n        >{`${user.age} years. ${user.city}, ${user.country}`}</Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ProfileListItem;\n","import {\n  Button,\n  makeStyles,\n  MenuItem,\n  MenuList,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { forwardRef } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport cn from \"classnames\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { CONSTANTS } from \"../../models/ws\";\nimport { setCompanion, setParent } from \"../../store/UISlice\";\nimport { readNotification } from \"../../store/WSSlice\";\nimport { borderRadius } from \"../../theme\";\nimport NotificationListItem from \"../NotificationListItem/NotificationListItem\";\nimport ProfileListItem from \"../ProfileListItem/ProfileListItem\";\n\nconst useStyles = makeStyles((theme) => ({\n  Button: {\n    padding: \"7px 30px\",\n  },\n  Menu: {\n    width: \"100%\",\n  },\n  ListItem: {\n    borderRadius: borderRadius,\n  },\n  Unread: {\n    backgroundColor: theme.palette.grey[200],\n  },\n  Center: {\n    textAlign: \"center\",\n  },\n}));\n\nconst ClickableUsersList = (\n  { items, autoFocusItem, defaultText, setOpen, action },\n  ref\n) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const location = useLocation();\n\n  function handleListKeyDown(event) {\n    if (!setOpen) return;\n    if (event.key === \"Tab\") {\n      event.preventDefault();\n      if (setOpen) setOpen(false);\n    }\n  }\n\n  const handleItemClick = (user, id = null) => {\n    if (!items.length) return;\n    if (id) dispatch(readNotification({ id }));\n    const parent = location.pathname.split(\"/\")[1];\n    dispatch(setParent({ parent }));\n    dispatch(setCompanion({ companion: user }));\n    history.push(`/strangers/${user.id}`);\n    if (setOpen) setOpen(false);\n  };\n\n  const handleActionClick = (e, id) => {\n    e.stopPropagation();\n    action.onClick(id);\n  };\n\n  return (\n    <MenuList\n      className={classes.Menu}\n      ref={ref}\n      autoFocusItem={autoFocusItem}\n      id=\"users-list\"\n      onKeyDown={handleListKeyDown}\n    >\n      {items && items.length > 0 ? (\n        items.map((el) => {\n          if (!el) return null;\n          return el.user ? (\n            <MenuItem\n              className={\n                el.status === CONSTANTS.UPDATE_STATUS.READ\n                  ? classes.ListItem\n                  : cn(classes.ListItem, classes.Unread)\n              }\n              onClick={() => handleItemClick(el.user, el.id)}\n              key={el.id}\n            >\n              <NotificationListItem notification={el} />\n            </MenuItem>\n          ) : (\n            <MenuItem\n              className={classes.ListItem}\n              onClick={() => handleItemClick(el)}\n              key={el.id}\n            >\n              <ProfileListItem user={el} />\n              {action && (\n                <Button\n                  className={classes.Button}\n                  color={action.color}\n                  endIcon={action.icon}\n                  onClick={(e) => handleActionClick(e, el.id)}\n                >\n                  unban user\n                </Button>\n              )}\n            </MenuItem>\n          );\n        })\n      ) : (\n        <Typography className={classes.Center}>{defaultText}</Typography>\n      )}\n    </MenuList>\n  );\n};\n\nexport default forwardRef(ClickableUsersList);\n","import React, { useLayoutEffect, useMemo } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { ReplayRounded } from \"@material-ui/icons\";\n\nimport { useBan } from \"../../hooks/useBan.hook\";\nimport ClickableUsersList from \"../ClickableUsersList/ClickableUsersList\";\nimport { loadUsers } from \"../../store/usersSlice\";\n\nconst Banned = () => {\n  const { banned, unbanAndUpdate } = useBan();\n  const dispatch = useDispatch();\n  const users = useSelector((state) => state.users.users);\n\n  useLayoutEffect(() => {\n    dispatch(loadUsers(banned));\n  }, [dispatch, banned]);\n\n  const bannedUsers = useMemo(\n    () =>\n      users && users.length\n        ? banned.map((id) => users.find((user) => user.id === id))\n        : [],\n    [banned, users]\n  );\n\n  const unbanAction = useMemo(\n    () => ({\n      icon: <ReplayRounded />,\n      color: \"secondary\",\n      onClick: unbanAndUpdate,\n    }),\n    [unbanAndUpdate]\n  );\n\n  return (\n    <Grid container justify=\"center\">\n      {banned ? (\n        <ClickableUsersList\n          items={bannedUsers}\n          defaultText={\"No users banned. Yet...\"}\n          action={unbanAction}\n        />\n      ) : (\n        <Typography>No users banned. Yet...</Typography>\n      )}\n    </Grid>\n  );\n};\n\nexport default Banned;\n","import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router-dom\";\nimport { api } from \"../../axios\";\nimport queryString from \"query-string\";\nimport {\n  changePassword,\n  changePasswordValid,\n  changeConfirmPassword,\n  changeConfirmValid,\n} from \"../../pages/Register/registerSlice\";\nimport Form from \"../Form/Form\";\nimport { Grid } from \"@material-ui/core\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\n\nconst UpdatePassword = (props) => {\n  const classes = useStyles();\n  const { password, passwordValid, confirm, confirmValid } = useSelector(\n    (state) => state.register\n  );\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const { notif } = useNotifications();\n  const formValid = passwordValid && confirmValid;\n  const queryParams = queryString.parse(location.search);\n\n  const checkValidity = async (k) => {\n    try {\n      const res = await api(\"/reset\", { params: { k } });\n      if (!res.data.status)\n        notif(`${res.data.data}. Try request link once again`, \"warning\");\n    } catch (e) {\n      notif(\"Server error\", \"error\");\n    }\n  };\n\n  const updatePasswordRequest = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await api.put(\"/reset\", { password });\n      if (res.data.status) notif(\"New password successfully saved\", \"success\");\n      else notif(res.data.data, \"success\");\n    } catch (e) {\n      notif(\"Server error\", \"error\");\n    }\n  };\n\n  useEffect(() => {\n    checkValidity(queryParams.k);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const inputs = [\n    {\n      name: \"password\",\n      type: \"password\",\n      label: \"Password\",\n      value: password,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changePasswordValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changePassword(e.target.value));\n      },\n      rules: {\n        helperText:\n          \"Use at least one lower- and uppercase letter, number and symbol. Min length 4\",\n        rule: {\n          minLength: 4,\n          maxLength: 20,\n          regex: /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/,\n        },\n      },\n    },\n    {\n      name: \"confirm\",\n      type: \"password\",\n      label: \"Confirm\",\n      value: confirm,\n      required: true,\n      onValidate: (isValid) => {\n        dispatch(changeConfirmValid(isValid));\n      },\n      onChange: (e) => {\n        dispatch(changeConfirmPassword(e.target.value));\n      },\n      rules: {\n        helperText: \"Confirm and password does not match\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: new RegExp(`^${password}$`),\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      component: \"button\",\n      type: \"submit\",\n      text: \"Save new password\",\n      size: \"large\",\n      disabled: !formValid,\n      onClick: updatePasswordRequest,\n    },\n  ];\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      className={classes.SingleForm}\n    >\n      <Form inputs={inputs} buttons={buttons} />\n    </Grid>\n  );\n};\n\nexport default UpdatePassword;\n","import React, { useState, forwardRef } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Slide from \"@material-ui/core/Slide\";\nimport { useDispatch } from \"react-redux\";\nimport { deleteAccount } from \"../../store/generalSlice\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\n\nconst Transition = forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default function DialogMessage({\n  buttonText,\n  yesText,\n  noText,\n  header,\n  text,\n  className,\n}) {\n  const [open, setOpen] = useState(false);\n  const dispatch = useDispatch();\n  const { notif } = useNotifications();\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteAccount(notif));\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"outlined\"\n        color=\"primary\"\n        onClick={handleClickOpen}\n        className={className}\n      >\n        {buttonText}\n      </Button>\n      <Dialog\n        open={open}\n        TransitionComponent={Transition}\n        keepMounted\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-slide-title\"\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle id=\"alert-dialog-slide-title\">{header}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-slide-description\">\n            {text}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            {noText}\n          </Button>\n          <Button onClick={handleDelete} color=\"secondary\">\n            {yesText}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n}\n","import React from \"react\";\nimport { Button, Grid, makeStyles } from \"@material-ui/core\";\nimport {\n  setHeader,\n  showBackButton,\n  setParent,\n  handleBack,\n} from \"../../store/UISlice\";\nimport {\n  changeEmail,\n  changeBirthDate,\n  changePhone,\n  changeMaxDist,\n  changeLookFor,\n  changeSearchAgeRange,\n  changeEmailValid,\n  changePhoneValid,\n  updateInfo,\n  setAdditionalState,\n} from \"../../pages/AdditionalInfo/additionalSlice\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { api } from \"../../axios\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport cn from \"classnames\";\nimport DialogMessage from \"../DialogMessage/DialogMessage\";\nimport { useEffect } from \"react\";\nimport Form from \"../Form/Form\";\nimport { useState } from \"react\";\n\nconst useStyles = makeStyles({\n  FullWidth: {\n    width: \"100%\",\n  },\n  Button: {\n    width: \"80%\",\n    margin: \"0.5rem 0\",\n  },\n  lastButton: {\n    marginTop: \"2rem\",\n  },\n  \"@media (max-width: 600px)\": {\n    Button: {\n      width: \"100%\",\n    },\n  },\n});\n\nconst UpdatePersonalInfo = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { notif } = useNotifications();\n\n  const {\n    email,\n    phone,\n    birthDate,\n    maxDist,\n    lookFor,\n    minAge,\n    maxAge,\n    emailValid,\n    phoneValid,\n  } = useSelector((state) => state.additional);\n  const general = useSelector((state) => state.general);\n\n  const changePasswordRequest = () => {\n    dispatch(setParent({ parent: \"profile\" }));\n    dispatch(setHeader({ header: \"Update password\" }));\n    dispatch(showBackButton());\n    api.post(\"/reset\", { email });\n    notif(\"Check your email\", \"info\");\n    // history.push(\"/profile/password-update\");\n  };\n  const [formValid, setFormValid] = useState(true);\n  const handleBackClick = () => {\n    dispatch(setAdditionalState(general));\n    dispatch(handleBack(history, \"profile\"));\n  };\n\n  const saveUserInfo = async (e) => {\n    e.preventDefault();\n    const body = {\n      email,\n      phone,\n      birthDate,\n      maxDist,\n      lookFor,\n      minAge,\n      maxAge,\n    };\n    dispatch(updateInfo(body, notif));\n  };\n\n  useEffect(() => {\n    const formValid = emailValid && phoneValid;\n    setFormValid(formValid);\n  }, [emailValid, phoneValid]);\n\n  const inputs = [\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeEmail(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeEmailValid(isValid));\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n    {\n      name: \"phone\",\n      type: \"text\",\n      label: \"Phone\",\n      value: phone,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changePhone(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changePhoneValid(isValid));\n      },\n      rules: {\n        helperText: \"invalid phone\",\n        rule: {\n          minLength: 0,\n          maxLength: 12,\n          regex: /^$|^\\+?\\d+$/,\n        },\n      },\n    },\n    {\n      name: \"birthDate\",\n      type: \"date\",\n      label: \"Birth date\",\n      value: birthDate,\n      onChange: (e) => {\n        dispatch(changeBirthDate(e.target.value));\n      },\n    },\n    {\n      name: \"lookFor\",\n      type: \"radio\",\n      label: \"I look for\",\n      values: [\"male\", \"female\", \"both\"],\n      value: lookFor,\n      onChange: (e) => {\n        dispatch(changeLookFor(e.target.value));\n      },\n    },\n    {\n      name: \"maxDist\",\n      type: \"slider\",\n      label: \"Search distance, km\",\n      step: 10,\n      min: 10,\n      max: 10000,\n      value: maxDist,\n      onChange: (value) => {\n        dispatch(changeMaxDist(value));\n      },\n    },\n    {\n      name: \"ageRange\",\n      type: \"slider\",\n      label: \"Age search range\",\n      value: [minAge, maxAge],\n      onChange: (value) => {\n        dispatch(changeSearchAgeRange(value));\n      },\n    },\n  ];\n\n  const formButtons = [\n    {\n      component: \"fab\",\n      type: \"submit\",\n      text: \"Save\",\n      size: \"large\",\n      disabled: !formValid,\n      onClick: saveUserInfo,\n    },\n  ];\n\n  const buttons = [\n    {\n      text: \"request change password link\",\n      size: \"large\",\n      onClick: changePasswordRequest,\n    },\n    {\n      text: \"back\",\n      size: \"large\",\n      onClick: handleBackClick,\n      className: classes.lastButton,\n    },\n  ];\n\n  const deleteAccountDialog = {\n    text:\n      \"This action is irreversable. All your images, chats and likes will be vanished.\",\n    header: \"Are you sure?\",\n    yesText: \"Agree\",\n    noText: \"Disagree\",\n    buttonText: \"Delete account\",\n    className: classes.Button,\n  };\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      className={classes.FullWidth}\n    >\n      <Form inputs={inputs} buttons={formButtons} />\n      <DialogMessage {...deleteAccountDialog} />\n      {buttons.map(\n        ({ component, variant, text, onClick, className, ...others }) => (\n          <Button\n            key={text}\n            className={\n              className ? cn(className, classes.Button) : classes.Button\n            }\n            variant={variant}\n            onClick={onClick}\n            {...others}\n          >\n            {text}\n          </Button>\n        )\n      )}\n    </Grid>\n  );\n};\n\nexport default UpdatePersonalInfo;\n","import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../Form/Form\";\nimport {\n  changeUsername,\n  changeName,\n  changeSurname,\n  changeGender,\n  changeBio,\n  changeCountry,\n  changeCity,\n  changeTags,\n  changeUsernameValid,\n  changeNameValid,\n  changeSurnameValid,\n  changeBioValid,\n  changeCountryValid,\n  changeCityValid,\n  updateInfo,\n  setAdditionalState,\n} from \"../../pages/AdditionalInfo/additionalSlice\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { handleBack } from \"../../store/UISlice\";\nimport { useHistory } from \"react-router-dom\";\n\nconst UpdatePublicInfo = () => {\n  const general = useSelector((state) => state.general);\n  const {\n    username,\n    name,\n    surname,\n    bio,\n    gender,\n    country,\n    city,\n    usernameValid,\n    nameValid,\n    surnameValid,\n    countryValid,\n    cityValid,\n    tags,\n  } = useSelector((state) => state.additional);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { notif } = useNotifications();\n\n  const [formValid, setFormValid] = useState(true);\n\n  useEffect(() => {\n    const formValid =\n      usernameValid && nameValid && surnameValid && countryValid && cityValid;\n    setFormValid(formValid);\n  }, [usernameValid, nameValid, surnameValid, countryValid, cityValid]);\n\n  const saveUserInfo = async (e) => {\n    e.preventDefault();\n    const body = { username, name, surname, gender, country, city, bio, tags };\n    dispatch(updateInfo(body, notif));\n  };\n\n  const handleBackClick = () => {\n    dispatch(setAdditionalState(general));\n    dispatch(handleBack(history, \"profile\"));\n  };\n\n  const inputs = [\n    {\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n      value: username,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeUsername(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeUsernameValid(isValid));\n      },\n      rules: {\n        helperText:\n          \"Use letters, numbers or symbols ., %, _, -, +. Min length 3\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: /^[\\w%-+.]+$/,\n        },\n      },\n    },\n    {\n      name: \"name\",\n      type: \"text\",\n      label: \"First name\",\n      value: name,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeName(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeNameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"surname\",\n      type: \"text\",\n      label: \"Last name\",\n      value: surname,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeSurname(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeSurnameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"gender\",\n      type: \"radio\",\n      label: \"I am\",\n      values: [\"male\", \"female\"],\n      value: gender,\n      onChange: (e) => {\n        dispatch(changeGender(e.target.value));\n      },\n    },\n    {\n      name: \"country\",\n      type: \"text\",\n      label: \"Country\",\n      value: country,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeCountry(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCountryValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"city\",\n      type: \"text\",\n      label: \"City\",\n      value: city,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeCity(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCityValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"bio\",\n      type: \"text\",\n      label: \"Bio\",\n      value: bio,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeBio(e.target.value));\n      },\n      onValidate: (isValid) => {\n        changeBioValid(isValid);\n      },\n      rules: {\n        helperText: \"Write some info about yourself\",\n        rule: {\n          minLength: 2,\n          maxLength: 256,\n          regex: /^.+$/,\n        },\n      },\n    },\n    {\n      name: \"tags\",\n      type: \"autocomplete\",\n      values: tags || [],\n      onChange: (values) => dispatch(changeTags(values)),\n    },\n  ];\n\n  const buttons = [\n    {\n      component: \"fab\",\n      type: \"submit\",\n      text: \"Save\",\n      size: \"large\",\n      disabled: !formValid,\n      onClick: saveUserInfo,\n    },\n    {\n      text: \"back\",\n      size: \"large\",\n      onClick: handleBackClick,\n      style: {\n        marginBottom: \"2rem\",\n      },\n    },\n  ];\n\n  return <Form inputs={inputs} buttons={buttons} />;\n};\n\nexport default UpdatePublicInfo;\n","import {\n  Button,\n  Checkbox,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  FormLabel,\n  Grid,\n  makeStyles,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport {\n  changeUseLocation,\n  updateInfo,\n} from \"../../pages/AdditionalInfo/additionalSlice\";\nimport { setNewState } from \"../../store/generalSlice\";\nimport { handleBack } from \"../../store/UISlice\";\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(3),\n  },\n  Buttons: {\n    marginTop: 30,\n  },\n}));\n\nconst ProfileSettings = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { useLocation } = useSelector((state) => state.general);\n  const [state, setState] = useState({\n    location: useLocation,\n    email: true,\n  });\n  const { notif } = useNotifications();\n\n  const { location, email } = state;\n\n  const handleChange = (event) => {\n    setState({ ...state, [event.target.name]: event.target.checked });\n  };\n  const handleCancel = () => {\n    dispatch(handleBack(history, \"profile\"));\n  };\n  const handleSave = () => {\n    console.log(\"[ProfileSettings]\", state);\n    dispatch(setNewState({ useLocation: state.location }));\n    dispatch(changeUseLocation(state.location));\n    dispatch(updateInfo({ useLocation: state.location }, notif));\n  };\n\n  return (\n    <Grid>\n      <FormControl component=\"fieldset\" className={classes.formControl}>\n        <FormLabel component=\"legend\">Profile settings</FormLabel>\n        <FormGroup>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={location}\n                onChange={handleChange}\n                color=\"primary\"\n                name=\"location\"\n              />\n            }\n            label=\"Use my current location for search\"\n          />\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={email}\n                onChange={handleChange}\n                color=\"primary\"\n                name=\"email\"\n              />\n            }\n            label=\"Send email notification\"\n          />\n        </FormGroup>\n        <Grid className={classes.Buttons} container justify=\"space-around\">\n          <Button onClick={handleCancel}>cancel</Button>\n          <Button onClick={handleSave} variant=\"contained\">\n            Save\n          </Button>\n        </Grid>\n      </FormControl>\n    </Grid>\n  );\n};\n\nexport default ProfileSettings;\n","import React from \"react\";\nimport { Switch, Route, useHistory } from \"react-router-dom\";\nimport { setHeader, showBackButton, setParent } from \"../../store/UISlice\";\nimport UpdatePassword from \"../../components/UpdatePassword/UpdatePassword\";\nimport UpdatePersonalInfo from \"../../components/UpdatePersonalInfo/UpdatePersonalInfo\";\nimport UpdatePublicInfo from \"../../components/UpdatePublicInfo/UpdatePublicInfo\";\nimport ProfileSettings from \"../../components/ProfileSettings/ProfileSettings\";\nimport { useDispatch } from \"react-redux\";\nimport { Button, Grid, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  root: {\n    width: \"100%\",\n  },\n  Button: {\n    width: \"60%\",\n    margin: \"0.5rem 0\",\n  },\n  \"@media (max-width: 600px)\": {\n    Button: {\n      width: \"100%\",\n    },\n  },\n});\nconst Settings = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const selectRoute = ({ header, url }) => {\n    dispatch(setParent({ parent: \"profile\" }));\n    dispatch(setHeader({ header }));\n    dispatch(showBackButton());\n    history.push(`/profile/${url}`);\n  };\n\n  const updatePublicInfo = () => {\n    selectRoute({\n      header: \"Update public info\",\n      url: \"public\",\n    });\n  };\n  const updatePersonalInfo = () => {\n    selectRoute({\n      header: \"Update personal info\",\n      url: \"personal\",\n    });\n  };\n  const updateSettings = () => {\n    selectRoute({\n      header: \"Settings\",\n      url: \"settings\",\n    });\n  };\n\n  return (\n    <>\n      <Switch>\n        <Route path=\"/profile\" exact>\n          <Grid\n            container\n            direction=\"column\"\n            alignItems=\"center\"\n            className={classes.root}\n          >\n            <Button className={classes.Button} onClick={updatePublicInfo}>\n              Update public info\n            </Button>\n            <Button className={classes.Button} onClick={updatePersonalInfo}>\n              Update personal info\n            </Button>\n            <Button className={classes.Button} onClick={updateSettings}>\n              Settings\n            </Button>\n          </Grid>\n        </Route>\n        <Route path=\"/profile/public\" component={UpdatePublicInfo} />\n        <Route path=\"/profile/personal\" component={UpdatePersonalInfo} />\n        <Route path=\"/profile/settings\" component={ProfileSettings} />\n        <Route path=\"/profile/password-update\" component={UpdatePassword} />\n      </Switch>\n    </>\n  );\n};\n\nexport default Settings;\n","import { Tabs, Tab, Grid, makeStyles } from \"@material-ui/core\";\nimport React, { createContext, useState } from \"react\";\nimport TabPanel from \"../../containers/TabPanel/TabPanel\";\nimport AvatarContainer from \"../../components/Avatar/AvatarContainer\";\nimport {\n  backgroundColor,\n  borderRadius,\n  primaryColor,\n  secondaryColor,\n} from \"../../theme\";\nimport Gallery from \"../../components/Gallery/Gallery\";\nimport Banned from \"../../components/Banned/Banned\";\nimport Settings from \"../../components/Settings/Settings\";\nimport { useSelector } from \"react-redux\";\n\nconst useStyles = makeStyles({\n  indicator: {\n    backgroundColor: \"#ffffff00\",\n    border: `1px solid ${primaryColor.dark}`,\n    bottom: 0,\n    height: \"100%\",\n    borderRadius: borderRadius,\n    \"&:hover,&:focus\": {\n      borderColor: secondaryColor.main,\n    },\n  },\n  TabPanel: {\n    backgroundColor: backgroundColor.foreground,\n    borderRadius: borderRadius,\n    padding: \"5px\",\n  },\n  Profile: {\n    minHeight: \"100vh\",\n    padding: \"30px\",\n    paddingBlockEnd: \"60px\",\n  },\n  Tab: {\n    \"&:hover,&:focus\": {\n      color: secondaryColor.main,\n    },\n  },\n});\n\nconst buttons = [\n  {\n    id: 0,\n    text: \"Gallery\",\n    component: <Gallery />,\n  },\n  {\n    id: 1,\n    text: \"Banned\",\n    component: <Banned />,\n  },\n  {\n    id: 2,\n    text: \"Settings\",\n    component: <Settings />,\n  },\n];\nexport const TabContext = createContext(buttons[0].id);\n\nconst Profile = () => {\n  const classes = useStyles();\n  const [currentTab, setCurrentTab] = useState(0);\n  const { images } = useSelector((state) => state.general);\n\n  const selectTabHandler = (e, next) => {\n    setCurrentTab(next);\n  };\n\n  const tabs = buttons.map((el, index) => (\n    <Tab className={classes.Tab} disableRipple label={el.text} key={index} />\n  ));\n\n  const getPanel = () => (\n    <TabPanel\n      value={currentTab}\n      index={buttons[currentTab].id}\n      key={buttons[currentTab].id}\n    >\n      {buttons[currentTab].component}\n    </TabPanel>\n  );\n\n  return (\n    <Grid\n      container\n      wrap=\"nowrap\"\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"center\"\n      className={classes.Profile}\n    >\n      <TabContext.Provider value={currentTab}>\n        <AvatarContainer loadingDisabled={images && images.length >= 5} />\n        <Tabs\n          classes={{ root: classes.TabPanel, indicator: classes.indicator }}\n          value={currentTab}\n          onChange={selectTabHandler}\n        >\n          {tabs}\n        </Tabs>\n        {getPanel()}\n      </TabContext.Provider>\n    </Grid>\n  );\n};\n\nexport default Profile;\n","import {\n  Badge,\n  Button,\n  Grid,\n  Typography,\n  makeStyles,\n  Popper,\n  Paper,\n  ClickAwayListener,\n  Fade,\n  AppBar,\n} from \"@material-ui/core\";\nimport { ChevronLeftRounded } from \"@material-ui/icons\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport React, { useEffect, useRef, useState, cloneElement } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { handleBack } from \"../../store/UISlice\";\nimport { backgroundColor, primaryColor } from \"../../theme\";\nimport PropTypes from \"prop-types\";\nimport { loadUsers } from \"../../store/usersSlice\";\nimport ClickableUsersList from \"../ClickableUsersList/ClickableUsersList\";\nimport useScrollTrigger from \"@material-ui/core/useScrollTrigger\";\nimport { setAdditionalState } from \"../../pages/AdditionalInfo/additionalSlice\";\nimport { CONSTANTS } from \"../../models/ws\";\nimport { readAllNotifications } from \"../../store/WSSlice\";\n\nfunction ElevationScroll({ children }) {\n  const trigger = useScrollTrigger({\n    disableHysteresis: true,\n    threshold: 0,\n  });\n\n  return cloneElement(children, {\n    elevation: trigger ? 4 : 0,\n  });\n}\n\nconst useStyles = makeStyles({\n  Appbar: {\n    paddingTop: \"10px\",\n    backgroundColor: backgroundColor.background,\n  },\n  Header: {\n    textAlign: \"center\",\n    fontFamily: \"Righteous\",\n    color: primaryColor.dark,\n    fontSize: \"2rem\",\n    textTransform: \"capitalize\",\n  },\n  Popper: {\n    zIndex: 5,\n    textAlign: \"center\",\n  },\n  PopperPaper: {\n    padding: \"1rem 1.5rem\",\n  },\n  Notifications: {\n    overflowY: \"scroll\",\n    maxHeight: 500,\n    scrollbarWidth: \"none\",\n    \"&hover\": {\n      scrollbarWidth: \"auto\",\n    },\n    \"&:hover>&::-webkit-scrollbar\": {\n      opacity: 1,\n    },\n    \"&::-webkit-scrollbar\": {\n      width: 3,\n      opacity: 0,\n    },\n    \"&::-webkit-scrollbar-thumb\": {\n      borderRadius: 3,\n    },\n  },\n  Category: {\n    fontSize: \"1rem\",\n    fontWeight: 700,\n  },\n  Button: {\n    marginLeft: 20,\n  },\n});\n\nconst Header = ({ header }) => {\n  const classes = useStyles();\n  const allUsers = useSelector((state) => state.users.users);\n  const general = useSelector((state) => state.general);\n  const { notifications } = useSelector((state) => state.WS);\n  const [filledNotifications, setFilledNotifications] = useState(null);\n  const loc = useLocation();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n  const anchorRef = useRef(null);\n\n  useEffect(() => {\n    const usersIds = notifications.map((el) => el.userId);\n    dispatch(loadUsers(usersIds));\n  }, [dispatch, notifications]);\n\n  useEffect(() => {\n    if (!notifications || !notifications.length) return;\n    const filledNotifications = notifications\n      .map((notification) => {\n        const user = allUsers.find((user) => user.id === notification.userId);\n        return { ...notification, user };\n      })\n      .reverse();\n    if (filledNotifications) setFilledNotifications(filledNotifications);\n  }, [allUsers, notifications]);\n\n  const handleToggle = () => {\n    setOpen((prevOpen) => !prevOpen);\n  };\n\n  const handleBackButton = () => {\n    const parent = loc.pathname.split(\"/\")[1];\n    if (parent === \"profile\") {\n      dispatch(setAdditionalState(general));\n    }\n    dispatch(handleBack(history, parent));\n  };\n\n  const readAll = () => {\n    dispatch(readAllNotifications());\n  };\n\n  //show backbutton only if we're in submenu\n  const showBackButton = loc.pathname.split(\"/\").length > 2;\n\n  const handleClose = (event) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n    setOpen(false);\n  };\n\n  const unreadNotifications =\n    filledNotifications && filledNotifications.length\n      ? filledNotifications.reduce(\n          (acc, cur) =>\n            acc + (cur.status === CONSTANTS.UPDATE_STATUS.NEW ? 1 : 0),\n          0\n        )\n      : 0;\n\n  return (\n    <ElevationScroll>\n      <AppBar className={classes.Appbar}>\n        <Grid container justify=\"space-around\" alignItems=\"center\" item>\n          <Grid item xs={2}>\n            {showBackButton ? (\n              <Button variant=\"text\" color=\"inherit\" onClick={handleBackButton}>\n                <ChevronLeftRounded\n                  style={{ color: primaryColor.dark }}\n                  fontSize=\"large\"\n                />\n              </Button>\n            ) : null}\n          </Grid>\n          <Grid item xs={6}>\n            <Typography variant=\"h1\" className={classes.Header}>\n              {header}\n            </Typography>\n          </Grid>\n          <Grid item xs={2}>\n            <Button\n              ref={anchorRef}\n              variant=\"text\"\n              color=\"inherit\"\n              onClick={handleToggle}\n            >\n              <Badge\n                color=\"secondary\"\n                overlap=\"circle\"\n                variant=\"dot\"\n                badgeContent={unreadNotifications}\n              >\n                <NotificationsIcon\n                  style={{ color: primaryColor.dark }}\n                  fontSize=\"large\"\n                />\n              </Badge>\n            </Button>\n            <Popper\n              className={classes.Popper}\n              open={open}\n              anchorEl={anchorRef.current}\n              placement=\"left\"\n              transition\n              disablePortal\n            >\n              {({ TransitionProps }) => (\n                <Fade {...TransitionProps}>\n                  <Paper className={classes.PopperPaper}>\n                    <Typography className={classes.Category}>\n                      Notifications\n                    </Typography>\n                    {filledNotifications ? (\n                      <Grid\n                        container\n                        justify=\"center\"\n                        alignItems=\"center\"\n                        className={classes.Notifications}\n                      >\n                        <ClickAwayListener onClickAway={handleClose}>\n                          <ClickableUsersList\n                            items={filledNotifications}\n                            autoFocusItem={open}\n                            setOpen={setOpen}\n                          />\n                        </ClickAwayListener>\n                        <Button\n                          size=\"small\"\n                          onClick={readAll}\n                          className={classes.Button}\n                        >\n                          Read all\n                        </Button>\n                      </Grid>\n                    ) : (\n                      <Typography>No recent actions yet</Typography>\n                    )}\n                  </Paper>\n                </Fade>\n              )}\n            </Popper>\n          </Grid>\n        </Grid>\n      </AppBar>\n    </ElevationScroll>\n  );\n};\n\nHeader.propTypes = {\n  header: PropTypes.string,\n  notification: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.string),\n    // PropTypes.shape({\n    //   id: PropTypes.string,\n    //   avatarImg: PropTypes.string,\n    //   username: PropTypes.string,\n    // }),\n    PropTypes.oneOf([null]),\n  ]),\n};\n\nexport default Header;\n","import {\n  Avatar,\n  Badge,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { useChat } from \"../../../hooks/useChat.hook\";\nimport { CONSTANTS } from \"../../../models/ws\";\nimport { setChat } from \"../../../store/chatSlice\";\nimport { setCompanion } from \"../../../store/UISlice\";\nimport { borderRadius } from \"../../../theme\";\n\nconst useStyles = makeStyles((theme) => ({\n  List: {\n    width: \"100%\",\n    textAlign: \"center\",\n  },\n  ListItem: {\n    width: \"80%\",\n    margin: \"0 auto\",\n    display: \"flex\",\n    justifyContent: \"space-around\",\n    alignItems: \"center\",\n    borderRadius: borderRadius,\n  },\n  Username: {\n    fontWeight: 800,\n  },\n  Text: {\n    fontSize: \"1rem\",\n  },\n  Secondary: {\n    display: \"-webkit-box\",\n    lineClamp: 1,\n    boxOrient: \"vertical\",\n    overflow: \"hidden\",\n  },\n  Status: { border: `3px solid theme.palette.grey[500]` },\n  Online: {\n    backgroundColor: theme.palette.success.main,\n  },\n  Badge: {\n    backgroundColor: \"#44b700\",\n    color: \"#44b700\",\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\n    \"&::after\": {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      borderRadius: \"50%\",\n      animation: \"$ripple 1.2s infinite ease-in-out\",\n      border: \"1px solid currentColor\",\n      content: '\"\"',\n    },\n  },\n  \"@keyframes ripple\": {\n    \"0%\": {\n      transform: \"scale(.8)\",\n      opacity: 1,\n    },\n    \"100%\": {\n      transform: \"scale(2.4)\",\n      opacity: 0,\n    },\n  },\n  NewMessages: {\n    padding: \"5px 8px\",\n    borderRadius: 20,\n    backgroundColor: theme.palette.primary.light,\n  },\n}));\n\nconst ChatList = () => {\n  const classes = useStyles();\n  const chats = useSelector((state) => state.chat.chats);\n  const users = useSelector((state) => state.users.users);\n  const myId = useSelector((state) => state.general.id);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { getChatsInfo } = useChat();\n\n  useEffect(() => {\n    getChatsInfo();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleChatSelect = (chatId, user) => {\n    dispatch(setChat({ id: chatId }));\n    dispatch(setCompanion({ companion: user }));\n    history.push(`/chat/${chatId}`);\n  };\n\n  const chatList = chats.map((chat) => {\n    const newChatItem = { ...chat };\n    const recepient = newChatItem.userIds.find((id) => id !== myId);\n    const user = users.find((user) => user.id === recepient);\n    newChatItem.user = { ...user };\n    return newChatItem;\n  });\n\n  return (\n    <List className={classes.List}>\n      {chatList.length ? (\n        chatList.map((chat) => {\n          const { name, avatar, images, isOnline } = {\n            ...chat.user,\n          };\n          const { messages } = { ...chat };\n          const newMessages = messages.filter(\n            (el) => el.status !== CONSTANTS.MESSAGE_STATUS.STATUS_READ\n          );\n          console.log(chat);\n          const img = avatar?.image || images[0]?.image || null;\n          return (\n            <ListItem\n              className={classes.ListItem}\n              button\n              onClick={() => handleChatSelect(chat.id, chat.user)}\n              key={chat.id}\n            >\n              <Badge\n                color=\"primary\"\n                overlap=\"circle\"\n                variant=\"dot\"\n                badgeContent={isOnline ? 1 : 0}\n                classes={{ badge: classes.Badge }}\n              >\n                <ListItemAvatar>\n                  <Avatar src={img} alt={name} />\n                </ListItemAvatar>\n              </Badge>\n              <ListItemText\n                primary={name}\n                primaryTypographyProps={{ className: classes.Username }}\n                secondary={\n                  messages ? messages[messages.length - 1]?.text || \"\" : \"\"\n                }\n                secondaryTypographyProps={{ className: classes.Secondary }}\n              />\n              {newMessages.length > 0 && (\n                <div className={classes.NewMessages}>{newMessages.length}</div>\n              )}\n            </ListItem>\n          );\n        })\n      ) : (\n        <Typography className={classes.Text}>No chats yet</Typography>\n      )}\n    </List>\n  );\n};\n\nexport default ChatList;\n","import {\n  Avatar,\n  Badge,\n  Grid,\n  makeStyles,\n  Paper,\n  Typography,\n} from \"@material-ui/core\";\nimport { DoneAllRounded, DoneRounded } from \"@material-ui/icons\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { CONSTANTS } from \"../../../../models/ws\";\nimport {\n  backgroundColor,\n  primaryColor,\n  secondaryColor,\n  theme,\n} from \"../../../../theme\";\n\nconst useStyles = makeStyles({\n  Container: {\n    width: \"100%\",\n    justifyContent: ({ self }) => (self ? \"flex-end\" : \"flex-start\"),\n    \"& $Paper\": {\n      borderRadius: ({ self }) =>\n        self ? \"30px 30px 5px 30px\" : \"5px 30px 30px 30px\",\n    },\n  },\n  Paper: {\n    padding: \"0.4rem 1.5rem\",\n    marginLeft: \"1rem\",\n    maxWidth: \"60%\",\n    backgroundColor: ({ self }) =>\n      self ? primaryColor.light : backgroundColor.foreground,\n  },\n  Typography: {\n    fontSize: \"1rem\",\n  },\n  Info: {\n    justifyContent: ({ self }) => (self ? \"flex-end\" : \"flex-start\"),\n  },\n  Date: {\n    fontSize: \"0.7rem\",\n    color: primaryColor.contrastTextLighter,\n  },\n  Icon: {\n    marginLeft: \"0.3rem\",\n    fontSize: \"0.7rem\",\n    color: ({ status }) =>\n      status === CONSTANTS.MESSAGE_STATUS.STATUS_NEW\n        ? primaryColor.contrastTextLighter\n        : secondaryColor.main,\n  },\n  Badge: {\n    backgroundColor: \"#44b700\",\n    color: \"#44b700\",\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\n    transform: \"translate(0px, 0px)\",\n    \"&::after\": {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      borderRadius: \"50%\",\n      border: \"1px solid currentColor\",\n      content: '\"\"',\n    },\n  },\n  \"@media (max-width: 600px)\": {\n    Avatar: {\n      display: \"none\",\n    },\n    Paper: {\n      maxWidth: \"100%\",\n      padding: \"0.3rem 1rem\",\n    },\n  },\n});\n\nconst getDate = (date) => {\n  const d = new Date(date);\n  const minutes = d.getMinutes() < 10 ? \"0\" + d.getMinutes() : d.getMinutes();\n  return `${d.getHours()}:${minutes}`;\n};\n\nconst Message = (props) => {\n  const { self, text, image, name, date, status } = { ...props };\n  const isOnline = useSelector((state) => state.UI.companion.isOnline);\n  const classes = useStyles({ self, status });\n\n  return (\n    <Grid container className={classes.Container}>\n      {self ? null : (\n        <Badge\n          color=\"primary\"\n          variant=\"dot\"\n          badgeContent={isOnline ? 1 : 0}\n          classes={{ badge: classes.Badge }}\n        >\n          <Avatar className={classes.Avatar} src={image} alt={name} />\n        </Badge>\n      )}\n      <Paper elevation={1} className={classes.Paper}>\n        <Grid container>\n          <Typography className={classes.Typography}>{text}</Typography>\n        </Grid>\n        <Grid className={classes.Info} container alignItems=\"center\">\n          <Typography component=\"span\" className={classes.Date}>\n            {getDate(date)}\n          </Typography>\n          {status === CONSTANTS.MESSAGE_STATUS.STATUS_READ ? (\n            <DoneAllRounded className={classes.Icon} />\n          ) : (\n            <DoneRounded className={classes.Icon} />\n          )}\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n};\n\nexport default Message;\n","import { Grid, Fab, InputBase, makeStyles } from \"@material-ui/core\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useChat } from \"../../../../hooks/useChat.hook\";\nimport { backgroundColor } from \"../../../../theme\";\n\nconst useStyles = makeStyles({\n  Wrapper: {\n    border: \"1px solid #ccc\",\n    borderRadius: \"45px\",\n    padding: \"10px\",\n    backgroundColor: backgroundColor.foreground,\n  },\n  Input: {\n    flexGrow: 2,\n    paddingLeft: \"20px\",\n  },\n  Send: {\n    boxShadow: \"none\",\n  },\n  Icon: {\n    transform: \"rotate(-38deg) skew(17deg, 4deg) translateX(2px)\",\n  },\n  Form: {\n    width: \"100%\",\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n\nconst SendForm = () => {\n  const classes = useStyles();\n  const [message, setMessage] = React.useState(\"\");\n  const id = useSelector((state) => state.UI.companion.id);\n  const { newMsg } = useChat();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!message.length) return;\n    newMsg(id, message);\n    setMessage(\"\");\n  };\n\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        className={classes.Wrapper}\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignItems=\"center\"\n        item\n        xs={10}\n        sm={8}\n      >\n        <form onSubmit={handleSubmit} className={classes.Form}>\n          <InputBase\n            className={classes.Input}\n            onChange={(e) => setMessage(e.target.value)}\n            value={message}\n          />\n          <Fab\n            type=\"submit\"\n            className={classes.Send}\n            size=\"small\"\n            color=\"secondary\"\n          >\n            <SendIcon className={classes.Icon} />\n          </Fab>\n        </form>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default SendForm;\n","import { makeStyles, Grid, List, ListItem } from \"@material-ui/core\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useChat } from \"../../../hooks/useChat.hook\";\nimport { CONSTANTS } from \"../../../models/ws\";\nimport Message from \"./Message/Message\";\nimport SendForm from \"./SendForm/SendForm\";\n\nconst useStyles = makeStyles({\n  Container: {\n    minHeight: \"91vh\",\n  },\n  List: {\n    flexGrow: 2,\n    width: \"70%\",\n    maxHeight: \"70vh\",\n    margin: \"0 auto\",\n    overflowY: \"auto\",\n  },\n  ListItem: {\n    margin: \"20px auto\",\n  },\n  Header: {\n    marginTop: \"30px\",\n  },\n  SendForm: {\n    marginTop: \"auto\",\n    marginBottom: \"70px\",\n  },\n});\n\nconst ChatRoom = () => {\n  const { name, avatar, images } = useSelector((state) => state.UI.companion);\n  const { chat, chats } = useSelector((state) => state.chat);\n  const messages = chats.find((ch) => ch.id === chat).messages;\n  const myId = useSelector((state) => state.general.id);\n  const classes = useStyles();\n  const { readMsg } = useChat();\n  const [mappedMessages, setMappedMessages] = useState([]);\n  const messagesEndRef = useRef(null);\n  console.log(`[ChatRoom] mappedMessages`, mappedMessages);\n  console.log(`[ChatRoom] messages`, messages);\n\n  const formatedMessages = useMemo(\n    () =>\n      !messages || !messages.length\n        ? []\n        : messages.map((el) => (\n            <ListItem key={el.id} className={classes.ListItem}>\n              <Message\n                self={el.sender === myId}\n                text={el.text}\n                image={avatar?.image || images[0]?.image}\n                name={name}\n                date={el.date}\n                status={el.status}\n              />\n            </ListItem>\n          )),\n    [avatar, classes.ListItem, images, messages, myId, name]\n  );\n\n  useEffect(() => {\n    setMappedMessages(formatedMessages);\n  }, [formatedMessages]);\n\n  useEffect(() => {\n    const readAllMessages = () => {\n      messages.forEach((message) => {\n        if (message.sender !== myId) {\n          switch (message.status) {\n            case CONSTANTS.MESSAGE_STATUS.STATUS_NEW:\n            case CONSTANTS.MESSAGE_STATUS.STATUS_DELIVERED:\n              readMsg(message);\n              return;\n            case CONSTANTS.MESSAGE_STATUS.STATUS_READ:\n            default:\n              return;\n          }\n        }\n      });\n    };\n    const scrollToBottom = () => {\n      messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n    };\n\n    if (!messages || !messages.length) return;\n    readAllMessages();\n    scrollToBottom();\n  }, [messages, myId, readMsg]);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"flex-start\"\n      alignItems=\"stretch\"\n      spacing={1}\n      className={classes.Container}\n    >\n      <List className={classes.List}>\n        {mappedMessages.length ? mappedMessages : \"No messages yet\"}\n        <div ref={messagesEndRef} />\n      </List>\n      <Grid item className={classes.SendForm}>\n        <SendForm />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default ChatRoom;\n","import { makeStyles, Grid } from \"@material-ui/core\";\nimport React from \"react\";\nimport ChatList from \"./ChatList/ChatList\";\nimport ChatRoom from \"./ChatRoom/ChatRoom\";\nimport { useSelector } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\n\nconst useStyles = makeStyles({\n  Grid: {\n    overflow: \"hidden\",\n    width: \"100%\",\n  },\n});\n\nconst Chat = () => {\n  const classes = useStyles();\n  const chats = useSelector((state) => state.chat.chats);\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      direction=\"column\"\n      className={classes.Grid}\n    >\n      <Switch>\n        {chats.map((el) => (\n          <Route\n            key={el.id}\n            path={`/chat/${el.id}`}\n            render={() => <ChatRoom />}\n          />\n        ))}\n        <Route path=\"/chat\" exact render={() => <ChatList />} />\n      </Switch>\n    </Grid>\n  );\n};\n\nexport default Chat;\n","import React, { useState, useEffect } from \"react\";\nimport { Grid, makeStyles, Typography } from \"@material-ui/core\";\nimport { useSelector } from \"react-redux\";\nimport ClickableUsersList from \"../../components/ClickableUsersList/ClickableUsersList\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingBottom: 40,\n  },\n  Grid: {\n    overflow: \"hidden\",\n    width: \"100%\",\n  },\n  Header: {\n    fontSize: \"1.5rem\",\n    marginTop: 30,\n    fontFamily: \"Righteous\",\n    color: theme.palette.primary.dark,\n  },\n  List: {\n    width: \"80%\",\n  },\n}));\n\nconst Social = () => {\n  const classes = useStyles();\n  const { lookedBy, likedBy, matches } = useSelector((state) => state.general);\n  const { users } = useSelector((state) => state.users);\n\n  const [looked, setLooked] = useState([]);\n  const [liked, setLiked] = useState([]);\n  const [matched, setMatched] = useState([]);\n\n  useEffect(() => {\n    if (!lookedBy || !lookedBy.length) return;\n    const lookedUsers = lookedBy.map((id) =>\n      users.find((user) => user.id === id)\n    );\n    setLooked(lookedUsers);\n  }, [users, lookedBy]);\n\n  useEffect(() => {\n    if (!likedBy || !likedBy.length) return;\n    const lookedUsers = likedBy.map((id) =>\n      users.find((user) => user.id === id)\n    );\n    setLiked(lookedUsers);\n  }, [users, likedBy]);\n\n  useEffect(() => {\n    if (!matches || !matches.length) return;\n    const matchedUsers = matches.map((id) =>\n      users.find((user) => user.id === id)\n    );\n    setMatched(matchedUsers);\n  }, [users, matches]);\n\n  return (\n    <Grid\n      container\n      alignItems=\"center\"\n      direction=\"column\"\n      className={classes.root}\n    >\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        className={classes.List}\n      >\n        <Typography variant=\"h2\" className={classes.Header}>\n          People, who looked me\n        </Typography>\n        <ClickableUsersList items={looked} defaultText={\"No one visited you\"} />\n      </Grid>\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        className={classes.List}\n      >\n        <Typography variant=\"h2\" className={classes.Header}>\n          People, who liked me\n        </Typography>\n        <ClickableUsersList items={liked} defaultText={\"No one liked you\"} />\n      </Grid>\n      <Grid\n        container\n        direction=\"column\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        className={classes.List}\n      >\n        <Typography variant=\"h2\" className={classes.Header}>\n          People, who matched with me\n        </Typography>\n        <ClickableUsersList items={matched} defaultText={\"No one liked you\"} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Social;\n","import React, { useEffect } from \"react\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Switch, Route, useHistory, withRouter, Link } from \"react-router-dom\";\nimport { logout } from \"../../store/generalSlice\";\nimport {\n  setCompanion,\n  setHeader,\n  setParent,\n  setSelectedTab,\n} from \"../../store/UISlice\";\n\nimport {\n  AppBar,\n  Tabs,\n  Tab,\n  Container,\n  Grid,\n  CircularProgress,\n} from \"@material-ui/core\";\nimport {\n  Search,\n  Message,\n  Settings,\n  ExitToApp,\n  People,\n} from \"@material-ui/icons\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { backgroundColor } from \"../../theme\";\n\nimport Strangers from \"../../pages/Strangers/Strangers\";\nimport Profile from \"../../pages/Profile/Profile\";\nimport Header from \"../../components/Header/Header\";\nimport Chat from \"../Chat/Chat\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useWS } from \"../../hooks/useWS.hook\";\nimport { setChat } from \"../../store/chatSlice\";\nimport { useChat } from \"../../hooks/useChat.hook\";\nimport Social from \"../Social/Social\";\n\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 500,\n  },\n  selectedTab: {\n    color: \"red\",\n  },\n  AppBar: {\n    position: \"fixed\",\n    left: 0,\n    bottom: 0,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    minWidth: 500,\n  },\n  View: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  Max: {\n    width: \"100%\",\n    height: \"100vh\",\n  },\n  Container: {\n    paddingTop: \"70px\",\n    backgroundColor: backgroundColor.background,\n    maxWidth: \"100vw\",\n    width: \"100%\",\n  },\n  Tab: {\n    minWidth: 100,\n  },\n});\n\nconst tabs = [\n  {\n    index: 0,\n    label: \"Strangers\",\n    icon: <Search />,\n    content: <Strangers />,\n    url: \"/\",\n  },\n  {\n    index: 1,\n    label: \"Chat\",\n    icon: <Message />,\n    content: <Chat />,\n    url: \"/chat\",\n  },\n  {\n    index: 2,\n    label: \"Social\",\n    icon: <People />,\n    content: <Social />,\n    url: \"/social\",\n  },\n  {\n    index: 3,\n    label: \"Settings\",\n    icon: <Settings />,\n    content: <Profile />,\n    url: \"/profile\",\n  },\n  {\n    index: 4,\n    label: \"Logout\",\n    icon: <ExitToApp />,\n    content: null,\n    url: \"/logout\",\n  },\n];\n\nconst Main = () => {\n  const { notif } = useNotifications();\n  const { header, selectedTab, companion } = useSelector((state) => state.UI);\n  const { isLoading } = useSelector((state) => state.general);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n  const { getChatsInfo } = useChat();\n  useWS();\n\n  const handleChange = async (e, url) => {\n    if (url === \"/logout\") {\n      dispatch(logout(notif));\n      history.push(\"/login\");\n      return;\n    }\n    const tab = tabs.find((e) => e.url === url);\n    dispatch(setHeader({ header: tab.label }));\n    dispatch(setCompanion({ companion: null }));\n    dispatch(setSelectedTab({ selectedTab: tab }));\n    dispatch(setChat(null));\n    dispatch(setParent({ parent: url.substr(1) }));\n    history.push(url);\n  };\n\n  useEffect(() => {\n    getChatsInfo();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const renderedTabs = tabs.map((el) => {\n    return (\n      <Tab\n        icon={el.icon}\n        value={el.url}\n        key={el.index}\n        component={Link}\n        to={el.url}\n        className={classes.Tab}\n      />\n    );\n  });\n\n  return (\n    <Container className={classes.root}>\n      {isLoading ? (\n        <Grid\n          container\n          justify=\"center\"\n          alignItems=\"center\"\n          className={classes.Max}\n        >\n          <CircularProgress />\n        </Grid>\n      ) : (\n        <Grid\n          container\n          direction=\"column\"\n          justify=\"flex-start\"\n          alignItems=\"stretch\"\n          spacing={1}\n          className={classes.Container}\n        >\n          <Header header={companion?.username || header || tabs[0].label} />\n          <Switch>\n            <Route path=\"/chat\" component={Chat} />\n            <Route path=\"/profile\" component={Profile} />\n            <Route path=\"/social\" component={Social} />\n            <Route path=\"/\" component={Strangers} />\n          </Switch>\n          <AppBar className={classes.AppBar} position=\"static\">\n            <Tabs\n              value={selectedTab?.url || \"/\"}\n              centered\n              onChange={handleChange}\n            >\n              {renderedTabs}\n            </Tabs>\n          </AppBar>\n        </Grid>\n      )}\n    </Container>\n  );\n};\n\nexport default withRouter(Main);\n","import { Container, Grid, Typography } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst Step0 = () => {\n  return (\n    <Container>\n      <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n        <Typography>There's some info missing about you</Typography>\n        <Typography>Please take a quick survey</Typography>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default Step0;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../../components/Form/Form\";\nimport {\n  changeBirthDate,\n  changeName,\n  changeNameValid,\n  changeGender,\n  changeSurname,\n  changeSurnameValid,\n  changeUsernameValid,\n  changeUsername,\n} from \"../additionalSlice\";\n\nconst Step1 = () => {\n  const dispatch = useDispatch();\n  const { username, name, surname, birthDate, gender } = {\n    ...useSelector((state) => state.additional),\n  };\n\n  const inputs = [\n    {\n      name: \"username\",\n      type: \"text\",\n      label: \"Username\",\n      value: username,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeUsername(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeUsernameValid(isValid));\n      },\n      rules: {\n        helperText:\n          \"Use letters, numbers or symbols ., %, _, -, +. Min length 3\",\n        rule: {\n          minLength: 3,\n          maxLength: 20,\n          regex: /^[\\w%-+.]+$/,\n        },\n      },\n    },\n    {\n      name: \"name\",\n      type: \"text\",\n      label: \"First name\",\n      value: name,\n      onChange: (e) => {\n        dispatch(changeName(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeNameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"surname\",\n      type: \"text\",\n      label: \"Last name\",\n      value: surname,\n      onChange: (e) => {\n        dispatch(changeSurname(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeSurnameValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"birthDate\",\n      type: \"date\",\n      label: \"Birth date\",\n      value: birthDate,\n      onChange: (e) => {\n        dispatch(changeBirthDate(e.target.value));\n      },\n    },\n    {\n      name: \"gender\",\n      type: \"radio\",\n      label: \"I'm\",\n      values: [\"male\", \"female\"],\n      value: gender,\n      onChange: (e) => {\n        dispatch(changeGender(e.target.value));\n      },\n    },\n  ];\n  return <Form inputs={inputs} />;\n};\n\nexport default Step1;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../../components/Form/Form\";\nimport {\n  changeCity,\n  changeCityValid,\n  changeCountry,\n  changeCountryValid,\n  changePhone,\n  changePhoneValid,\n  changeBio,\n  changeBioValid,\n} from \"../additionalSlice\";\n\nconst Step2 = () => {\n  const dispatch = useDispatch();\n  const { phone, country, city, bio } = useSelector(\n    (state) => state.additional\n  );\n\n  const inputs = [\n    {\n      name: \"phone\",\n      type: \"text\",\n      label: \"Phone\",\n      value: phone,\n      ignoreUntouched: true,\n      inputProps: { autoFocus: true },\n      onChange: (e) => {\n        dispatch(changePhone(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changePhoneValid(isValid));\n      },\n      rules: {\n        helperText: \"invalid phone\",\n        rule: {\n          minLength: 0,\n          maxLength: 12,\n          regex: /^$|^\\+?\\d+$/,\n        },\n      },\n    },\n    {\n      name: \"country\",\n      type: \"text\",\n      label: \"Country\",\n      value: country,\n      onChange: (e) => {\n        dispatch(changeCountry(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCountryValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"city\",\n      type: \"text\",\n      label: \"City\",\n      value: city,\n      onChange: (e) => {\n        dispatch(changeCity(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeCityValid(isValid));\n      },\n      rules: {\n        helperText: \"Use letters, numbers or symbols ., -. Min length 2\",\n        rule: {\n          minLength: 2,\n          maxLength: 20,\n          regex: /^[\\w-.]+$/,\n        },\n      },\n    },\n    {\n      name: \"bio\",\n      type: \"text\",\n      label: \"Bio\",\n      value: bio,\n      ignoreUntouched: true,\n      onChange: (e) => {\n        dispatch(changeBio(e.target.value));\n      },\n      onValidate: (isValid) => {\n        dispatch(changeBioValid(isValid));\n      },\n      rules: {\n        helperText: \"invalid phone\",\n        rule: {\n          minLength: 2,\n          maxLength: 256,\n          regex: /^.+$/,\n        },\n      },\n    },\n  ];\n\n  return <Form inputs={inputs} />;\n};\n\nexport default Step2;\n","import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Form from \"../../../components/Form/Form\";\nimport {\n  changeLookFor,\n  changeMaxDist,\n  changeSearchAgeRange,\n} from \"../additionalSlice\";\n\nconst Step3 = () => {\n  const dispatch = useDispatch();\n  const { lookFor, maxAge, minAge, maxDist } = useSelector(\n    (state) => state.additional\n  );\n\n  const inputs = [\n    {\n      name: \"lookFor\",\n      type: \"radio\",\n      label: \"I look for\",\n      values: [\"male\", \"female\", \"both\"],\n      value: lookFor,\n      onChange: (e) => {\n        dispatch(changeLookFor(e.target.value));\n      },\n    },\n    {\n      name: \"maxDistance\",\n      type: \"slider\",\n      label: \"Search distance, km\",\n      step: 10,\n      min: 10,\n      max: 10000,\n      value: maxDist,\n      onChange: (value) => {\n        dispatch(changeMaxDist(value));\n      },\n    },\n    {\n      name: \"ageRange\",\n      type: \"slider\",\n      label: \"Age search range\",\n      value: [minAge, maxAge],\n      onChange: (value) => {\n        dispatch(changeSearchAgeRange(value));\n      },\n    },\n  ];\n  return <Form inputs={inputs} />;\n};\n\nexport default Step3;\n","import {\n  Grid,\n  makeStyles,\n  Button,\n  Step,\n  StepLabel,\n  Stepper,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { updateInfo } from \"./additionalSlice\";\nimport { setIsInfoMissing } from \"../../store/UISlice\";\n\nimport Step0 from \"./Steps/Step0\";\nimport Step1 from \"./Steps/Step1\";\nimport Step2 from \"./Steps/Step2\";\nimport Step3 from \"./Steps/Step3\";\nimport { checkInfo } from \"../../store/generalSlice\";\n\nconst useStyles = makeStyles({\n  Grid: {\n    height: \"100vh\",\n  },\n  Stepper: {\n    backgroundColor: \"#ffffff00\",\n  },\n  Buttons: {\n    width: \"100%\",\n  },\n});\n\nconst steps = [\n  {\n    key: 0,\n    view: <Step0 />,\n    text: \"Intro\",\n  },\n  {\n    key: 1,\n    view: <Step1 />,\n    text: \"Who are you?\",\n  },\n  {\n    key: 2,\n    view: <Step2 />,\n    text: \"Where are you?\",\n  },\n  {\n    key: 3,\n    view: <Step3 />,\n    text: \"Who fits you?\",\n  },\n];\n\nconst AdditionalInfo = () => {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = useState(0);\n  const { notif } = useNotifications();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const info = useSelector((state) => state.additional);\n  const {\n    id,\n    name,\n    surname,\n    username,\n    birthDate,\n    phone,\n    gender,\n    country,\n    city,\n    maxDist,\n    lookFor,\n    minAge,\n    maxAge,\n    updateSuccess,\n  } = { ...info };\n  const isLoading = useSelector((state) => state.general.isLoading);\n\n  const handleNext = () => {\n    if (activeStep === steps.length - 1) {\n      console.log(\n        \"[AdditionalInfo] updateSuccess before dispatch\",\n        updateSuccess\n      );\n      const data = {\n        id,\n        name,\n        surname,\n        username,\n        birthDate,\n        phone,\n        gender,\n        country,\n        city,\n        maxDist,\n        lookFor,\n        minAge,\n        maxAge,\n      };\n      const isInfoMissing = checkInfo(data);\n      if (isInfoMissing) {\n        notif(\"Please, fill all the fields\", \"error\");\n      } else {\n        dispatch(updateInfo(data, notif));\n        dispatch(setIsInfoMissing(isInfoMissing));\n        history.push(\"/\");\n      }\n    } else {\n      setActiveStep((prev) => prev + 1);\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep((prev) => prev - 1);\n  };\n\n  return (\n    <Grid container justify=\"center\" alignItems=\"center\">\n      <Grid\n        item\n        xs={12}\n        sm={6}\n        lg={4}\n        container\n        direction=\"column\"\n        justify=\"center\"\n        alignItems=\"center\"\n        wrap=\"nowrap\"\n        className={classes.Grid}\n      >\n        {steps[activeStep].view}\n        <Stepper\n          className={classes.Stepper}\n          activeStep={activeStep}\n          alternativeLabel\n        >\n          {steps.map(({ key, text }) => (\n            <Step key={key}>\n              <StepLabel>{text}</StepLabel>\n            </Step>\n          ))}\n        </Stepper>\n        <Grid container justify=\"space-evenly\" className={classes.Buttons}>\n          <Button\n            disabled={isLoading || activeStep === 0}\n            onClick={handleBack}\n            variant=\"outlined\"\n          >\n            Back\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleNext}\n            disabled={isLoading}\n          >\n            {activeStep === steps.length - 1 ? \"Finish\" : \"Next\"}\n          </Button>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default AdditionalInfo;\n","import { Grid } from \"@material-ui/core\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { api } from \"../../axios\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { useStyles } from \"../../style\";\nimport Form from \"../Form/Form\";\n\nconst Forgot = () => {\n  const classes = useStyles();\n  const { notif } = useNotifications();\n  const [email, setEmail] = useState(\"\");\n  const [emailValid, setEmailValid] = useState(false);\n  const history = useHistory();\n\n  const updatePasswordRequest = (e) => {\n    e.preventDefault();\n    try {\n      api.post(\"/reset\", { email });\n      notif(\"Check your email\", \"info\");\n    } catch (e) {\n      notif(\"Server error, please try again later\", \"error\");\n    }\n  };\n\n  const backToLogin = () => {\n    history.push(\"/login\");\n  };\n\n  const inputs = [\n    {\n      name: \"email\",\n      type: \"email\",\n      label: \"Email\",\n      value: email,\n      onValidate: (isValid) => {\n        setEmailValid(isValid);\n      },\n      onChange: (e) => {\n        setEmail(e.target.value);\n      },\n      rules: {\n        helperText: \"invalid email\",\n        rule: {\n          minLength: 3,\n          maxLength: 40,\n          regex: /^([\\w%+-.]+)@([\\w-]+\\.)+([\\w]{2,})$/i,\n        },\n      },\n    },\n  ];\n\n  const buttons = [\n    {\n      component: \"button\",\n      variant: \"contained\",\n      type: \"submit\",\n      text: \"send restore password link\",\n      size: \"large\",\n      disabled: !emailValid,\n      onClick: updatePasswordRequest,\n    },\n    {\n      component: \"button\",\n      text: \"back to login\",\n      size: \"large\",\n      onClick: backToLogin,\n    },\n  ];\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      className={classes.SingleForm}\n    >\n      <Form className={classes.Form} inputs={inputs} buttons={buttons} />\n    </Grid>\n  );\n};\n\nexport default Forgot;\n","import { useDispatch } from \"react-redux\";\nimport { api } from \"../axios\";\nimport { setNewState } from \"../store/generalSlice\";\n\nexport const useGPS = () => {\n  const gps = navigator.geolocation;\n  const dispatch = useDispatch();\n\n  const success = (pos) => {\n    var crd = pos.coords;\n\n    if (crd) {\n      const location = {\n        position: {\n          lat: crd.latitude,\n          lon: crd.longitude,\n        },\n      };\n      dispatch(setNewState(location));\n    }\n  };\n\n  const error = async (e) => {\n    const location = await getLocationByIp();\n    if (location.status) dispatch(setNewState(location.data));\n  };\n\n  const getCurrentLocaion = () => {\n    gps.getCurrentPosition(success, error);\n  };\n\n  return { gps, getCurrentLocaion };\n};\n\nexport const sendCoordinates = async (position) => {\n  const res = await api.put(\"location\", { body: position });\n  console.log(res.data);\n};\n\nexport const getLocationByIp = async () => {\n  try {\n    return await fetch(\"https://www.cloudflare.com/cdn-cgi/trace\")\n      .then((response) => response.text())\n      .then((res) => {\n        const regex = /(?<=(ip=))([\\d.]+)/g;\n        const ip = res.match(regex)[0];\n        return ip;\n      })\n      .then((ip) => fetch(`http://ip-api.com/json/${ip}`))\n      .then((res) => res.json())\n      .then((json) => ({\n        status: true,\n        data: { position: { lat: json.lat, lon: json.lon } },\n      }));\n  } catch (e) {\n    console.log(e);\n    return { status: false, data: e };\n  }\n};\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useSnackbar, SnackbarContent } from \"notistack\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport classnames from \"classnames\";\nimport { CheckRounded } from \"@material-ui/icons\";\nimport { getLocationByIp, useGPS } from \"../../../hooks/useGPS.hook\";\nimport { setNewState } from \"../../../store/generalSlice\";\nimport {\n  changeUseLocation,\n  updateInfo,\n} from \"../../../pages/AdditionalInfo/additionalSlice\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    [theme.breakpoints.up(\"sm\")]: {\n      minWidth: \"344px !important\",\n    },\n  },\n  card: {\n    display: \"flex\",\n    width: \"100%\",\n  },\n  default: {\n    backgroundColor: theme.palette.grey[800],\n  },\n  prompt: {\n    backgroundColor: theme.palette.grey[800],\n    width: 550,\n  },\n  info: {\n    backgroundColor: theme.palette.info.main,\n  },\n  success: {\n    backgroundColor: theme.palette.success.main,\n  },\n  warning: {\n    backgroundColor: theme.palette.warning.dark,\n  },\n  error: {\n    backgroundColor: theme.palette.error.main,\n  },\n  header: {\n    display: \"block\",\n    fontWeight: \"bold\",\n    color: theme.palette.common.white,\n  },\n  actionRoot: {\n    padding: \"8px 8px 8px 26px\",\n  },\n  close: {\n    marginLeft: \"auto !important\",\n    color: theme.palette.common.white,\n  },\n  text: {\n    fontSize: \"1rem\",\n    color: theme.palette.common.white,\n  },\n}));\n\nconst SnackMessage = React.forwardRef(({ id }, ref) => {\n  const classes = useStyles();\n  const { getCurrentLocaion } = useGPS();\n  const { closeSnackbar } = useSnackbar();\n  const dispatch = useDispatch();\n  const notifications = useSelector((state) => state.snack.notifications);\n  const selected = notifications.find((el) => el.key === id);\n  const { text, variant, header } = { ...selected };\n  const isPrompt = variant === \"prompt\";\n\n  const handleDismiss = () => {\n    if (isPrompt) {\n      dispatch(setNewState({ useLocation: false }));\n      dispatch(changeUseLocation(false));\n      dispatch(updateInfo({ useLocation: false }));\n      getLocationByIp();\n    }\n    closeSnackbar(id);\n  };\n\n  const handleAccept = () => {\n    dispatch(setNewState({ useLocation: true }));\n    dispatch(changeUseLocation(true));\n    dispatch(updateInfo({ useLocation: true }));\n    getCurrentLocaion();\n    closeSnackbar(id);\n  };\n\n  return (\n    <SnackbarContent ref={ref} className={classes.root}>\n      <Card className={classnames(classes.card, classes[variant])}>\n        <CardActions classes={{ root: classes.actionRoot }}>\n          {header && (\n            <Typography variant=\"subtitle2\" className={classes.header}>\n              {header}:\n            </Typography>\n          )}\n          {text && (\n            <Typography variant=\"body1\" className={classes.text}>\n              {text}\n            </Typography>\n          )}\n        </CardActions>\n\n        {isPrompt && (\n          <IconButton className={classes.close} onClick={handleAccept}>\n            <CheckRounded color=\"inherit\" />\n          </IconButton>\n        )}\n        <IconButton className={classes.close} onClick={handleDismiss}>\n          <CloseIcon color=\"inherit\" />\n        </IconButton>\n      </Card>\n    </SnackbarContent>\n  );\n});\n\nexport default SnackMessage;\n","import { useSnackbar } from \"notistack\";\nimport { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { removeSnack } from \"../../store/snackSlice\";\n\nlet displayed = [];\n\nconst Notifier = () => {\n  const dispatch = useDispatch();\n  const notifications = useSelector((state) => state.snack.notifications);\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  const storeDisplayed = (id) => {\n    displayed = [...displayed, id];\n  };\n  const removeDisplayed = (id) => {\n    displayed = displayed.filter((key) => id !== key);\n  };\n\n  useEffect(() => {\n    notifications.forEach(({ key, text, options = {}, dismissed = false }) => {\n      if (dismissed) {\n        // dismiss snackbar using notistack\n        closeSnackbar(key);\n        return;\n      }\n\n      // do nothing if snackbar is already displayed\n      if (displayed.includes(key)) return;\n\n      // display snackbar using notistack\n      enqueueSnackbar(text, {\n        key,\n        ...options,\n        onClose: (event, reason, key) => {\n          if (options.onClose) {\n            options.onClose(event, reason, key);\n          }\n        },\n        onExited: (event, key) => {\n          // remove this snackbar from redux store\n          dispatch(removeSnack({ key }));\n          removeDisplayed(key);\n        },\n      });\n\n      // keep track of snackbars that we've displayed\n      storeDisplayed(key);\n    });\n  }, [notifications, enqueueSnackbar, dispatch, closeSnackbar]);\n\n  return null;\n};\n\nexport default Notifier;\n","import { Grid, makeStyles } from \"@material-ui/core\";\nimport React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { api } from \"../../axios\";\nimport { useNotifications } from \"../../hooks/useNotifications\";\nimport { setAdditionalState } from \"../../pages/AdditionalInfo/additionalSlice\";\nimport { checkAuth, setNewState } from \"../../store/generalSlice\";\n\nconst useStyles = makeStyles({\n  root: {\n    width: \"100vw\",\n    height: \"100vh\",\n  },\n});\n\nconst VerifyEmail = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const { notif } = useNotifications();\n  const location = useLocation();\n\n  useEffect(() => {\n    try {\n      console.log(location);\n      const key = location.search.split(\"=\")[1];\n      const res = api(`email/verify?key=${key}`);\n      console.log(res.data);\n      if (res.data.status) {\n        dispatch(setNewState({ email: res.data.data.email }));\n        dispatch(setAdditionalState({ email: res.data.data.email }));\n        notif(\"Email successfully updated\", \"success\");\n      } else {\n        notif(\"Email was not updated\", \"error\");\n      }\n    } catch (e) {\n      // notif(\"Server error\", \"error\");\n    }\n    dispatch(checkAuth());\n    history.push(\"/\");\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      className={classes.root}\n    >\n      Validating your request, please wait\n    </Grid>\n  );\n};\n\nexport default VerifyEmail;\n","import React, { useEffect, useState } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { makeStyles, ThemeProvider } from \"@material-ui/core/styles\";\nimport { theme } from \"./theme\";\n\nimport Login from \"./pages/Login/Login\";\nimport Register from \"./pages/Register/Register\";\nimport Main from \"./containers/Main/Main\";\nimport { SnackbarProvider } from \"notistack\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport AdditionalInfo from \"./pages/AdditionalInfo/AdditionalInfo\";\nimport { checkAuth, setNewState } from \"./store/generalSlice\";\nimport { CircularProgress, Grid } from \"@material-ui/core\";\nimport Forgot from \"./components/Forgot/Forgot\";\nimport UpdatePassword from \"./components/UpdatePassword/UpdatePassword\";\nimport SnackMessage from \"./components/Notifier/SnackMessage/SnackMessage\";\nimport Notifier from \"./components/Notifier/Notifier\";\nimport { useNotifications } from \"./hooks/useNotifications\";\nimport { getLocationByIp, sendCoordinates, useGPS } from \"./hooks/useGPS.hook\";\nimport {\n  changeUseLocation,\n  updateInfo,\n} from \"./pages/AdditionalInfo/additionalSlice\";\nimport VerifyEmail from \"./components/VerifyEmail/VerifyEmail\";\n\nconst useStyles = makeStyles({\n  Grid: {\n    width: \"100vw\",\n    height: \"100vh\",\n  },\n  root: {\n    marginBottom: 40,\n  },\n});\n\nfunction App() {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { showPrompt } = useNotifications();\n  const { isAuth, isLoading, position } = useSelector((state) => state.general);\n  const { isInfoMissing } = useSelector((state) => state.UI);\n  const [content, setContent] = useState(<CircularProgress />);\n  const { getCurrentLocaion } = useGPS();\n\n  useEffect(() => {\n    dispatch(checkAuth());\n    navigator.permissions\n      .query({ name: \"geolocation\" })\n      .then(function (result) {\n        console.log(result);\n        if (result.state === \"granted\") {\n          getCurrentLocaion();\n          dispatch(setNewState({ useLocation: true }));\n          dispatch(changeUseLocation(true));\n          dispatch(updateInfo());\n        } else if (result.state === \"prompt\") {\n          showPrompt(\n            \"We use geolocation on this site to provide better results and optimize your experience. Allow using GPS?\"\n          );\n        } else {\n          dispatch(setNewState({ useLocation: false }));\n          dispatch(changeUseLocation(false));\n          dispatch(updateInfo());\n          getLocationByIp();\n        }\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    console.log(position);\n    if (!position || position.lat === 0 || position.lon === 0) {\n      return;\n    }\n    sendCoordinates(position);\n  }, [position]);\n\n  useEffect(() => {\n    if (isLoading) {\n      setContent(\n        <Grid\n          container\n          justify=\"center\"\n          alignItems=\"center\"\n          className={classes.Grid}\n        >\n          <CircularProgress />\n        </Grid>\n      );\n    } else if (isAuth && isInfoMissing) {\n      setContent(\n        <Switch>\n          <Route path=\"/add\" component={AdditionalInfo} exact />\n          <Redirect from=\"/\" to=\"/add\" />\n        </Switch>\n      );\n    } else if (isAuth) {\n      setContent(\n        <Switch>\n          <Route path=\"/reset\" component={UpdatePassword} exact />\n          <Route path=\"/email/verify\" component={VerifyEmail} exact />\n          <Redirect exact from=\"/strangers\" to=\"/\" />\n          <Redirect from=\"/login\" to=\"/\" />\n          <Route path=\"/\" component={Main} />\n        </Switch>\n      );\n    } else {\n      setContent(\n        <Switch>\n          <Route path=\"/email/verify\" component={VerifyEmail} exact />\n          <Route path=\"/login\" component={Login} exact />\n          <Route path=\"/register\" component={Register} exact />\n          <Route path=\"/forgot\" component={Forgot} exact />\n          <Route path=\"/reset\" component={UpdatePassword} exact />\n          <Route path=\"/\">\n            <Redirect to=\"/login\" />\n          </Route>\n        </Switch>\n      );\n    }\n  }, [isAuth, isLoading, classes.Grid, isInfoMissing]);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <SnackbarProvider\n        maxSnack={3}\n        classes={{ containerRoot: classes.root }}\n        content={(key) => <SnackMessage id={key} />}\n      >\n        <>\n          <CssBaseline />\n          {content}\n          <Notifier />\n        </>\n      </SnackbarProvider>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import { combineReducers } from \"redux\";\nimport generalReducer from \"./generalSlice\";\nimport loginReducer from \"../pages/Login/loginSlice\";\nimport registerReducer from \"../pages/Register/registerSlice\";\nimport uiReducer from \"./UISlice\";\nimport filterReducer from \"../components/Filter/filterSlice\";\nimport additionalReducer from \"../pages/AdditionalInfo/additionalSlice\";\nimport usersReducer from \"./usersSlice\";\nimport chatReducer from \"./chatSlice\";\nimport snackReducer from \"./snackSlice\";\nimport WSReducer from \"./WSSlice\";\n\nexport default combineReducers({\n  general: generalReducer,\n  login: loginReducer,\n  register: registerReducer,\n  UI: uiReducer,\n  filter: filterReducer,\n  additional: additionalReducer,\n  users: usersReducer,\n  chat: chatReducer,\n  snack: snackReducer,\n  WS: WSReducer,\n});\n","import rootReducer from \"./reducer\";\nimport thunk from \"redux-thunk\";\nimport { configureStore } from \"@reduxjs/toolkit\";\n\nexport const store = configureStore({\n  reducer: rootReducer,\n  middleware: [thunk],\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { store } from \"./store/store\";\n\n// console.log = () => {};\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","module.exports = __webpack_public_path__ + \"static/media/default-avatar.d2c893f5.png\";"],"sourceRoot":""}