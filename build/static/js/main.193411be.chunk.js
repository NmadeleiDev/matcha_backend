(this["webpackJsonpfront-react"]=this["webpackJsonpfront-react"]||[]).push([[0],{139:function(e,t,a){e.exports=a(195)},150:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=a(27),l=a(5),s=(a(150),a(9)),u=a(23),d=a(292),m=a(243),f=a(291),p=a(242),g="#fafafa",h="#fdfdfd",b={light:"#A8DADC",main:"#457B9D",dark:"#1D3557",contrastText:"#000",contrastTextLighter:"#777"},v={light:"#E94957",main:"#E63946",dark:"#C81927",contrastText:"#fff"},x=Object(p.a)({palette:{primary:b,secondary:v,info:{main:"#04728B"}},overrides:{MuiTextField:{root:{width:"100%"}},MuiContainer:{root:{display:"flex",justifyContent:"center"}},MuiBadge:{anchorOriginTopRightCircle:{top:"23%",right:"33%",transform:"scale(1.5) translate(50%, -50%)",border:"1px solid ".concat(h)}}},shape:{borderRadius:"30px"},props:{MuiButton:{variant:"outlined",color:"primary",size:"large"},MuiTextField:{variant:"outlined"},MuiAlert:{elevation:6,variant:"filled"}}}),y=a(8),E=a.n(y),j=a(13),O=a(245),w=a(265),k=a(199),C=a(30),S=Object(C.createSlice)({name:"login",initialState:{email:"",password:"",emailValid:!1,passwordValid:!1},reducers:{changeEmail:function(e,t){e.email=t.payload},changePassword:function(e,t){e.password=t.payload},changeEmailValid:function(e,t){var a=t.payload;e.emailValid=a},changePasswordValid:function(e,t){var a=t.payload;e.passwordValid=a}}}),I=S.actions,N=I.changeEmail,A=I.changePassword,T=I.changeEmailValid,L=I.changePasswordValid,V=S.reducer,M=a(16),U=a(53),D=a.n(U),F=D.a.CancelToken,B=D.a.create({baseURL:"/api/main/",withCredentials:!0,headers:{"Content-Type":"application/json"}}),P=D.a.create({baseURL:"/api/media/",withCredentials:!0,headers:{"Content-Type":"application/json"},responseType:"blob",validateStatus:!1}),R=function(){var e=Object(j.a)(E.a.mark((function e(t,a){var n,r,c,o=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]&&o[2],(r=new FormData).append("id",t),r.append("isAvatar",n),r.append("userImage",a),e.next=7,D.a.post("/api/media/upload/",r,{headers:{"Content-Type":"multipart/form-data"}});case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=a(12),G=function(e){return e?e.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):""},W=function(){var e=Object(j.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.cloudflare.com/cdn-cgi/trace").then((function(e){return e.text()})).then((function(e){return e.match(/(?<=(ip=))([\d.]+)/g)[0]})).then((function(e){return fetch("http://ip-api.com/json/".concat(e))})).then((function(e){return e.json()})).then((function(e){return{status:!0,data:{lat:e.lat,lon:e.lon}}}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{status:!1,data:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),$=F.source(),_=function(){var e=Object(j.a)(E.a.mark((function e(t){var a,n,r,c,o;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.images)&&0!==a.length){e.next=3;break}return e.abrupt("return",Object(z.a)(Object(z.a)({},t),{},{images:[]}));case 3:return e.prev=3,n=a.map((function(e){return P("img/".concat(e),{cancelToken:$.token})})),e.next=7,Promise.allSettled(n);case 7:return r=e.sent,c=r.filter((function(e){return"fulfilled"===e.status})).map((function(e){var t=URL.createObjectURL(e.value.data);return{id:e.value.config.url.split("/")[1],image:t}})),(o=Object(z.a)(Object(z.a)({},t),{},{images:c})).avatar=o.images.find((function(e){return e.id===t.avatar})),e.abrupt("return",o);case 14:return e.prev=14,e.t0=e.catch(3),D.a.isCancel(e.t0)&&console.log("Request cancelled"),e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),H=function(e){var t=(new Date).getFullYear()-new Date(e.birthDate).getFullYear();return Object(z.a)(Object(z.a)({},e),{},{age:t})},q=function(e){return e.map((function(e){return H(e)})).map((function(e){return _(e)}))},Y=a(30).createSlice,J={chat:null,chats:[]},Z=Y({name:"chat",initialState:J,reducers:{setChats:function(e,t){var a=t.payload;console.log(a),a&&a.length&&(console.log("payload is not null"),e.chats=a.map((function(e){return Object(z.a)(Object(z.a)({},e),{},{messages:e.messages||[]})})))},addChat:function(e,t){var a=t.payload;console.log(a),e.chats.find((function(e){return e.id===a.id}))||(console.log("chat not found, adding",a),e.chats.push(Object(z.a)(Object(z.a)({},a),{},{messages:a.messages||[]})))},removeChat:function(e,t){var a,n=t.payload;e.chats=null===(a=e.chats)||void 0===a?void 0:a.filter((function(e){return e.id!==n.id}))},setChat:function(e,t){var a=t.payload,n=a?e.chats.find((function(e){return e.id===a.id})):null;e.chat=(null===n||void 0===n?void 0:n.id)||null},updateMessage:function(e,t){var a,n=t.payload,r=e.chat||(null===(a=e.chats.find((function(e){return e.id===n.chatId})))||void 0===a?void 0:a.id);if(r){var c=e.chats.findIndex((function(e){return e.id===r})),o=e.chats[c].messages.findIndex((function(e){return e.id===n.id}));console.log("chatIdx: ".concat(c,", msgIdx: ").concat(o)),-1===o?e.chats[c].messages.push(Object(z.a)({},n)):e.chats[c].messages=[].concat(Object(M.a)(e.chats[c].messages.slice(0,o)),[Object(z.a)({},n)],Object(M.a)(e.chats[c].messages.slice(o+1)))}else console.log("[updateMessage] chat not found. payload:",n)},setDeleteMessage:function(e,t){var a,n=t.payload,r=e.chat||(null===(a=e.chats.find((function(e){return e.id===n.chatId})))||void 0===a?void 0:a.id),c=e.chats.findIndex((function(e){return e.id===r})),o=e.chats[c].messages.findIndex((function(e){return e.id===n.id}));-1!==o&&(e.chat.messages=[].concat(Object(M.a)(e.chat.messages.slice(0,o)),Object(M.a)(e.chat.messages.slice(o+1))))},upadateChatMessages:function(e,t){var a=t.payload;if(e.chat){var n=e.chats.findIndex((function(t){return t.id===e.chat}));e.chats[n].messages=a}},setChatById:function(e,t){var a=t.payload;e.chat=a},resetState:function(){return J}}}),K=Z.actions,X=K.setChat,Q=K.setChats,ee=(K.setChatById,K.removeChat,K.addChat),te=(K.resetState,K.updateMessage),ae=K.setDeleteMessage,ne=(K.upadateChatMessages,Z.reducer),re={showBackButton:!1,header:null,selectedTab:null,companion:null,isInfoMissing:!1,parent:"/"},ce=Object(C.createSlice)({name:"UI",initialState:re,reducers:{showBackButton:function(e){e.showBackButton=!0},hideBackButton:function(e){e.showBackButton=!1},setSelectedTab:function(e,t){var a=t.payload;e.selectedTab=a.selectedTab,e.header=a.selectedTab.label,e.companion=null},setHeader:function(e,t){var a=t.payload;e.header=a.header},resetUIState:function(){return re},setCompanion:function(e,t){var a=t.payload;e.companion=a.companion},setIsInfoMissing:function(e,t){var a=t.payload;e.isInfoMissing=a},setParent:function(e,t){var a=t.payload;e.parent=a.parent}}}),oe=ce.actions,ie=oe.showBackButton,le=oe.hideBackButton,se=oe.setSelectedTab,ue=oe.setHeader,de=oe.resetUIState,me=oe.setCompanion,fe=oe.setIsInfoMissing,pe=oe.setParent,ge=ce.reducer,he=a(30).createSlice,be={username:"",age:{minAge:0,maxAge:100}},ve=he({name:"filter",initialState:be,reducers:{changeUsername:function(e,t){var a=t.payload;e.username=a},changeSearchAgeRange:function(e,t){var a=t.payload;e.age=Object(z.a)(Object(z.a)({},e.age),a)},resetFilter:function(e){Object(z.a)({},be)}}}),xe=ve.actions,ye=xe.changeUsername,Ee=xe.changeSearchAgeRange,je=xe.resetFilter,Oe=ve.reducer,we=a(30).createSlice,ke={id:"",email:"",name:"",surname:"",username:"",bio:"",birthDate:0,gender:"",phone:"",country:"",city:"",maxDist:0,lookFor:"",minAge:0,maxAge:100,tags:null,emailValid:!1,usernameValid:!1,nameValid:!1,surnameValid:!1,bioValid:!1,countryValid:!1,cityValid:!1,updateSuccess:!1},Ce=we({name:"additional",initialState:ke,reducers:{setAdditionalState:function(e,t){var a=t.payload;Object.keys(ke).forEach((function(t){e[t]=a[t]||ke[t]}))},resetAdditionalState:function(){return ke},changeEmail:function(e,t){var a=t.payload;e.email=a},changeUsername:function(e,t){var a=t.payload;e.username=a},changeName:function(e,t){var a=t.payload;e.name=a},changeSurname:function(e,t){var a=t.payload;e.surname=a},changeBio:function(e,t){var a=t.payload;e.bio=a},changeBirthDate:function(e,t){var a=t.payload,n=new Date(a).getTime();isNaN(n)||(e.birthDate=n)},changeGender:function(e,t){var a=t.payload;e.gender=a},changePhone:function(e,t){var a=t.payload;e.phone=a},changeCountry:function(e,t){var a=t.payload;e.country=a},changeCity:function(e,t){var a=t.payload;e.city=a},changeMaxDist:function(e,t){var a=t.payload;e.maxDist=+a},changeLookFor:function(e,t){var a=t.payload;e.lookFor=a},changeSearchAgeRange:function(e,t){var a=t.payload;e.minAge=a[0],e.maxAge=a[1]},changeMinAge:function(e,t){var a=t.payload;e.minAge=a},changeMaxAge:function(e,t){var a=t.payload;e.maxAge=a},changeTags:function(e,t){var a=t.payload.value;e.tags=a},changeEmailValid:function(e,t){var a=t.payload;e.emailValid=a},changeUsernameValid:function(e,t){var a=t.payload;e.usernameValid=a},changeNameValid:function(e,t){var a=t.payload;e.nameValid=a},changeSurnameValid:function(e,t){var a=t.payload;e.surnameValid=a},changeBioValid:function(e,t){var a=t.payload;e.bioValid=a},changePhoneValid:function(e,t){var a=t.payload;e.phoneValid=a},changeCountryValid:function(e,t){var a=t.payload;e.countryValid=a},changeCityValid:function(e,t){var a=t.payload;e.cityValid=a},onUpdateSuccess:function(e){e.updateSuccess=!0},onUpdateFail:function(e){e.updateSuccess=!1}}}),Se=Ce.actions,Ie=Se.setAdditionalState,Ne=(Se.resetAdditionalState,Se.changeEmail),Ae=Se.changeUsername,Te=Se.changeName,Le=Se.changeSurname,Ve=Se.changeBio,Me=Se.changeBirthDate,Ue=Se.changeGender,De=Se.changePhone,Fe=Se.changeCountry,Be=Se.changeCity,Pe=Se.changeMaxDist,Re=Se.changeLookFor,ze=Se.changeSearchAgeRange,Ge=Se.changeTags,We=Se.changeEmailValid,$e=Se.changeUsernameValid,_e=Se.changeNameValid,He=Se.changeSurnameValid,qe=Se.changeBioValid,Ye=Se.changePhoneValid,Je=Se.changeCountryValid,Ze=Se.changeCityValid,Ke=Se.onUpdateSuccess,Xe=Se.onUpdateFail,Qe=function(e,t){var a=e.id,n=e.username,r=e.name,c=e.surname,o=e.bio,i=e.birthDate,l=e.phone,s=e.gender,u=e.country,d=e.city,m=e.maxDist,f=e.lookFor,p=e.minAge,g=e.maxAge,h=e.tags;return function(){var e=Object(j.a)(E.a.mark((function e(b){var v,x,y,j,O;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(rt()),v={id:a,username:n,name:G(r),surname:G(c),bio:G(o),phone:l,birthDate:i,gender:s,country:G(u),city:G(d),maxDist:m,lookFor:f,minAge:p,maxAge:g},e.prev=2,e.next=5,W();case 5:(x=e.sent).status&&(v.position=x.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("Getting location failed");case 12:return console.log("[AdditionalInfoSlice] update user info"),console.log(v),e.prev=14,e.next=17,B.put("account",v);case 17:if(j=e.sent,!h||!h.length){e.next=24;break}return e.next=21,B.put("tag",{tags:Object(M.a)(h)});case 21:O=e.sent,console.log("TAGS",O),O.data.status&&b(dt({tags:h}));case 24:if(console.log(j.data.data),!j.data.status){e.next=33;break}return b(dt(v)),b(Ke()),t("Successfully saved!","success"),b(ct()),e.abrupt("return");case 33:y=j.data;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(14),y=e.t1;case 39:b(Xe()),console.log(y),t("Server error","error"),b(ct());case 43:case"end":return e.stop()}}),e,null,[[2,9],[14,36]])})));return function(t){return e.apply(this,arguments)}}()},et=Ce.reducer,tt={isAuth:!1,isLoading:!1,id:"",email:"",phone:"",name:"",surname:"",username:"",bio:"",birthDate:0,gender:"",country:"",city:"",maxDist:0,lookFor:"",minAge:0,maxAge:0,images:[],avatar:null,likedBy:[],matches:[],position:{lat:0,lon:0}},at=Object(C.createSlice)({name:"general",initialState:tt,reducers:{startLoading:function(e){e.isLoading=!0},stopLoading:function(e){e.isLoading=!1},authSuccess:function(e){e.isAuth=!0,e.isLoading=!1},authFail:function(e){e.isAuth=!1,e.isLoading=!1},resetGeneralState:function(e){return e.images&&e.images.forEach((function(e){return URL.revokeObjectURL(e.image)})),tt},setNewState:function(e,t){var a=t.payload;Object.keys(a).forEach((function(t){"position"===t?(e.position.lat=a.position.lat,e.position.lon=a.position.lon):"images"===t&&a.images&&(e.images=e.images&&e.images.length>0?[].concat(Object(M.a)(e.images),Object(M.a)(a[t])):Object(M.a)(a[t])),e[t]=a[t]}))}}}),nt=at.actions,rt=nt.startLoading,ct=nt.stopLoading,ot=nt.authSuccess,it=nt.authFail,lt=nt.resetGeneralState,st=nt.setNewState,ut=function(){var e=Object(j.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.data),a(dt(t.data)),a(ot()),a(Ie(t.data)),e.next=6,Promise.resolve(q([t.data])[0]);case 6:n=e.sent,console.log(n),n&&(a(dt(n)),a(Ie(n)));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),dt=function(e){return function(t){var a=function(e){var t=!1,a=!1;return Object.keys(e).forEach((function(n){-1===["tags","position","lookedBy","likedBy","matches","avatar","images","bio"].indexOf(n)&&("minAge"===n||"maxAge"===n?a=e.maxAge===tt.maxAge&&e.minAge===tt.minAge:t=t||e[n]===tt[n])})),t||a}(e);t(fe(a)),t(st(e))}},mt=function(e,t,a){return function(){var n=Object(j.a)(E.a.mark((function n(r){var c,o;return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(rt()),n.prev=1,c={email:G(e),password:G(t)},n.next=5,B.post("/signin",c);case 5:(o=n.sent).data.status?ut(o.data,r):(r(it()),r(lt()),a(o.data.data,"error")),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),r(it()),a("Server error","error");case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()},ft=function(e){return function(){var t=Object(j.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(rt()),t.prev=1,t.next=4,B.delete("/signout");case 4:if(!(n=t.sent).data.status){t.next=12;break}e("Successful logout","success"),a(lt()),a(de()),a(je()),t.next=13;break;case 12:throw new Error(n.data.data);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(1),a(ct()),e("Server error","error");case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()},pt=at.reducer,gt=a(3),ht=a(25),bt=a(197),vt=a(198),xt=a(264),yt=a(253),Et=a(293),jt=a(251),Ot=a(294),wt=a(54),kt=a(302),Ct=a(296),St=Object(m.a)({Container:{width:"100%"}}),It=function(e){var t=St(),a=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],c=function(){var e=Object(j.a)(E.a.mark((function e(){var t,a,n,c=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:0,a=c.length>1&&void 0!==c[1]?c[1]:10,e.next=4,B("tag",{params:{offset:t,limit:a}});case 4:(n=e.sent).data.status&&n.data.data&&r(n.data.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){c()}),[]);return{tags:a,fetchTags:c,addTags:function(e){var t=new Set([].concat(Object(M.a)(a),Object(M.a)(e)));r(Object(M.a)(t))},removeTags:function(e){var t=a.filter((function(t){return!e.find((function(e){return e===t}))}));r(t)}}}().tags,c=Object(n.useState)([]),o=Object(s.a)(c,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){l(a)}),[a]),r.a.createElement(O.a,{className:t.Container},i&&r.a.createElement(Ct.a,{multiple:!0,freeSolo:!0,id:"tags-outlined",options:i,getOptionLabel:function(e){return e},defaultValue:e.tags,onChange:function(t,a,n){return e.onChange({value:a})},filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(Et.a,Object.assign({},e,{variant:"outlined",label:"Tags",placeholder:"Enter tag and press enter"}))}}))},Nt=Object(m.a)({ButtonListItem:{justifyContent:"center"},Input:{width:"100%"},SmallSelector:{minWidth:"100px",padding:"10px"}}),At=function(e){var t=new Date(e),a=t.getFullYear();a<10?a="000"+a:a<100?a="00"+a:a<1e3?a="0"+a:a>3e3&&(a=3e3);var n=t.getMonth()+1;n=n<10?"0"+n:""+n;var r=t.getDate();return r=r<10?"0"+r:""+r,"".concat(a,"-").concat(n,"-").concat(r)},Tt=function(e){var t=Nt(),a=Object(z.a)({},e),c=a.type,o=a.label,i=a.name,l=a.values,u=a.value,d=a.onValidate,m=a.onChange,f=a.rules,p=a.ignoreUntouched,g=Object(n.useState)(!1),h=Object(s.a)(g,2),b=h[0],v=h[1],x=Object(n.useState)(!1),y=Object(s.a)(x,2),E=y[0],j=y[1],w=Object(n.useState)(""),k=Object(s.a)(w,2),C=k[0],S=k[1],I=f?Object(z.a)({},f):Object(z.a)({},{helperText:"",rule:null}),N=I.helperText,A=I.rule;switch(Object(n.useEffect)((function(){var e;e=!!A&&!function(e,t,a){return!a||e.length>=t.minLength&&e.length<=t.maxLength&&e.match(t.regex)}(u,A,p||b),S(e?N:""),d&&d((p||b)&&!e),j(e)}),[u,A,b,N,d]),c){case"text":case"number":case"email":case"password":return r.a.createElement(Et.a,{id:i,error:E,helperText:C,type:c,label:o,value:u,className:t.Input,onFocus:function(){return v(!0)},onChange:function(e){return m(e)}});case"select":return r.a.createElement(Et.a,{id:i,key:i,label:o,value:u,className:t.Input,onChange:function(e){return m(e)},select:!0},l.map((function(e){return r.a.createElement(jt.a,{key:e,value:e},e)})));case"date":return r.a.createElement(Et.a,{id:i,type:"date",label:"Birth Date",className:t.Input,InputLabelProps:{shrink:!0},value:At(u),onChange:function(e){return m(e)}});case"slider":return r.a.createElement(Ot.a,{className:t.Input},r.a.createElement(wt.a,{id:"range-slider",gutterBottom:!0},o),r.a.createElement(kt.a,{value:u,onChange:function(e,t){return m(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider"}));case"doubleSelector":return r.a.createElement(Ot.a,{key:i,className:t.Input},r.a.createElement(O.a,{container:!0,justify:"space-evenly",alignItems:"center"},r.a.createElement(O.a,{item:!0,xs:3},r.a.createElement(Et.a,{id:"min"+i,type:"number",value:u.minAge,label:"Minimum age",className:t.SmallSelector,onChange:function(e){return m({minAge:+e.target.value})}})),r.a.createElement(O.a,{item:!0,xs:3},r.a.createElement(Et.a,{id:"max"+i,type:"number",value:u.maxAge,label:"Maximum age",className:t.SmallSelector,onChange:function(e){return m({maxAge:+e.target.value})}}))));case"autocomplete":return r.a.createElement(It,{className:t.Input,tags:l,onChange:m});default:return null}},Lt=a(263),Vt=a(295);var Mt=function(e){var t=e.children,a=e.value,n=e.index,c=Object(gt.a)(e,["children","value","index"]);return r.a.createElement(Ot.a,Object.assign({style:{width:"70%",textAlign:"center"},role:"tabpanel",hidden:a!==n,id:"full-width-tabpanel-".concat(n),"aria-labelledby":"full-width-tab-".concat(n),borderRadius:0},c),t)},Ut=a(116),Dt=a.n(Ut),Ft=a(252),Bt=a(303),Pt=a(36),Rt=a.n(Pt),zt=(0,a(30).createSlice)({name:"snack",initialState:{notifications:[]},reducers:{addSnack:function(e,t){var a=t.payload;e.notifications.push(a)},dismissSnack:function(e,t){var a=t.payload;e.notifications=e.notifications.map((function(e){return a.dismissAll||e.key===a.key?Object(z.a)(Object(z.a)({},e),{},{dismissed:!0}):e}))},removeSnack:function(e,t){var a=t.payload;console.log(a),e.notifications=e.notifications.filter((function(e){return e.key!==a.key}))}}}),Gt=Object(z.a)({},zt.actions),Wt=Gt.addSnack,$t=(Gt.dismissSnack,Gt.removeSnack),_t=zt.reducer,Ht=function(){var e=Object(l.c)();return function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Wt({key:(new Date).getTime()*Math.random(),text:t.text||t,header:t.header,variant:a||"default",options:n}))}},qt=Object(m.a)({Avatar:{width:"300px",height:"300px"}}),Yt=function(){var e=qt(),t=Object(l.d)((function(e){return e.general})),a=t.id,c=t.images,o=t.avatar,i=Ht(),u=Object(n.useState)(null),d=Object(s.a)(u,2),m=d[0],f=d[1],p=function(){var e=Object(j.a)(E.a.mark((function e(t){var n,r,o,l;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.files&&0!==t.target.files.length){e.next=2;break}return e.abrupt("return");case 2:return(n=t.target.files[0]).size>1e6&&i("The file is larger than 1MB","error"),e.next=6,R(a,n);case 6:r=e.sent,o=URL.createObjectURL(n),l={id:r.data.data.id,image:o},f(l),r.data.status&&r.data.data?(dt({images:[].concat(Object(M.a)(c),[l])}),i("The file was uploaded","success")):(console.error(r.data),i("Server error","error"));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Ft.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r.a.createElement(yt.a,{color:"primary","aria-label":"upload image",component:"label",onChange:function(e){return p(e)}},r.a.createElement(Dt.a,null),r.a.createElement("input",{type:"file",style:{display:"none"}}))},r.a.createElement(Bt.a,{className:e.Avatar,src:(null===m||void 0===m?void 0:m.image)||(null===o||void 0===o?void 0:o.image)||Rt.a}))},Jt=a(304),Zt=a(259),Kt=a(257),Xt=a(258),Qt=a(256),ea=a(254),ta=Object(n.forwardRef)((function(e,t){return r.a.createElement(ea.a,Object.assign({direction:"up",ref:t},e))}));function aa(e){var t=e.buttonText,a=e.yesText,c=e.noText,o=e.header,i=e.text,u=Object(n.useState)(!1),d=Object(s.a)(u,2),m=d[0],f=d[1],p=Object(l.c)(),g=Ht(),h=function(){f(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:function(){f(!0)}},t),r.a.createElement(Jt.a,{open:m,TransitionComponent:ta,keepMounted:!0,onClose:h,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Qt.a,{id:"alert-dialog-slide-title"},o),r.a.createElement(Kt.a,null,r.a.createElement(Xt.a,{id:"alert-dialog-slide-description"},i)),r.a.createElement(Zt.a,null,r.a.createElement(k.a,{onClick:h,color:"primary"},c),r.a.createElement(k.a,{onClick:function(){p(function(e){return function(){var t=Object(j.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.delete("account");case 3:if(n=t.sent,console.log(n.data),!n.data.status){t.next=12;break}e("Account successfully deleted","success"),a(lt()),a(de()),a(je()),t.next=13;break;case 12:throw new Error(n.data.data);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),a(ct()),e(t.t0,"error");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()}(g)),f(!1)},color:"primary"},a))))}var na=a(117),ra=a.n(na),ca=Object(C.createSlice)({name:"register",initialState:{email:"",username:"",password:"",confirm:"",emailValid:!1,usernameValid:!1,passwordValid:!1,confirmValid:!1,phoneValid:!1,registerSuccess:!1},reducers:{changeEmail:function(e,t){var a=t.payload;e.email=a},changeUsername:function(e,t){var a=t.payload;e.username=a},changePassword:function(e,t){var a=t.payload;e.password=a},changeConfirmPassword:function(e,t){var a=t.payload;e.confirm=a},changeEmailValid:function(e,t){var a=t.payload;e.emailValid=a},changeUsernameValid:function(e,t){var a=t.payload;e.usernameValid=a},changePasswordValid:function(e,t){var a=t.payload;e.passwordValid=a},changeConfirmValid:function(e,t){var a=t.payload;e.confirmValid=a},onRegisterSuccess:function(e){e.registerSuccess=!0},onRegisterFail:function(e){e.registerSuccess=!1}}}),oa=ca.actions,ia=oa.changeEmail,la=oa.changeUsername,sa=oa.changePassword,ua=oa.changeConfirmPassword,da=oa.changeEmailValid,ma=oa.changeUsernameValid,fa=oa.changePasswordValid,pa=oa.changeConfirmValid,ga=(oa.changePhoneValid,oa.onRegisterSuccess),ha=(oa.onRegisterFail,function(e,t,a,n,r){return function(){var c=Object(j.a)(E.a.mark((function c(o){var i,l;return E.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return o(rt()),i={username:G(e),email:G(t),password:G(a)},c.prev=2,c.next=5,B.post("signup",i);case 5:!0===(l=c.sent).data.status?(o(ga()),n("Account successfully created, now login","success"),r.push("/login")):n(l.data.data,"error"),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),n("server error","error");case 12:o(ct());case 13:case"end":return c.stop()}}),c,null,[[2,9]])})));return function(e){return c.apply(this,arguments)}}()}),ba=ca.reducer,va=a(10),xa=Object(m.a)((function(e){var t;return{SingleForm:(t={width:"70vw",height:"100vh",margin:"0 auto"},Object(va.a)(t,e.breakpoints.down("xs"),{width:"100vw"}),Object(va.a)(t,e.breakpoints.up("md"),{maxWidth:"600px !important"}),t),label:{textTransform:"none"}}})),ya=function(e){var t=xa(),a=Object(l.d)((function(e){return e.register})),c=a.password,o=a.passwordValid,i=a.confirm,s=a.confirmValid,d=Object(l.c)(),m=Object(u.h)(),f=Ht(),p=o&&s,g=ra.a.parse(m.search);console.log(e);var h=function(){var e=Object(j.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("/reset",{params:{k:t}});case 3:(a=e.sent).data.status||f("".concat(a.data.data,". Try request link once again"),"warning"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f("Server error","error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,B.put("/reset",{password:c});case 4:(a=e.sent).data.status?f("New password successfully saved","success"):f(a.data.data,"success"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f("Server error","error");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h(g.k)}),[]);var v=[{name:"password",type:"password",label:"Password",value:c,required:!0,onValidate:function(e){d(fa(e))},onChange:function(e){d(sa(e.target.value))},rules:{helperText:"Use at least one lower- and uppercase letter, number and symbol. Min length 4",rule:{minLength:4,maxLength:20,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/}}},{name:"confirm",type:"password",label:"Confirm",value:i,required:!0,onValidate:function(e){d(pa(e))},onChange:function(e){d(ua(e.target.value))},rules:{helperText:"Confirm and password does not match",rule:{minLength:3,maxLength:20,regex:new RegExp("^".concat(c,"$"))}}}],x=[{component:"button",type:"submit",text:"update personal info",size:"large",disabled:!p,onClick:b}];return r.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",justify:"center",className:t.SingleForm},r.a.createElement(cn,{inputs:v,buttons:x}))},Ea=Object(m.a)({FullWidth:{width:"100%"},Button:{width:"80%",margin:"0.5rem 0"}}),ja=function(){var e=Ea(),t=Object(l.c)(),a=(Object(u.g)(),Object(l.d)((function(e){return e.general.email}))),n=Ht(),c=[{component:"button",text:"update email",size:"large",onClick:function(){}},{component:"button",text:"update username",size:"large",onClick:function(){}},{component:"button",text:"request change password link",size:"large",onClick:function(){t(pe({parent:"profile"})),t(ue({header:"Update password"})),t(ie());B.post("/reset",{email:a});n("Check your email","info")}}];return r.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",className:e.FullWidth},c.map((function(t){t.component;var a=t.variant,n=t.type,c=t.text,o=t.onClick,i=Object(gt.a)(t,["component","variant","type","text","onClick"]);return r.a.createElement(k.a,Object.assign({key:c,className:e.Button,variant:a,type:n,onClick:o},i),c)})))},Oa=function(){var e=Object(l.d)((function(e){return e.additional})),t=e.id,a=e.email,c=e.username,o=e.name,i=e.surname,d=e.birthDate,m=e.bio,f=e.phone,p=e.gender,g=e.country,h=e.city,b=e.maxDist,v=e.lookFor,x=e.minAge,y=e.maxAge,O=e.usernameValid,w=e.nameValid,k=e.surnameValid,C=e.emailValid,S=e.phoneValid,I=e.countryValid,N=e.cityValid,A=e.tags,T=Object(l.c)(),L=Ht(),V=Object(u.g)(),M=Object(n.useState)(!0),U=Object(s.a)(M,2),D=U[0],F=U[1];Object(n.useEffect)((function(){F(O&&w&&k&&C&&S&&I&&N)}),[O,w,k,C,S,I,N]);var B=[{name:"username",type:"text",label:"Username",value:c,ignoreUntouched:!0,onChange:function(e){T(Ae(e.target.value))},onValidate:function(e){T($e(e))},rules:{helperText:"Use letters, numbers or symbols ., %, _, -, +. Min length 3",rule:{minLength:3,maxLength:20,regex:/^[\w%-+.]+$/}}},{name:"email",type:"email",label:"Email",value:a,ignoreUntouched:!0,onChange:function(e){T(Ne(e.target.value))},onValidate:function(e){T(We(e))},rules:{helperText:"invalid email",rule:{minLength:3,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"name",type:"text",label:"First name",value:o,ignoreUntouched:!0,onChange:function(e){T(Te(e.target.value))},onValidate:function(e){T(_e(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"surname",type:"text",label:"Last name",value:i,ignoreUntouched:!0,onChange:function(e){T(Le(e.target.value))},onValidate:function(e){T(He(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"phone",type:"text",label:"Phone",value:f,ignoreUntouched:!0,onChange:function(e){T(De(e.target.value))},onValidate:function(e){T(Ye(e))},rules:{helperText:"invalid phone",rule:{minLength:0,maxLength:12,regex:/^$|^\+?\d+$/}}},{name:"birthDate",type:"date",label:"Birth date",value:d,onChange:function(e){T(Me(e.target.value))}},{name:"gender",type:"select",label:"I'm",values:["male","female"],value:p,onChange:function(e){T(Ue(e.target.value))}},{name:"lookFor",type:"select",label:"I look for",values:["male","female","both"],value:v,onChange:function(e){T(Re(e.target.value))}},{name:"country",type:"text",label:"Country",value:g,ignoreUntouched:!0,onChange:function(e){T(Fe(e.target.value))},onValidate:function(e){T(Je(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"city",type:"text",label:"City",value:h,ignoreUntouched:!0,onChange:function(e){T(Be(e.target.value))},onValidate:function(e){T(Ze(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"maxDist",type:"slider",label:"Search distance",value:b,onChange:function(e){T(Pe(e))}},{name:"ageRange",type:"slider",label:"Age search range",value:[x,y],onChange:function(e){T(ze(e))}},{name:"bio",type:"text",label:"Bio",value:m,ignoreUntouched:!0,onChange:function(e){T(Ve(e.target.value))},onValidate:function(e){qe(e)},rules:{helperText:"Write some info about yourself",rule:{minLength:2,maxLength:256,regex:/^.+$/}}},{type:"autocomplete",values:[],onChange:function(e){return T(Ge(e))}}],P=[{component:"fab",type:"submit",text:"Save",size:"large",disabled:!D,onClick:function(){var e=Object(j.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),T(Qe({id:t,email:a,username:c,name:o,surname:i,bio:m,birthDate:d,phone:f,gender:p,country:g,city:h,maxDist:b,lookFor:v,minAge:x,maxAge:y,tags:A},L));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{component:"button",text:"update personal info",size:"large",onClick:function(){T(pe({parent:"profile"})),T(ue({header:"Update personal info"})),T(ie()),V.push("/profile/personal")}}],R={text:"This action is irreversable. All your images, chats and likes will be vanished.",header:"Are you sure?",yesText:"Agree",noText:"Disagree",buttonText:"Delete account"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/profile",exact:!0},r.a.createElement(cn,{inputs:B,buttons:P}),r.a.createElement(aa,R)),r.a.createElement(u.b,{path:"/profile/personal",component:ja}),r.a.createElement(u.b,{path:"/profile/password-update",component:ya})))},wa=a(260),ka=a(261),Ca=Object(m.a)({Card:{position:"relative","&:hover":{"& $Media":{transform:"scale(1.2)"},"& $Info":{transform:"translateY(-1.5rem)"}}},Media:{paddingTop:"100%"},Grid:{marginTop:"10px"},Info:{position:"absolute",transform:"translateY(2rem)",width:"100%",textAlign:"center",color:"#fafafa",background:"linear-gradient(#00000000, #000000aa)"}}),Sa=function(e){var t=Ca(),a=Object(l.c)(),n=Object(l.d)((function(e){return e.general.images}));e.images&&(n=e.images),console.log(n);var c=function(){var t=Object(j.a)(E.a.mark((function t(n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.images){t.next=2;break}return t.abrupt("return");case 2:return console.log(n),t.next=5,P.put("avatar",{imageId:n.id});case 5:r=t.sent,a(dt({avatar:n})),console.log(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(O.a,{className:t.Grid,container:!0,justify:"center",spacing:1},n.length>0&&n.map((function(e){return r.a.createElement(O.a,{item:!0,xs:8,sm:4,key:e.id||e},r.a.createElement(wa.a,{className:t.Card},r.a.createElement(ka.a,{onClick:function(){return c(e)},className:t.Media,image:e.image||Rt.a})))})))},Ia=a(262),Na={isLoading:!1,error:null,users:[],strangers:[]},Aa=new Set,Ta=Object(C.createSlice)({name:"users",initialState:Na,reducers:{startLoading:function(e){e.isLoading=!0},successLoading:function(e){e.isLoading=!1},addUsers:function(e,t){var a=t.payload,n=Object(M.a)(a);n.length&&n.forEach((function(t){0===Object.keys(t).length||e.users.find((function(e){return e.id===t.id}))||e.users.push(t)}))},updateUsers:function(e,t){var a=t.payload,n=Object(M.a)(a);n.length&&n.forEach((function(t){var a=e.users.find((function(e){return t.id===e.id}));a?Object.keys(a).forEach((function(e){return a[e]=t[e]})):e.users.push(t)}))},sortStrangers:function(e,t){var a=t.payload,n=Object(z.a)({},a).compareFunction;e.strangers.sort(n)},setUsers:function(e,t){var a=t.payload;e.users=a},setStrangers:function(e,t){var a=t.payload;e.strangers=Object(M.a)(a)},failLoading:function(e,t){var a=t.payload;e.isLoading=!1,e.error=a},resetError:function(e){e.error=null},resetUsersState:function(){return Na}}}),La=F.source(),Va=function(e){return e.map((function(e){return e.id}))},Ma=function(){var e=Object(j.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("strangers",{cancelToken:La.token});case 3:if(!(a=e.sent).data.status){e.next=8;break}return e.abrupt("return",a.data.data);case 8:if(t(a.data.data,"error"),"incorrect session id"!==a.data.data){e.next=11;break}return e.abrupt("return",null);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t("Server error","error"),console.log(e.t0);case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),Ua=function(e){return function(){var t=Object(j.a)(E.a.mark((function t(a,n){var r,c,o,i,l,s;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return r=Object(M.a)(e).filter((function(e){return!Aa.has(e)})),t.prev=3,c=r.map((function(e){return B("/data/".concat(e))})),t.next=7,Promise.allSettled(c);case 7:return o=t.sent,i=o.filter((function(e){return"fulfilled"===e.status})).filter((function(e){return e.value.data.status})).map(function(){var e=Object(j.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t.value.data.data);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=11,Promise.all(i);case 11:l=t.sent,s=l.map((function(e){return e&&H(e)})),Aa.add(Va(s)),a(Pa(s)),t.next=21;break;case 17:throw t.prev=17,t.t0=t.catch(3),console.log(t.t0),new Error("Fetching users failed");case 21:case"end":return t.stop()}}),t,null,[[3,17]])})));return function(e,a){return t.apply(this,arguments)}}()},Da=Ta.actions,Fa=Da.startLoading,Ba=Da.successLoading,Pa=Da.addUsers,Ra=(Da.setUsers,Da.updateUsers),za=Da.sortStrangers,Ga=Da.setStrangers,Wa=(Da.failLoading,Da.resetError,Da.resetUsersState),$a=Ta.reducer,_a=function(){var e=Object(j.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.post("ban",{id:t});case 3:return a=e.sent,e.abrupt("return",a.data.status);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Ha=function(){var e=Object(j.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.delete("ban/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data.status);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),qa=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(l.c)(),o=Object(l.d)((function(e){return e.users.strangers})),i=function(){return Object(j.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("ban");case 3:(t=e.sent).data.status&&(a=t.data.data||[],c(Ua(a)),r(a)),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))};Object(n.useEffect)((function(){i()}),[]);var u=Object(n.useCallback)((function(){return function(){var e=Object(j.a)(E.a.mark((function e(t){var n,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(t);case 2:n=o.filter((function(e){return e.id!==t})),c(Ga(n)),i=[].concat(Object(M.a)(a),[t]),r(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[o,a,c]),d=Object(n.useCallback)((function(){return function(){var e=Object(j.a)(E.a.mark((function e(t){var n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha(t);case 2:n=e.sent,a.length&&n&&(c=a.filter((function(e){return e!==t})),r(c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[a]);return{banned:a,loadBanned:i,banAndUpdate:u,unbanAndUpdate:d}},Ya=a(250),Ja=Object(m.a)({Avatar:{marginRight:"1rem"},Text:{fontFamily:"Righteous",fontSize:"1.5rem"}}),Za=function(e){var t,a,n=e.user,c=Ja();return r.a.createElement(O.a,{container:!0,alignItems:"center"},r.a.createElement(Bt.a,{className:c.Avatar,src:(null===n||void 0===n||null===(t=n.avatar)||void 0===t?void 0:t.image)||(null===n||void 0===n||null===(a=n.images[0])||void 0===a?void 0:a.image)||Rt.a}),r.a.createElement(wt.a,{className:c.Text},n.username))},Ka=Object(m.a)({Button:{padding:"7px 30px"},Menu:{width:"100%"},ListItem:{borderRadius:"30px"}}),Xa=Object(n.forwardRef)((function(e,t){var a=e.users,n=e.autoFocusItem,c=e.defaultText,o=e.setOpen,i=e.action,s=Ka(),d=Object(l.c)(),m=Object(u.g)(),f=Object(u.h)();return r.a.createElement(Ya.a,{className:s.Menu,ref:t,autoFocusItem:n,id:"users-list",onKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),o&&o(!1))}},a.length>0?a.map((function(e){return r.a.createElement(jt.a,{className:s.ListItem,onClick:function(){return function(e){if(a.length){var t=a.find((function(t){return t.id===e})),n=f.pathname.split("/")[1];d(pe({parent:n})),d(me({companion:t})),m.push("/strangers/".concat(e)),o&&o(!1)}}(e.id)},key:e.id},r.a.createElement(Za,{user:e}),i&&r.a.createElement(k.a,{className:s.Button,color:i.color,endIcon:i.icon,onClick:function(t){return function(e,t){e.stopPropagation(),i.onClick(t)}(t,e.id)}},"unban user"))})):r.a.createElement(wt.a,null,c))})),Qa=function(){var e=qa(),t=e.banned,a=e.unbanAndUpdate,c=Object(l.d)((function(e){return e.users.users})),o=Object(n.useState)(null),i=Object(s.a)(o,2),u=i[0],d=i[1],m=Object(n.useMemo)((function(){return t.map((function(e){return c.find((function(t){return t.id===e}))}))}),[t,c]);return Object(n.useEffect)((function(){if(t&&c.length){var e={icon:r.a.createElement(Ia.a,null),color:"secondary",onClick:a};d(r.a.createElement(Xa,{users:m,defaultText:"No users banned. Yet...",action:e}))}}),[c,t,m,a]),r.a.createElement(O.a,{container:!0},u)},en=Object(m.a)({indicator:{backgroundColor:"#ffffff00",border:"1px solid ".concat(b.dark),bottom:0,height:"100%",borderRadius:"30px"},TabPanel:{backgroundColor:h,borderRadius:"30px",padding:"5px"},Profile:{minHeight:"100vh",padding:"30px",paddingBlockEnd:"60px"}}),tn=[{id:0,text:"Info",component:r.a.createElement(Oa,null)},{id:1,text:"Gallery",component:r.a.createElement(Sa,null)},{id:2,text:"Banned",component:r.a.createElement(Qa,null)}],an=Object(n.createContext)(tn[0].id),nn=Object(l.b)((function(e){return{id:e.general.id,images:e.general.images}}))((function(){var e=en(),t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],o=a[1],i=tn.map((function(e,t){return r.a.createElement(Lt.a,{disableRipple:!0,label:e.text,key:t})}));return r.a.createElement(O.a,{container:!0,wrap:"nowrap",direction:"column",justify:"flex-start",alignItems:"center",className:e.Profile},r.a.createElement(an.Provider,{value:c},r.a.createElement(Yt,null),r.a.createElement(Vt.a,{classes:{root:e.TabPanel,indicator:e.indicator},value:c,onChange:function(e,t){o(t)}},i),r.a.createElement(Mt,{value:c,index:tn[c].id,key:tn[c].id},tn[c].component)))})),rn=Object(m.a)({Form:{width:"100%"},Button:{margin:"8px"},List:{width:"100%"},Buttons:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},Fab:{position:"fixed",right:"10vw",bottom:"4rem"}}),cn=function(e){var t=e.inputs,a=e.buttons,c=rn(),o=Object(ht.a)(),i=Object(n.useContext)(an),l={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen};return r.a.createElement("form",{className:c.Form},r.a.createElement(bt.a,{className:c.List},t.map((function(e){return r.a.createElement(vt.a,{key:e.name||e.type},r.a.createElement(Tt,e))})),a&&r.a.createElement(vt.a,{className:c.Buttons},a.map((function(e){var t=e.component,a=e.variant,n=e.type,o=e.text,s=e.onClick,u=Object(gt.a)(e,["component","variant","type","text","onClick"]);return"fab"===t?r.a.createElement(xt.a,{key:o,in:0===i,timeout:l,style:{transitionDelay:"".concat(0===i?l.exit:0,"ms")},unmountOnExit:!0},r.a.createElement(yt.a,Object.assign({color:"primary",key:o,className:c.Fab,variant:a,type:n,onClick:s},u),o)):r.a.createElement(k.a,Object.assign({key:o,className:c.Button,variant:a,type:n,onClick:s},u),o)})))))},on=function(){var e=Ht(),t=xa(),a=Object(u.g)(),c=Object(l.c)(),o=Object(l.d)((function(e){return e.login})),i=o.email,d=o.password,m=o.emailValid,f=o.passwordValid,p=Object(l.d)((function(e){return e.general})).isLoading,g=Object(n.useState)(!0),h=Object(s.a)(g,2),b=h[0],v=h[1];Object(n.useEffect)((function(){v(m&&f)}),[m,f]);var x=function(){var t=Object(j.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),c(mt(i,d,e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=[{name:"email",type:"email",label:"Email",value:i,onValidate:function(e){c(T(e))},onChange:function(e){c(N(e.target.value))},rules:{helperText:"invalid email",rule:{minLength:3,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"password",type:"password",label:"Password",value:d,required:!0,onValidate:function(e){c(L(e))},onChange:function(e){c(A(e.target.value))},rules:{helperText:"Use at least one lower- and uppercase letter, number and symbol. Min length 4",rule:{minLength:4,maxLength:20,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/}}}],C=[{variant:"contained",type:"submit",text:"Sign in",disabled:!b,onClick:function(e){x(e)}},{text:"Not yet with us?",onClick:function(){a.push("register")}}];return r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:t.SingleForm},p?r.a.createElement(w.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(cn,{inputs:y,buttons:C}),r.a.createElement(k.a,{variant:"text",color:"primary",classes:{label:t.label},onClick:function(){a.push("/forgot")}},"Forgot password?")))},ln=function(){var e=Ht(),t=Object(l.c)(),a=xa(),c=Object(u.g)(),o=Object(l.d)((function(e){return e.register})),i=o.email,d=o.username,m=o.password,f=o.confirm,p=o.emailValid,g=o.usernameValid,h=o.passwordValid,b=o.confirmValid,v=Object(n.useState)(!1),x=Object(s.a)(v,2),y=x[0],k=x[1],C=Object(l.d)((function(e){return e.general})).isLoading;Object(n.useEffect)((function(){k(p&&g&&h&&b)}),[p,g,h,b]);var S=function(){var a=Object(j.a)(E.a.mark((function a(n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),t(ha(d,i,m,e,c));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),I=[{name:"username",type:"text",label:"Username",value:d,required:!0,onValidate:function(e){t(ma(e))},onChange:function(e){t(la(e.target.value))},rules:{helperText:"Use letters, numbers or symbols ., %, _, -, +. Min length 3",rule:{minLength:3,maxLength:20,regex:/^[\w%-+.]+$/}}},{name:"email",type:"email",label:"Email",value:i,required:!0,onValidate:function(e){t(da(e))},onChange:function(e){t(ia(e.target.value))},rules:{helperText:"invalid email",rule:{minLength:3,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"password",type:"password",label:"Password",value:m,required:!0,onValidate:function(e){t(fa(e))},onChange:function(e){t(sa(e.target.value))},rules:{helperText:"Use at least one lower- and uppercase letter, number and symbol. Min length 4",rule:{minLength:4,maxLength:20,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/}}},{name:"confirm",type:"password",label:"Confirm",value:f,required:!0,onValidate:function(e){t(pa(e))},onChange:function(e){t(ua(e.target.value))},rules:{helperText:"Confirm and password does not match",rule:{minLength:3,maxLength:20,regex:new RegExp("^".concat(m,"$"))}}}],N=[{variant:"contained",type:"submit",text:"Sign up",disabled:!y,onClick:function(e){S(e)}},{text:"Already a member?",onClick:function(){c.push("/login")}}];return r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:a.SingleForm},C?r.a.createElement(w.a,null):r.a.createElement(cn,{inputs:I,buttons:N}))},sn=a(271),un=a(279),dn=a(285),mn=a(286),fn=a(287),pn=a(288),gn=a(305),hn=a(270),bn=a(266),vn=a(267),xn=a(268),yn=a(269),En=Object(m.a)({UserCard:{position:"relative",overflow:"hidden","&:hover":{cursor:"pointer","& $Info":{transform:"translateY(-80px)"},"& $Like":{opacity:1},"& $Ban":{opacity:1}}},Info:{width:"105%",padding:"10px 30px 20px",position:"absolute",color:"white",left:"-10px",background:"linear-gradient(#00000000, #000000aa)"},InfoHeader:{justifyContent:"space-between",padding:0,"& p":{fontSize:"1.5rem"}},Tags:{lineHeight:"0.5rem","& span":{fontSize:"1rem"},"& span:nth-child(n+2)::before":{content:'"|"',margin:"0 10px"}},Stepper:{backgroundColor:"#ffffff00",position:"absolute",width:"100%"},StepperButton:{backgroundColor:"#ffffff00",textShadow:"0,0,10,#00000055"},CardMedia:{height:0,paddingTop:"100%"},Like:{position:"absolute",bottom:"10px",right:"10px",transition:"0.3s",opacity:0,zIndex:3},Ban:{position:"absolute",bottom:"10px",right:"70px",transition:"0.3s",opacity:0,zIndex:4}}),jn=Object(n.memo)((function(e){var t=En(),a=Object(n.useState)(0),c=Object(s.a)(a,2),o=c[0],i=c[1],d=Object(z.a)({},e.user),m=d.id,f=d.username,p=d.images,g=d.age,h=e.user.tags||["No tags"],b=Object(u.g)(),v=Object(l.c)(),x=qa().banAndUpdate,y=function(e){var t;e.stopPropagation(),v((t=m,function(a){try{B.post("/like",{id:t})}catch(e){console.log(e)}}))},E=0===(null===p||void 0===p?void 0:p.length)||o===(null===p||void 0===p?void 0:p.length)-1||!0,j=0===o||0===(null===p||void 0===p?void 0:p.length)||!0;return r.a.createElement(O.a,{item:!0,xs:12,sm:6,lg:4},r.a.createElement(wa.a,{className:t.UserCard,onClick:function(t){var a;v(me({companion:e.user})),v((a=m,function(e){try{B.post("/look",{id:a})}catch(t){console.log(t)}})),v(pe({parent:"strangers"})),b.push("/strangers/"+m)}},r.a.createElement("div",null,p&&p.length>1&&r.a.createElement(gn.a,{variant:"dots",steps:0,position:"static",activeStep:o,className:t.Stepper,nextButton:E?null:r.a.createElement(k.a,{className:t.StepperButton,size:"small",onClick:function(e){e.stopPropagation(),i((function(e){return e+1}))}},r.a.createElement(bn.a,null)),backButton:j?null:r.a.createElement(k.a,{className:t.StepperButton,size:"small",onClick:function(e){e.stopPropagation(),i((function(e){return e-1}))}},r.a.createElement(vn.a,null))}),r.a.createElement(yt.a,{color:"secondary",className:t.Like,size:"small",onClick:function(e){return y(e)}},r.a.createElement(xn.a,null)),r.a.createElement(yt.a,{color:"secondary",className:t.Ban,size:"small",onClick:function(e){return function(e){e.stopPropagation(),x(m)}(e)}},r.a.createElement(yn.a,null)),r.a.createElement(ka.a,{className:t.CardMedia,image:p&&p.length&&p[o].image||Rt.a}),r.a.createElement(hn.a,{className:t.Info},r.a.createElement(sn.a,{className:t.InfoHeader},r.a.createElement(wt.a,null,f,", ",g)),r.a.createElement("div",{className:t.Tags},h.map((function(e){return r.a.createElement("span",{key:e},e)})))))))})),On=a(272),wn=a(300),kn=Object(m.a)({Item:{margin:"0 5px"},Header:{fontSize:"1.3rem",fontWeight:500,display:"block"},Container:{width:"100%",padding:"0.5rem 0"}}),Cn=function(e){var t=e.tags,a=kn();return r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(O.a,{className:a.Container,container:!0,direction:"column",alignItems:"flex-start",item:!0},r.a.createElement(wt.a,{className:a.Header},"Interests:"),r.a.createElement(O.a,null,t?t.map((function(e){return r.a.createElement(wn.a,{className:a.Item,variant:"outlined",key:e,label:e})})):r.a.createElement(wt.a,null,"No tags yet"))))},Sn=Object(m.a)({Card:{width:"90%"},Media:{paddingTop:"30%"}}),In=function(e){var t=e.img,a=Sn();return r.a.createElement(wa.a,{className:a.Card},r.a.createElement(ka.a,{className:a.Media,image:t||Rt.a}))},Nn=Object(m.a)({Item:{padding:"10px 15px",width:"100%"},Header:{fontSize:"1.3rem",fontWeight:500,display:"block"},Container:{width:"100%",padding:"0.5rem 0"},fullWidth:{width:"100%"}}),An=function(e){var t=e.bio,a=Nn();return r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(O.a,{className:a.Container,container:!0,direction:"column",alignItems:"flex-start",item:!0},r.a.createElement(wt.a,{className:a.Header},"Bio:"),r.a.createElement(O.a,{className:a.fullWidth},r.a.createElement(wn.a,{className:a.Item,label:t,variant:"outlined"}))))},Tn=a(65),Ln=a(118),Vn=function e(t){var a=t.messageType,n=t.payload;Object(Tn.a)(this,e),this.messageType=a,this.payload=n||null},Mn={NEW_CHAT:100,NEW_MESSAGE:1,EDIT_MESSAGE:2,DELETE_MESSAGE:3},Un={SENT_MESSAGE:1,DELIVERED_MESSAGE:2,READ_MESSAGE:3},Dn=function e(t){var a=t.id,n=t.userIds,r=t.messages;Object(Tn.a)(this,e),this.id=a||"",this.userIds=n,this.messages=r||[]},Fn=function e(t){var a=t.id,n=t.sender,r=t.recipient,c=t.date,o=t.state,i=t.text,l=t.chatId;Object(Tn.a)(this,e),this.id=a||Object(Ln.v4)(),this.chatId=l||"",this.sender=n,this.recipient=r,this.date=c||(new Date).getTime(),this.state=o||Un.SENT_MESSAGE,this.text=i||"no text"},Bn=null,Pn=[],Rn=function(){var e=function(e){var t=document.cookie;console.log(t);var a=t.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)")),n=a?decodeURIComponent(a[1]):void 0;return void 0===n&&(n=t.split(";").find((function(e){return e.match(/session_id.+/)})))&&(n=n.split("=")[1].trim()),n}("session_id");return new WebSocket("wss://".concat("aim-love.ga","/ws?key=").concat(e))},zn=function(){Bn&&Bn.readyState===Bn.OPEN||(Bn=Rn())},Gn=function(e){if(console.log(JSON.stringify(e)),Bn||(Bn=Rn()),console.log(Bn),Bn.readyState!==Bn.OPEN)return zn(),void Pn.push(e);Bn.send(JSON.stringify(e))},Wn=function(){var e=Object(l.d)((function(e){return e.general.id})),t=Object(l.d)((function(e){return e.users.users})),a=Object(l.d)((function(e){return e.UI.companion})),n=Object(u.h)(),r=Object(l.d)((function(e){return e.chat})),c=r.chats,o=r.chat,i=Object(l.c)(),s=Ht(),d=function(){var e=Object(j.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("chat/".concat(t));case 3:return a=e.sent,console.log("[getChatInfo]",a.data),e.abrupt("return",a.data);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var t=Object(j.a)(E.a.mark((function t(a){var n,r,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("newChat"),n=new Dn({userIds:[a,e]}),t.prev=2,t.next=5,B.post("chat",n);case 5:if(r=t.sent,console.log(r.data),!r.data.status){t.next=12;break}return t.next=10,d(r.data.data);case 10:(c=t.sent).status&&(i(ee(c.data)),i(X(c.data)));case 12:return t.abrupt("return",r.data.data);case 15:return t.prev=15,t.t0=t.catch(2),console.log(t.t0),t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,null,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=c.map((function(t){return t.userIds.find((function(t){return t!==e}))}));i(Ua(new Set(t)))},p=function(a){console.log("[showNotif] location path: ".concat(n.pathname));var r=n.pathname.match(a.chatId);if(console.log(r),!r||""===r[0]){var c=a.sender!==e?t.find((function(e){return e.id===a.sender})):null,o=c?"".concat(c.username):"Anonim";console.log("[showNotif] username: ".concat(o)),o&&s("".concat(o,": ").concat(a.text))}},g=function(){var e=Object(j.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[handleChatMessage]",t),t.messageType!==Mn.NEW_CHAT){e.next=13;break}return a=t.payload.id,e.next=5,d(a);case 5:(n=e.sent).status&&i(ee(n.data)),r=c.find((function(e){return a===e.id})),console.log("[handleChatMessage]","chatID","chatData","exists"),console.log(a,n,r),r||console.log("chat not found. actually this should never be visible",c),e.next=14;break;case 13:t.messageType===Mn.NEW_MESSAGE?(console.log("[handleChatMessage] new message"),p(t.payload),i(te(t.payload))):t.messageType===Mn.EDIT_MESSAGE?(console.log("[handleChatMessage] edit message"),p(t.payload),i(te(t.payload))):(t.messageType,Mn.DELETE_MESSAGE);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[getChatsInfoWS]",c),e.prev=1,e.next=4,B("chat");case 4:t=e.sent,console.log(t.data),t.data.status&&(f(t.data.data),i(Q(t.data.data))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return{selectChat:function(){var e=Object(j.a)(E.a.mark((function e(n){var r,o,l,s=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:null,console.log(c),c&&0!==c.length){e.next=5;break}return e.next=5,h();case 5:if((o=a||t.find((function(e){return e.id===n})))||i(Ua([n])),(l=r?c.find((function(e){return e.id===r})):null)||(l=c.find((function(e){return e.userIds.find((function(e){return n===e}))}))),console.log(o),console.log(l),l){e.next=16;break}return m(n),e.abrupt("return",null);case 16:return i(X(l)),i(me({companion:o})),i(pe({parent:"chat"})),i(ue({header:(null===o||void 0===o?void 0:o.name)||null})),i(ie()),e.abrupt("return",o);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createChat:m,newMessage:function(t,a){var n=new Fn({sender:e,recipient:t,text:a,chatId:o}),r=new Vn({messageType:Un.SENT_MESSAGE,payload:n});i(te(n)),Gn(r)},editMessage:function(t,a,n){console.log("editMessage");var r=new Fn({sender:e,id:t,recipient:a,text:n,chatId:o}),c=new Vn({messageType:Mn.EDIT_MESSAGE,payload:r});i(te(r)),Gn(c)},deleteMessage:function(t,a,n){console.log("deleteMessage");var r=new Fn({sender:e,id:t,recipient:a,text:n,chatId:o}),c=new Vn({messageType:Mn.DELETE_MESSAGE,payload:r});i(ae(r)),Gn(c)},getChatInfo:d,getChatsInfo:h,readMessage:function(e){var t=Object(z.a)({},e);t.state=Un.READ_MESSAGE,console.log(t),Gn(new Vn({messageType:Mn.EDIT_MESSAGE,payload:t})),i(te(t))},handleChatMessage:g}},$n=a(273),_n=Object(m.a)({Typography:{fontSize:"1.5rem"},Name:{fontSize:"2rem"},Location:{fontSize:"1rem"},FullWidth:{width:"100%"},Message:{position:"fixed",right:"10vw",bottom:"4rem"},FabIcon:{marginRight:"10px"}}),Hn=function(e){var t,a=_n(),c=Object(u.g)(),o=Object(l.d)((function(e){return e.UI.companion})),i=Object(z.a)({},o),s=i.id,d=i.images,m=i.avatar,f=i.name,p=i.surname,g=i.country,h=i.city,b=i.age,v=i.bio,x=i.tags,y=Wn().selectChat,E=Object(l.d)((function(e){return e.chat.chat}));return Object(n.useEffect)((function(){console.log("UserProfile useEffect push to chat"),E&&c.push("/chat/".concat(E))}),[E,c]),r.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",className:a.FullWidth},r.a.createElement(In,{img:(null===m||void 0===m?void 0:m.image)||(null===(t=d[0])||void 0===t?void 0:t.image)||Rt.a}),r.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",item:!0,xs:12,sm:8,md:6},r.a.createElement(wt.a,{className:a.Name},"".concat(f," ").concat(p)),r.a.createElement(wt.a,{color:"secondary",className:a.Location},"".concat(g,", ").concat(h)),r.a.createElement(wt.a,{className:a.Typography},"".concat(b," years old")),r.a.createElement(On.a,{className:a.FullWidth}),r.a.createElement(Cn,{tags:x}),r.a.createElement(On.a,{className:a.FullWidth}),r.a.createElement(An,{bio:v||"UFO flew here and dropped this message here"}),r.a.createElement(Sa,{images:d}),r.a.createElement(yt.a,{variant:"extended",color:"primary",className:a.Message,onClick:function(e){y(s)}},r.a.createElement($n.a,{className:a.FabIcon}),"Send message")))},qn=Object(m.a)({Inputs:{width:"100%",margin:"10px 0"}}),Yn=function(){var e=qn(),t=Object(z.a)({},Object(l.d)((function(e){return e.filter}))),a=t.username,n=t.age,c=Object(l.c)(),o=[{name:"username",type:"text",label:"Username",value:a,onChange:function(e){c(ye(e.target.value))}},{name:"AgeRange",type:"doubleSelector",label:"Age search range",value:n,onChange:function(e){return c(Ee(e))}}];return r.a.createElement(r.a.Fragment,null,o.map((function(t){var a=t.name,n=t.type,c=t.label,o=t.value,i=t.onChange;return r.a.createElement(O.a,{className:e.Inputs,key:c,item:!0,xs:12},r.a.createElement(Tt,{name:a,type:n,label:c,value:o,onChange:i}))})))},Jn=a(125),Zn=a(274),Kn=a(276),Xn=a(277),Qn=a(275),er=a(297),tr=Object(m.a)({Wrapper:{width:"100%",margin:"10px 0"},Active:{color:v.light,fontWeight:"bold"}}),ar=function(){var e=tr(),t=Object(l.c)(),a=Object(n.useState)(!0),c=Object(s.a)(a,2),o=c[0],i=c[1],u=Object(n.useState)(null),d=Object(s.a)(u,2),m=d[0],f=d[1],p=function(e,t){return e.username.localeCompare(t.username)},g=function(e,t){return t.username.localeCompare(e.username)},h=function(e,t){return e.age-t.age},b=function(e,t){return t.age-e.age},v=function(e,t){return e.rating-t.rating},x=function(e,t){return t.rating-e.rating},y=Object(n.useCallback)((function(){switch(m){case"username":return o?p:g;case"age":return o?h:b;case"rating":return o?v:x;default:return}}),[o,m]);return Object(n.useEffect)((function(){t(za({compareFunction:y()}))}),[o,m,y,t]),r.a.createElement(O.a,{container:!0,justify:"space-around",alignItems:"center",className:e.Wrapper},r.a.createElement(Zn.a,{variant:"outlined"},r.a.createElement(k.a,{className:"username"===m&&e.Active,onClick:function(){return f("username")}},"username"),r.a.createElement(k.a,{className:"age"===m&&e.Active,onClick:function(){return f("age")}},"age"),r.a.createElement(k.a,{className:"rating"===m&&e.Active,onClick:function(){return f("rating")}},"rating")),r.a.createElement(Qn.a,{control:r.a.createElement(er.a,{checked:o,onChange:function(){return i((function(e){return!e}))},name:"isAscending"}),label:"Ascending order"}))},nr=Object(m.a)({Wrapper:{position:"fixed",left:0,bottom:"39px",zIndex:6},Paper:{padding:"10px",width:"70vw"},ButtonLabel:{fontFamily:"Righteous",fontSize:"1.2rem",padding:"0 15px"},Active:{boxShadow:"0 0 5px ".concat(v.light)}}),rr=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],d=nr(a),m=function(){u((function(e){return!e}))},f=function(e){var t=!a||(e===a||!l);c(e),t&&m()};return r.a.createElement(O.a,{className:d.Wrapper,container:!0,item:!0,xs:12,justify:"center",self:"flex-end"},r.a.createElement(Jn.a,{className:d.Paper},r.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(O.a,{container:!0,item:!0,direction:"column",alignItems:"center"},l&&("filter"===a?r.a.createElement(Yn,null):r.a.createElement(ar,null))),r.a.createElement(O.a,{container:!0,justify:"space-evenly",alignItems:"center",item:!0},r.a.createElement(Zn.a,{variant:"text",color:"secondary","aria-label":"text primary button group"},r.a.createElement(k.a,{className:l&&"filter"===a&&d.Active,classes:{label:d.ButtonLabel},onClick:function(){return f("filter")}},"Filter"),r.a.createElement(k.a,{className:l&&"sort"===a&&d.Active,classes:{label:d.ButtonLabel},onClick:function(){return f("sort")}},"Sort")),r.a.createElement(k.a,{onClick:m,size:"small",color:"secondary"},l?r.a.createElement(Kn.a,null):r.a.createElement(Xn.a,null))))))},cr=Object(m.a)({Strangers:{fontSize:"2rem",paddingBottom:"60px"},CardContainer:{paddingBottom:"90px"},Text:{marginTop:"1rem",width:"100%",textAlign:"center"}}),or=function(){var e=Ht(),t=Object(l.d)((function(e){return e.users.users})),a=Object(l.d)((function(e){return e.users.strangers})),c=Object(l.d)((function(e){return e.filter})),o=Object(n.useState)(null),i=Object(s.a)(o,2),d=i[0],m=i[1],f=Object(n.useState)(null),p=Object(s.a)(f,2),g=p[0],h=p[1],b=cr(),v=Object(l.c)();return Object(n.useEffect)((function(){v(function(e){return function(){var t=Object(j.a)(E.a.mark((function t(a,n){var r,c,o,i,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Fa()),t.next=3,Ma(e);case 3:if(r=t.sent){t.next=9;break}return a(lt()),a(Wa()),a(de()),t.abrupt("return");case 9:return r=r.map((function(e){return H(e)})),a(Ga(r)),a(Pa(r)),s=r,c=0===Aa.length?s:s.filter((function(e){return!Aa.has(e.id)})),t.next=15,Promise.all(q(c));case 15:o=t.sent,a(Ra(o)),i=n().users.users,l=r.map((function(e){return i.find((function(t){return t.id===e.id}))})).filter((function(e){return null!==e})),Aa.add(Va(l)),a(Ga(l)),a(Ba());case 22:case"end":return t.stop()}var s}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(e))}),[v]),Object(n.useEffect)((function(){var e=a.filter((function(e){return e.age>=c.age.minAge&&e.age<=c.age.maxAge})),t=(e=c.username.length>0?e.filter((function(e){return e.username.toLowerCase().includes(c.username.toLowerCase())})):e)&&e.length?e.map((function(e){return r.a.createElement(jn,{user:e,key:e.id})})):r.a.createElement(wt.a,{className:b.Text},"No users to display");m(t)}),[c,b.Text,a]),Object(n.useEffect)((function(){var e=t&&t.map((function(e){return r.a.createElement(u.b,{key:e.id,path:"/strangers/:id",render:function(){return r.a.createElement(Hn,{user:e})}})}));h(e)}),[t]),r.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",className:b.Strangers},r.a.createElement(u.d,null,g,r.a.createElement(u.b,{path:"/",exact:!0,render:function(){return r.a.createElement(O.a,{className:b.CardContainer,container:!0,item:!0,xs:10,spacing:3},d,r.a.createElement(rr,null))}})))},ir=a(247),lr=a(255),sr=a(280),ur=a(119),dr=a.n(ur),mr=a(278);function fr(e){var t=e.children,a=Object(mr.a)({disableHysteresis:!0,threshold:0});return r.a.cloneElement(t,{elevation:a?4:0})}var pr=Object(m.a)({Appbar:{paddingTop:"10px",backgroundColor:g},Header:{textAlign:"center",fontFamily:"Righteous",color:b.dark,fontSize:"2rem",textTransform:"capitalize"},Popper:{zIndex:5,textAlign:"center"},PopperPaper:{padding:"1rem"},Category:{fontSize:"1rem",fontWeight:700}}),gr=function(e){var t=e.header,a=e.notification,c=pr(),o=Object(l.d)((function(e){return e.users.users})),i=Object(n.useState)([]),d=Object(s.a)(i,2),m=d[0],f=d[1],p=Object(u.h)(),g=Object(u.g)(),h=Object(l.c)(),v=Object(n.useState)(!1),x=Object(s.a)(v,2),y=x[0],E=x[1],j=Object(n.useRef)(null);Object(n.useEffect)((function(){h(Ua(a))}),[h,a]),Object(n.useEffect)((function(){if(a){var e=o.filter((function(e){return Object(M.a)(a).includes(e.id)}));e&&f(e)}}),[o,a]);var w=p.pathname.split("/").length>2,C=function(e){j.current&&j.current.contains(e.target)||E(!1)},S=Object(n.useRef)(y);return Object(n.useEffect)((function(){!0===S.current&&!1===y&&j.current.focus(),S.current=y}),[y]),r.a.createElement(fr,null,r.a.createElement(un.a,{className:c.Appbar},r.a.createElement(O.a,{container:!0,justify:"space-around",alignItems:"center",item:!0},r.a.createElement(O.a,{item:!0,xs:2},w?r.a.createElement(k.a,{variant:"text",color:"inherit",onClick:function(){var e=p.pathname.split("/")[1];h(function(e,t){return function(a,n){var r=n().UI.parent;a(le()),a(ue({header:t})),a(me({companion:null})),a(X(null)),"strangers"===r?e.push("/"):e.push("/".concat(r))}}(g,e))}},r.a.createElement(vn.a,{style:{color:b.dark},fontSize:"large"})):null),r.a.createElement(O.a,{item:!0,xs:6},r.a.createElement(wt.a,{variant:"h1",className:c.Header},t)),r.a.createElement(O.a,{item:!0,xs:2},r.a.createElement(k.a,{ref:j,variant:"text",color:"inherit",onClick:function(){E((function(e){return!e}))}},r.a.createElement(Ft.a,{color:"secondary",overlap:"circle",variant:"dot",badgeContent:a||0},r.a.createElement(dr.a,{style:{color:b.dark},fontSize:"large"}))),r.a.createElement(ir.a,{className:c.Popper,open:y,anchorEl:j.current,placement:"left",transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps;return r.a.createElement(lr.a,t,r.a.createElement(Jn.a,{className:c.PopperPaper},r.a.createElement(wt.a,{className:c.Category},"Visitors"),r.a.createElement(sr.a,{onClickAway:C},r.a.createElement(Xa,{users:m,autoFocusItem:y,setOpen:E}))))}))))))},hr=a(281),br=a(282),vr=Object(m.a)({List:{width:"100%",textAlign:"center"},ListItem:{width:"80%",margin:"0 auto",display:"flex",justifyContent:"space-around",alignItems:"center",borderRadius:"30px"},Username:{fontWeight:800},Text:{fontSize:"1rem"}}),xr=function(e){var t=e.chats,a=e.handleChatSelect,n=vr(),c=Object(l.d)((function(e){return e.users.users})),o=Object(l.d)((function(e){return e.general.id})),i=t.map((function(e){var t=Object(z.a)({},e),a=t.userIds.find((function(e){return e!==o})),n=c.find((function(e){return e.id===a}));return t.user=Object(z.a)({},n),t}));return r.a.createElement(bt.a,{className:n.List},i.length?i.map((function(e){var t,c=e.id,o=Object(z.a)({},e.user),i=o.id,l=o.name,s=o.image,u=o.messages,d=o.newMessages;return r.a.createElement(vt.a,{className:n.ListItem,button:!0,onClick:function(){return a(i,c)},key:c},r.a.createElement(Ft.a,{color:"secondary",overlap:"circle",variant:"dot",badgeContent:d||0},r.a.createElement(hr.a,null,r.a.createElement(Bt.a,{src:s,alt:l}))),r.a.createElement(br.a,{primary:l,primaryTypographyProps:{className:n.Username},secondary:u&&(null===(t=u[u.length-1])||void 0===t?void 0:t.text)||""}))})):r.a.createElement(wt.a,{className:n.Text},"No chats yet"))},yr=a(283),Er=a(284),jr=Object(m.a)({Container:{width:"100%",justifyContent:function(e){return e.self?"flex-end":"flex-start"},"& $Paper":{borderRadius:function(e){return e.self?"30px 30px 5px 30px":"5px 30px 30px 30px"}}},Paper:{padding:"0.4rem 1.5rem",marginLeft:"1rem",maxWidth:"60%",backgroundColor:function(e){return e.self?b.light:h}},Typography:{fontSize:"1rem"},Info:{justifyContent:function(e){return e.self?"flex-end":"flex-start"}},Date:{fontSize:"0.7rem",color:b.contrastTextLighter},Icon:{marginLeft:"0.3rem",fontSize:"0.7rem",color:function(e){return e.state===Un.SENT_MESSAGE?b.contrastTextLighter:v.main}},"@media (max-width: 600px)":{Avatar:{display:"none"},Paper:{maxWidth:"100%",padding:"0.3rem 1rem"}}}),Or=function(e){var t=Object(z.a)({},e),a=t.self,n=t.text,c=t.image,o=t.name,i=t.date,l=t.state,s=jr({self:a,state:l});return r.a.createElement(O.a,{container:!0,className:s.Container},a?null:r.a.createElement(Bt.a,{className:s.Avatar,src:c,alt:o}),r.a.createElement(Jn.a,{elevation:1,className:s.Paper},r.a.createElement(O.a,{container:!0},r.a.createElement(wt.a,{className:s.Typography},n)),r.a.createElement(O.a,{className:s.Info,container:!0,alignItems:"center"},r.a.createElement(wt.a,{component:"span",className:s.Date},function(e){var t=new Date(e),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return"".concat(t.getHours(),":").concat(a)}(i)),l===Un.READ_MESSAGE?r.a.createElement(yr.a,{className:s.Icon}):r.a.createElement(Er.a,{className:s.Icon}))))},wr=a(301),kr=a(120),Cr=a.n(kr),Sr=Object(m.a)({Wrapper:{border:"1px solid #ccc",borderRadius:"45px",padding:"10px",backgroundColor:h},Input:{flexGrow:2,paddingLeft:"20px"},Send:{boxShadow:"none"},Icon:{transform:"rotate(-38deg) skew(17deg, 4deg) translateX(2px)"},Form:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}}),Ir=function(){var e=Sr(),t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],c=a[1],o=Object(l.d)((function(e){return e.UI.companion.id})),i=Wn().newMessage;return r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(O.a,{className:e.Wrapper,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,xs:10,sm:8},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(n),i(o,n),c("")},className:e.Form},r.a.createElement(wr.a,{className:e.Input,onChange:function(e){return c(e.target.value)},value:n}),r.a.createElement(yt.a,{type:"submit",className:e.Send,size:"small",color:"secondary"},r.a.createElement(Cr.a,{className:e.Icon})))))},Nr=Object(m.a)({Container:{minHeight:"91vh"},List:{flexGrow:2,width:"70%",maxHeight:"70vh",margin:"0 auto",overflowY:"auto"},ListItem:{margin:"20px auto"},Header:{marginTop:"30px"},SendForm:{marginTop:"auto",marginBottom:"70px"}}),Ar=0,Tr=function(e){var t=Object(l.d)((function(e){return e.UI.companion})),a=t.name,c=t.avatar,o=t.images,i=Object(l.d)((function(e){return e.chat})),u=i.chat,d=i.chats.find((function(e){return e.id===u})).messages,m=Object(l.d)((function(e){return e.general.id})),f=Nr(),p=Wn().readMessage,g=Object(n.useState)([]),h=Object(s.a)(g,2),b=h[0],v=h[1];console.log("[ChatRoom ".concat(Ar,"] mappedMessages"),b),console.log("[ChatRoom ".concat(Ar,"] messages"),d);var x=Object(n.useCallback)((function(){d.forEach((function(e){if(e.sender!==m)switch(e.state){case Un.SENT_MESSAGE:case Un.DELIVERED_MESSAGE:return void p(e);case Un.READ_MESSAGE:default:return}}))}),[d]);return Object(n.useEffect)((function(){d&&d.length&&x()}),[d]),Object(n.useEffect)((function(){v((function(){return d&&d.length?d.map((function(e){var t;return r.a.createElement(vt.a,{key:e.id,className:f.ListItem},r.a.createElement(Or,{self:e.sender===m,text:e.text,image:(null===c||void 0===c?void 0:c.image)||(null===(t=o[0])||void 0===t?void 0:t.image),name:a,date:e.date,state:e.state}))})):[]}))}),[d]),Ar++,r.a.createElement(O.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:1,className:f.Container},r.a.createElement(bt.a,{className:f.List},b.length?b:"No messages yet"),r.a.createElement(O.a,{item:!0,className:f.SendForm},r.a.createElement(Ir,null)))},Lr=Object(m.a)({Container:{overflow:"hidden",display:"flex",flexDirection:"column"}}),Vr=function(e){var t=Lr(),a=Object(l.d)((function(e){return e.chat.chats})),c=Wn(),o=c.getChatsInfo,i=c.selectChat;c.createChat,c.getChatInfo;Object(n.useEffect)((function(){o()}),[]);var s=function(t,a){i(t,a),e.history.push("/chat/".concat(a))};return r.a.createElement(sn.a,{className:t.Container},r.a.createElement(u.d,null,a.map((function(e){return r.a.createElement(u.b,{key:e.id,path:"/chat/".concat(e.id),render:function(){return r.a.createElement(Tr,null)}})})),r.a.createElement(u.b,{path:"/chat",exact:!0,render:function(){return r.a.createElement(xr,{chats:a,handleChatSelect:s})}})))},Mr=Object(m.a)({selectedTab:{color:"red"},AppBar:{position:"fixed",left:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},View:{display:"flex",justifyContent:"center",alignItems:"center"},Max:{width:"100%",height:"100vh"},Container:{paddingTop:"70px",backgroundColor:g,maxWidth:"100vw",width:"100%"}}),Ur=[{index:0,label:"Strangers",icon:r.a.createElement(dn.a,null),content:r.a.createElement(or,null),url:"/"},{index:1,label:"Chat",icon:r.a.createElement(mn.a,null),content:r.a.createElement(Vr,null),url:"/chat"},{index:2,label:"Settings",icon:r.a.createElement(fn.a,null),content:r.a.createElement(nn,null),url:"/profile"},{index:3,label:"Logout",icon:r.a.createElement(pn.a,null),content:null,url:"/logout"}],Dr=Object(u.i)((function(){var e=Ht(),t=Object(l.d)((function(e){return e.UI})),a=t.header,c=t.selectedTab,o=t.companion,d=Object(l.d)((function(e){return e.general})),m=d.id,f=d.isLoading,p=d.lookedBy,g=Object(l.c)(),h=Object(u.g)(),b=Mr(),v=Object(n.useState)(null),x=Object(s.a)(v,2),y=x[0],k=x[1];!function(){var e=Wn(),t=e.handleChatMessage,a=e.getChatsInfo;(Bn=Bn||Rn()).onopen=function(e){for(console.log("[open] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"),a();Pn.length>0;){var t=Pn.shift();Gn(t)}},Bn.onmessage=function(e){var a=JSON.parse(e.data);console.log("[message] \u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430:",a),a.messageType<200&&t(a)},Bn.onclose=function(e){e.wasClean?(console.log("[close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0438\u0441\u0442\u043e, \u043a\u043e\u0434=".concat(e.code," \u043f\u0440\u0438\u0447\u0438\u043d\u0430=").concat(e.reason)),Bn=null):(console.log("[close] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e"),console.log(e),zn())},Bn.onerror=function(e){console.log("[error] ".concat(e.message)),zn()}}();var C=function(){var t=Object(j.a)(E.a.mark((function t(a,n){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("/logout"!==n){t.next=4;break}return g(ft(e)),h.push("/login"),t.abrupt("return");case 4:r=Ur.find((function(e){return e.url===n})),g(ue({header:r.label})),g(me({companion:null})),g(se({selectedTab:r})),h.push(n);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=p?new Set(p.filter((function(e){return e!==m}))):new Set;0!==e.size&&k(e)}),[p,m]),Object(n.useEffect)((function(){zn()}),[c,o]);var S=Ur.map((function(e){return r.a.createElement(Lt.a,{icon:e.icon,value:e.url,key:e.index,component:i.b,to:e.url})}));return r.a.createElement(sn.a,null,f?r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center",className:b.Max},r.a.createElement(w.a,null)):r.a.createElement(O.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:1,className:b.Container},r.a.createElement(gr,{header:(null===o||void 0===o?void 0:o.username)||a||Ur[0].label,notification:y}),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/chat",component:Vr}),r.a.createElement(u.b,{path:"/profile",component:nn}),r.a.createElement(u.b,{path:"/",component:or})),r.a.createElement(un.a,{className:b.AppBar,position:"static"},r.a.createElement(Vt.a,{value:(null===c||void 0===c?void 0:c.url)||"/",centered:!0,onChange:C},S))))})),Fr=a(52),Br=a(306),Pr=a(289),Rr=a(299),zr=function(){return r.a.createElement(sn.a,null,r.a.createElement(O.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(wt.a,null,"There's some info missing about you"),r.a.createElement(wt.a,null,"Please take a quick survey")))},Gr=function(){var e=Object(l.c)(),t=Object(z.a)({},Object(l.d)((function(e){return e.additional}))),a=[{name:"name",type:"text",label:"First name",value:t.name,onChange:function(t){e(Te(t.target.value))},onValidate:function(t){e(_e(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"surname",type:"text",label:"Last name",value:t.surname,onChange:function(t){e(Le(t.target.value))},onValidate:function(t){e(He(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"birthDate",type:"date",label:"Birth date",value:t.birthDate,onChange:function(t){e(Me(t.target.value))}},{name:"gender",type:"select",label:"I'm",values:["male","female"],value:t.gender,onChange:function(t){e(Ue(t.target.value))}}];return r.a.createElement(cn,{inputs:a})},Wr=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.additional})),a=[{name:"phone",type:"text",label:"Phone",value:t.phone,ignoreUntouched:!0,onChange:function(t){e(De(t.target.value))},onValidate:function(t){e(Ye(t))},rules:{helperText:"invalid phone",rule:{minLength:0,maxLength:12,regex:/^$|^\+?\d+$/}}},{name:"country",type:"text",label:"Country",value:t.country,onChange:function(t){e(Fe(t.target.value))},onValidate:function(t){e(Je(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"city",type:"text",label:"City",value:t.city,onChange:function(t){e(Be(t.target.value))},onValidate:function(t){e(Ze(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}}];return r.a.createElement(cn,{inputs:a})},$r=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.additional})),a=t.lookFor,n=t.maxAge,c=t.minAge,o=[{name:"lookFor",type:"select",label:"I look for",values:["male","female","both"],value:a,onChange:function(t){e(Re(t.target.value))}},{name:"maxDistance",type:"slider",label:"Search distance",value:t.maxDist,onChange:function(t){e(Pe(t))}},{name:"ageRange",type:"slider",label:"Age search range",value:[c,n],onChange:function(t){e(ze(t))}}];return r.a.createElement(cn,{inputs:o})},_r=Object(m.a)({Grid:{height:"100vh"},Stepper:{backgroundColor:"#ffffff00"},Buttons:{width:"100%"}}),Hr=[{key:0,view:r.a.createElement(zr,null),text:"Intro"},{key:1,view:r.a.createElement(Gr,null),text:"Who are you?"},{key:2,view:r.a.createElement(Wr,null),text:"Where are you?"},{key:3,view:r.a.createElement($r,null),text:"Who fits you?"}],qr=function(){var e=_r(),t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Ht(),d=Object(u.g)(),m=Object(l.c)(),f=Object(l.d)((function(e){return e.additional})),p=Object(z.a)({},f),g=p.id,h=p.name,b=p.surname,v=p.username,x=p.birthDate,y=p.phone,E=p.gender,j=p.country,w=p.city,C=p.maxDist,S=p.lookFor,I=p.minAge,N=p.maxAge,A=p.updateSuccess,T=Object(l.d)((function(e){return e.general.isLoading}));return r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(O.a,{item:!0,xs:12,sm:6,lg:4,container:!0,direction:"column",justify:"center",alignItems:"center",className:e.Grid},Hr[c].view,r.a.createElement(Br.a,{className:e.Stepper,activeStep:c,alternativeLabel:!0},Hr.map((function(e){var t=e.key,a=e.text;return r.a.createElement(Pr.a,{key:t},r.a.createElement(Rr.a,null,a))}))),r.a.createElement(O.a,{container:!0,justify:"space-evenly",className:e.Buttons},r.a.createElement(k.a,{disabled:T||0===c,onClick:function(){o((function(e){return e-1}))},variant:"outlined"},"Back"),r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){c===Hr.length-1?(console.log("[AdditionalInfo] updateSuccess before dispatch",A),m(Qe({id:g,name:h,surname:b,username:v,birthDate:x,phone:y,gender:E,country:j,city:w,maxDist:C,lookFor:S,minAge:I,maxAge:N},i)),d.push("/")):o((function(e){return e+1}))},disabled:T},c===Hr.length-1?"Finish":"Next"))))},Yr=function(){var e=xa(),t=Ht(),a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(!1),d=Object(s.a)(l,2),m=d[0],f=d[1],p=Object(u.g)(),g=[{name:"email",type:"email",label:"Email",value:o,onValidate:function(e){f(e)},onChange:function(e){i(e.target.value)},rules:{helperText:"invalid email",rule:{minLength:3,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}}],h=[{component:"button",variant:"contained",type:"submit",text:"send restore password link",size:"large",disabled:!m,onClick:function(e){e.preventDefault();try{B.post("/reset",{email:o}),t("Check your email","info")}catch(e){t("Server error, please try again later","error")}}},{component:"button",text:"back to login",size:"large",onClick:function(){p.push("/login")}}];return r.a.createElement(O.a,{container:!0,direction:"column",alignItems:"center",justify:"center",className:e.SingleForm},r.a.createElement(cn,{className:e.Form,inputs:g,buttons:h}))},Jr=a(290),Zr=a(248),Kr=a(122),Xr=a.n(Kr),Qr=a(121),ec=a.n(Qr),tc=Object(m.a)((function(e){return{root:Object(va.a)({},e.breakpoints.up("sm"),{minWidth:"344px !important"}),card:{display:"flex",width:"100%"},default:{backgroundColor:e.palette.grey[800]},info:{backgroundColor:e.palette.info.main},success:{backgroundColor:e.palette.success.main},warning:{backgroundColor:e.palette.warning.dark},error:{backgroundColor:e.palette.error.main},header:{display:"block",fontWeight:"bold",color:e.palette.common.white},actionRoot:{padding:"8px 8px 8px 26px"},close:{marginLeft:"auto !important",color:e.palette.common.white},text:{fontSize:"1rem",color:e.palette.common.white}}})),ac=r.a.forwardRef((function(e,t){var a=e.id,n=Object(Fr.c)().closeSnackbar,c=Object(l.d)((function(e){return e.snack.notifications})).find((function(e){return e.key===a})),o=Object(z.a)({},c),i=o.text,s=o.variant,u=o.header,d=tc();return r.a.createElement(Fr.a,{ref:t,className:d.root},r.a.createElement(wa.a,{className:ec()(d.card,d[s])},r.a.createElement(Jr.a,{classes:{root:d.actionRoot}},u&&r.a.createElement(wt.a,{variant:"subtitle2",className:d.header},u),i&&r.a.createElement(wt.a,{variant:"body1",className:d.text},i)),r.a.createElement(Zr.a,{className:d.close,onClick:function(){n(a)}},r.a.createElement(Xr.a,{color:"inherit"}))))})),nc=[],rc=function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.snack.notifications})),a=Object(Fr.c)(),r=a.enqueueSnackbar,c=a.closeSnackbar;return Object(n.useEffect)((function(){t.forEach((function(t){var a,n=t.key,o=t.text,i=t.options,l=void 0===i?{}:i,s=t.dismissed;void 0!==s&&s?c(n):nc.includes(n)||(r(o,Object(z.a)(Object(z.a)({key:n},l),{},{onClose:function(e,t,a){l.onClose&&l.onClose(e,t,a)},onExited:function(t,a){var n;e($t({key:a})),n=a,nc=nc.filter((function(e){return n!==e}))}})),a=n,nc=[].concat(Object(M.a)(nc),[a]))}))}),[t,r,e,c]),null},cc=Object(m.a)({Grid:{width:"100vw",height:"100vh"}});var oc=function(){var e=cc(),t=Object(l.d)((function(e){return e.general})),a=t.isAuth,c=t.isLoading,o=Object(l.d)((function(e){return e.UI})).isInfoMissing,i=Object(l.c)(),m=Object(n.useState)(r.a.createElement(w.a,null)),p=Object(s.a)(m,2),g=p[0],h=p[1];return Object(n.useEffect)((function(){i(function(){var e=Object(j.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("account");case 3:a=e.sent,t(rt()),a.data.status?ut(a.data,t):t(it()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(it());case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[i]),Object(n.useEffect)((function(){h(c?r.a.createElement(O.a,{container:!0,justify:"center",alignItems:"center",className:e.Grid},r.a.createElement(w.a,null)):a&&o?r.a.createElement(u.d,null,r.a.createElement(u.a,{from:"/login",to:"/add"}),r.a.createElement(u.b,{path:"/add",component:qr,exact:!0})):a?r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/reset",component:ya,exact:!0}),r.a.createElement(u.a,{exact:!0,from:"/strangers",to:"/"}),r.a.createElement(u.a,{from:"/login",to:"/"}),r.a.createElement(u.b,{path:"/",component:Dr})):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/register",component:ln,exact:!0}),r.a.createElement(u.b,{path:"/forgot",component:Yr,exact:!0}),r.a.createElement(u.b,{path:"/reset",component:ya,exact:!0}),r.a.createElement(u.b,{path:"/login",component:on,exact:!0}),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/login"}))))}),[a,c,e.Grid]),r.a.createElement(f.a,{theme:x},r.a.createElement(Fr.b,{maxSnack:3,content:function(e){return r.a.createElement(ac,{id:e})}},r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null),g,r.a.createElement(rc,null))))},ic=a(33),lc=Object(ic.d)({general:pt,login:V,register:ba,UI:ge,filter:Oe,additional:et,users:$a,chat:ne,snack:_t}),sc=a(71),uc=Object(C.configureStore)({reducer:lc,middleware:[sc.a]});o.a.render(r.a.createElement(l.a,{store:uc},r.a.createElement(i.a,null,r.a.createElement(oc,null))),document.getElementById("root"))},36:function(e,t,a){e.exports=a.p+"static/media/default-avatar.d2c893f5.png"}},[[139,1,2]]]);
//# sourceMappingURL=main.193411be.chunk.js.map